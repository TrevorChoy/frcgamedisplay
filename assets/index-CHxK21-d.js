(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var dm={exports:{}},qo={};var Gv;function IC(){if(Gv)return qo;Gv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:r,type:s,key:h,ref:l!==void 0?l:null,props:u}}return qo.Fragment=t,qo.jsx=n,qo.jsxs=n,qo}var Qv;function NC(){return Qv||(Qv=1,dm.exports=IC()),dm.exports}var $=NC(),mm={exports:{}},Tt={};var Yv;function DC(){if(Yv)return Tt;Yv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.iterator;function P(O){return O===null||typeof O!="object"?null:(O=C&&O[C]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Z={};function at(O,K,nt){this.props=O,this.context=K,this.refs=Z,this.updater=nt||H}at.prototype.isReactComponent={},at.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},at.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ot(){}ot.prototype=at.prototype;function ut(O,K,nt){this.props=O,this.context=K,this.refs=Z,this.updater=nt||H}var _t=ut.prototype=new ot;_t.constructor=ut,W(_t,at.prototype),_t.isPureReactComponent=!0;var wt=Array.isArray;function gt(){}var R={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(O,K,nt){var rt=nt.ref;return{$$typeof:r,type:O,key:K,ref:rt!==void 0?rt:null,props:nt}}function V(O,K){return N(O.type,K,O.props)}function M(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function L(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(nt){return K[nt]})}var w=/\/+/g;function ce(O,K){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):K.toString(36)}function xe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(gt,gt):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function G(O,K,nt,rt,vt){var bt=typeof O;(bt==="undefined"||bt==="boolean")&&(O=null);var Ut=!1;if(O===null)Ut=!0;else switch(bt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(O.$$typeof){case r:case t:Ut=!0;break;case E:return Ut=O._init,G(Ut(O._payload),K,nt,rt,vt)}}if(Ut)return vt=vt(O),Ut=rt===""?"."+ce(O,0):rt,wt(vt)?(nt="",Ut!=null&&(nt=Ut.replace(w,"$&/")+"/"),G(vt,K,nt,"",function(yr){return yr})):vt!=null&&(M(vt)&&(vt=V(vt,nt+(vt.key==null||O&&O.key===vt.key?"":(""+vt.key).replace(w,"$&/")+"/")+Ut)),K.push(vt)),1;Ut=0;var Le=rt===""?".":rt+":";if(wt(O))for(var he=0;he<O.length;he++)rt=O[he],bt=Le+ce(rt,he),Ut+=G(rt,K,nt,bt,vt);else if(he=P(O),typeof he=="function")for(O=he.call(O),he=0;!(rt=O.next()).done;)rt=rt.value,bt=Le+ce(rt,he++),Ut+=G(rt,K,nt,bt,vt);else if(bt==="object"){if(typeof O.then=="function")return G(xe(O),K,nt,rt,vt);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function et(O,K,nt){if(O==null)return O;var rt=[],vt=0;return G(O,rt,"","",function(bt){return K.call(nt,bt,vt++)}),rt}function dt(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(nt){(O._status===0||O._status===-1)&&(O._status=1,O._result=nt)},function(nt){(O._status===0||O._status===-1)&&(O._status=2,O._result=nt)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var qt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Kt={map:et,forEach:function(O,K,nt){et(O,function(){K.apply(this,arguments)},nt)},count:function(O){var K=0;return et(O,function(){K++}),K},toArray:function(O){return et(O,function(K){return K})||[]},only:function(O){if(!M(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Tt.Activity=T,Tt.Children=Kt,Tt.Component=at,Tt.Fragment=n,Tt.Profiler=l,Tt.PureComponent=ut,Tt.StrictMode=s,Tt.Suspense=_,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Tt.cache=function(O){return function(){return O.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(O,K,nt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var rt=W({},O.props),vt=O.key;if(K!=null)for(bt in K.key!==void 0&&(vt=""+K.key),K)!b.call(K,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&K.ref===void 0||(rt[bt]=K[bt]);var bt=arguments.length-2;if(bt===1)rt.children=nt;else if(1<bt){for(var Ut=Array(bt),Le=0;Le<bt;Le++)Ut[Le]=arguments[Le+2];rt.children=Ut}return N(O.type,vt,rt)},Tt.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Tt.createElement=function(O,K,nt){var rt,vt={},bt=null;if(K!=null)for(rt in K.key!==void 0&&(bt=""+K.key),K)b.call(K,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(vt[rt]=K[rt]);var Ut=arguments.length-2;if(Ut===1)vt.children=nt;else if(1<Ut){for(var Le=Array(Ut),he=0;he<Ut;he++)Le[he]=arguments[he+2];vt.children=Le}if(O&&O.defaultProps)for(rt in Ut=O.defaultProps,Ut)vt[rt]===void 0&&(vt[rt]=Ut[rt]);return N(O,bt,vt)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(O){return{$$typeof:m,render:O}},Tt.isValidElement=M,Tt.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:dt}},Tt.memo=function(O,K){return{$$typeof:g,type:O,compare:K===void 0?null:K}},Tt.startTransition=function(O){var K=R.T,nt={};R.T=nt;try{var rt=O(),vt=R.S;vt!==null&&vt(nt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(gt,qt)}catch(bt){qt(bt)}finally{K!==null&&nt.types!==null&&(K.types=nt.types),R.T=K}},Tt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Tt.use=function(O){return R.H.use(O)},Tt.useActionState=function(O,K,nt){return R.H.useActionState(O,K,nt)},Tt.useCallback=function(O,K){return R.H.useCallback(O,K)},Tt.useContext=function(O){return R.H.useContext(O)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(O,K){return R.H.useDeferredValue(O,K)},Tt.useEffect=function(O,K){return R.H.useEffect(O,K)},Tt.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Tt.useId=function(){return R.H.useId()},Tt.useImperativeHandle=function(O,K,nt){return R.H.useImperativeHandle(O,K,nt)},Tt.useInsertionEffect=function(O,K){return R.H.useInsertionEffect(O,K)},Tt.useLayoutEffect=function(O,K){return R.H.useLayoutEffect(O,K)},Tt.useMemo=function(O,K){return R.H.useMemo(O,K)},Tt.useOptimistic=function(O,K){return R.H.useOptimistic(O,K)},Tt.useReducer=function(O,K,nt){return R.H.useReducer(O,K,nt)},Tt.useRef=function(O){return R.H.useRef(O)},Tt.useState=function(O){return R.H.useState(O)},Tt.useSyncExternalStore=function(O,K,nt){return R.H.useSyncExternalStore(O,K,nt)},Tt.useTransition=function(){return R.H.useTransition()},Tt.version="19.2.4",Tt}var Kv;function Yh(){return Kv||(Kv=1,mm.exports=DC()),mm.exports}var ln=Yh(),gm={exports:{}},Fo={},pm={exports:{}},_m={};var Xv;function MC(){return Xv||(Xv=1,(function(r){function t(G,et){var dt=G.length;G.push(et);t:for(;0<dt;){var qt=dt-1>>>1,Kt=G[qt];if(0<l(Kt,et))G[qt]=et,G[dt]=Kt,dt=qt;else break t}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var et=G[0],dt=G.pop();if(dt!==et){G[0]=dt;t:for(var qt=0,Kt=G.length,O=Kt>>>1;qt<O;){var K=2*(qt+1)-1,nt=G[K],rt=K+1,vt=G[rt];if(0>l(nt,dt))rt<Kt&&0>l(vt,nt)?(G[qt]=vt,G[rt]=dt,qt=rt):(G[qt]=nt,G[K]=dt,qt=K);else if(rt<Kt&&0>l(vt,dt))G[qt]=vt,G[rt]=dt,qt=rt;else break t}}return et}function l(G,et){var dt=G.sortIndex-et.sortIndex;return dt!==0?dt:G.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var _=[],g=[],E=1,T=null,C=3,P=!1,H=!1,W=!1,Z=!1,at=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;function _t(G){for(var et=n(g);et!==null;){if(et.callback===null)s(g);else if(et.startTime<=G)s(g),et.sortIndex=et.expirationTime,t(_,et);else break;et=n(g)}}function wt(G){if(W=!1,_t(G),!H)if(n(_)!==null)H=!0,gt||(gt=!0,L());else{var et=n(g);et!==null&&xe(wt,et.startTime-G)}}var gt=!1,R=-1,b=5,N=-1;function V(){return Z?!0:!(r.unstable_now()-N<b)}function M(){if(Z=!1,gt){var G=r.unstable_now();N=G;var et=!0;try{t:{H=!1,W&&(W=!1,ot(R),R=-1),P=!0;var dt=C;try{e:{for(_t(G),T=n(_);T!==null&&!(T.expirationTime>G&&V());){var qt=T.callback;if(typeof qt=="function"){T.callback=null,C=T.priorityLevel;var Kt=qt(T.expirationTime<=G);if(G=r.unstable_now(),typeof Kt=="function"){T.callback=Kt,_t(G),et=!0;break e}T===n(_)&&s(_),_t(G)}else s(_);T=n(_)}if(T!==null)et=!0;else{var O=n(g);O!==null&&xe(wt,O.startTime-G),et=!1}}break t}finally{T=null,C=dt,P=!1}et=void 0}}finally{et?L():gt=!1}}}var L;if(typeof ut=="function")L=function(){ut(M)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ce=w.port2;w.port1.onmessage=M,L=function(){ce.postMessage(null)}}else L=function(){at(M,0)};function xe(G,et){R=at(function(){G(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(G){switch(C){case 1:case 2:case 3:var et=3;break;default:et=C}var dt=C;C=et;try{return G()}finally{C=dt}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(G,et){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var dt=C;C=G;try{return et()}finally{C=dt}},r.unstable_scheduleCallback=function(G,et,dt){var qt=r.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?qt+dt:qt):dt=qt,G){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=dt+Kt,G={id:E++,callback:et,priorityLevel:G,startTime:dt,expirationTime:Kt,sortIndex:-1},dt>qt?(G.sortIndex=dt,t(g,G),n(_)===null&&G===n(g)&&(W?(ot(R),R=-1):W=!0,xe(wt,dt-qt))):(G.sortIndex=Kt,t(_,G),H||P||(H=!0,gt||(gt=!0,L()))),G},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(G){var et=C;return function(){var dt=C;C=et;try{return G.apply(this,arguments)}finally{C=dt}}}})(_m)),_m}var Wv;function OC(){return Wv||(Wv=1,pm.exports=MC()),pm.exports}var ym={exports:{}},sn={};var Zv;function VC(){if(Zv)return sn;Zv=1;var r=Yh();function t(_){var g="https://react.dev/errors/"+_;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+_+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(_,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:T==null?null:""+T,children:_,containerInfo:g,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,g){if(_==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sn.createPortal=function(_,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(_,g,null,E)},sn.flushSync=function(_){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,_)return _()}finally{h.T=g,s.p=E,s.d.f()}},sn.preconnect=function(_,g){typeof _=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(_,g))},sn.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},sn.preinit=function(_,g){if(typeof _=="string"&&g&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(_,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:P}):E==="script"&&s.d.X(_,{crossOrigin:T,integrity:C,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(_,g){if(typeof _=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(_)},sn.preload=function(_,g){if(typeof _=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=m(E,g.crossOrigin);s.d.L(_,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(_,g){if(typeof _=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(_,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(_)},sn.requestFormReset=function(_){s.d.r(_)},sn.unstable_batchedUpdates=function(_,g){return _(g)},sn.useFormState=function(_,g,E){return h.H.useFormState(_,g,E)},sn.useFormStatus=function(){return h.H.useHostTransitionStatus()},sn.version="19.2.4",sn}var Jv;function xC(){if(Jv)return ym.exports;Jv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ym.exports=VC(),ym.exports}var $v;function LC(){if($v)return Fo;$v=1;var r=OC(),t=Yh(),n=xC();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function _(e){if(u(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return _(f),e;if(d===o)return _(f),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=f,o=d;else{for(var y=!1,S=f.child;S;){if(S===a){y=!0,a=f,o=d;break}if(S===o){y=!0,o=f,a=d;break}S=S.sibling}if(!y){for(S=d.child;S;){if(S===a){y=!0,a=d,o=f;break}if(S===o){y=!0,o=d,a=f;break}S=S.sibling}if(!y)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),ot=Symbol.for("react.consumer"),ut=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case at:return"Profiler";case Z:return"StrictMode";case wt:return"Suspense";case gt:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ut:return e.displayName||"Context";case ot:return(e._context.displayName||"Context")+".Consumer";case _t:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R:return i=e.displayName||null,i!==null?i:ce(e.type)||"Memo";case b:i=e._payload,e=e._init;try{return ce(e(i))}catch{}}return null}var xe=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},qt=[],Kt=-1;function O(e){return{current:e}}function K(e){0>Kt||(e.current=qt[Kt],qt[Kt]=null,Kt--)}function nt(e,i){Kt++,qt[Kt]=e.current,e.current=i}var rt=O(null),vt=O(null),bt=O(null),Ut=O(null);function Le(e,i){switch(nt(bt,i),nt(vt,e),nt(rt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?mv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=mv(i),e=gv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(rt),nt(rt,e)}function he(){K(rt),K(vt),K(bt)}function yr(e){e.memoizedState!==null&&nt(Ut,e);var i=rt.current,a=gv(i,e.type);i!==a&&(nt(vt,e),nt(rt,a))}function ga(e){vt.current===e&&(K(rt),K(vt)),Ut.current===e&&(K(Ut),Uo._currentValue=dt)}var pa,_a;function vi(e){if(pa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pa=i&&i[1]||"",_a=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pa+e+_a}var Pl=!1;function vr(e,i){if(!e||Pl)return"";Pl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(F){var B=F}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(F){B=F}e.call(Y.prototype)}}else{try{throw Error()}catch(F){B=F}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],S=d[1];if(y&&S){var I=y.split(`
`),z=S.split(`
`);for(f=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(o===I.length||f===z.length)for(o=I.length-1,f=z.length-1;1<=o&&0<=f&&I[o]!==z[f];)f--;for(;1<=o&&0<=f;o--,f--)if(I[o]!==z[f]){if(o!==1||f!==1)do if(o--,f--,0>f||I[o]!==z[f]){var j=`
`+I[o].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=o&&0<=f);break}}}finally{Pl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vi(a):""}function Ul(e,i){switch(e.tag){case 26:case 27:case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return e.child!==i&&i!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return vr(e.type,!1);case 11:return vr(e.type.render,!1);case 1:return vr(e.type,!0);case 31:return vi("Activity");default:return""}}function kl(e){try{var i="",a=null;do i+=Ul(e,a),a=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Se=Object.prototype.hasOwnProperty,Pe=r.unstable_scheduleCallback,As=r.unstable_cancelCallback,gf=r.unstable_shouldYield,Vu=r.unstable_requestPaint,dn=r.unstable_now,Er=r.unstable_getCurrentPriorityLevel,zl=r.unstable_ImmediatePriority,Bl=r.unstable_UserBlockingPriority,Cs=r.unstable_NormalPriority,pf=r.unstable_LowPriority,xu=r.unstable_IdlePriority,Lu=r.log,Pu=r.unstable_setDisableYieldValue,ti=null,Ke=null;function Un(e){if(typeof Lu=="function"&&Pu(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ti,e)}catch{}}var _e=Math.clz32?Math.clz32:ku,Uu=Math.log,ya=Math.LN2;function ku(e){return e>>>=0,e===0?32:31-(Uu(e)/ya|0)|0}var Ei=256,Tr=262144,Ae=4194304;function Ti(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Si(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~d,o!==0?f=Ti(o):(y&=S,y!==0?f=Ti(y):a||(a=S&~e,a!==0&&(f=Ti(a))))):(S=o&~d,S!==0?f=Ti(S):y!==0?f=Ti(y):a||(a=o&~e,a!==0&&(f=Ti(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ei(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function _f(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(){var e=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),e}function Ai(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Sr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yf(e,i,a,o,f,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,I=e.expirationTimes,z=e.hiddenUpdates;for(a=y&~a;0<a;){var j=31-_e(a),Y=1<<j;S[j]=0,I[j]=-1;var B=z[j];if(B!==null)for(z[j]=null,j=0;j<B.length;j++){var F=B[j];F!==null&&(F.lane&=-536870913)}a&=~Y}o!==0&&Ar(e,o,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~i))}function Ar(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-_e(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function ql(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-_e(a),f=1<<o;f&i|e[o]&i&&(e[o]|=i),a&=~f}}function Fl(e,i){var a=i&-i;return a=(a&42)!==0?1:Cr(a),(a&(e.suspendedLanes|i))!==0?0:a}function Cr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bu(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:kv(e.type))}function ni(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var ii=Math.random().toString(36).slice(2),Ce="__reactFiber$"+ii,qe="__reactProps$"+ii,Ci="__reactContainer$"+ii,va="__reactEvents$"+ii,vf="__reactListeners$"+ii,qu="__reactHandles$"+ii,Fu="__reactResources$"+ii,bi="__reactMarker$"+ii;function Ea(e){delete e[Ce],delete e[qe],delete e[va],delete e[vf],delete e[qu]}function Ri(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ci]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Sv(e);e!==null;){if(a=e[Ce])return a;e=Sv(e)}return i}e=a,a=e.parentNode}return null}function kn(e){if(e=e[Ce]||e[Ci]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Rn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function wi(e){var i=e[Fu];return i||(i=e[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function be(e){e[bi]=!0}var jl=new Set,Hl={};function Ii(e,i){Ni(e,i),Ni(e+"Capture",i)}function Ni(e,i){for(Hl[e]=i,e=0;e<i.length;e++)jl.add(i[e])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ql={},Yl={};function ju(e){return Se.call(Yl,e)?!0:Se.call(Ql,e)?!1:Gl.test(e)?Yl[e]=!0:(Ql[e]=!0,!1)}function Ta(e,i,a){if(ju(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function wn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Re(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}function Fe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bs(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kl(e,i,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,d=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xt(e){if(!e._valueTracker){var i=bs(e)?"checked":"value";e._valueTracker=Kl(e,i,""+e[i])}}function br(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=bs(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function Di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rr=/[\n"\\]/g;function _n(e){return e.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Sa(e,i,a,o,f,d,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),i!=null?y==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Fe(i)):e.value!==""+Fe(i)&&(e.value=""+Fe(i)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),i!=null?Xl(e,y,Fe(i)):a!=null?Xl(e,y,Fe(a)):o!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Fe(S):e.removeAttribute("name")}function Hu(e,i,a,o,f,d,y,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xt(e);return}a=a!=null?""+Fe(a):"",i=i!=null?""+Fe(i):a,S||i===e.value||(e.value=i),e.defaultValue=i}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Xt(e)}function Xl(e,i,a){i==="number"&&Di(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Rs(e,i,a,o){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Gu(e,i,a){if(i!=null&&(i=""+Fe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Fe(a):""}function ws(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(xe(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Fe(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Xt(e)}function yn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Qu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Zl(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in i)o=i[f],i.hasOwnProperty(f)&&a[f]!==o&&Wl(e,f,o)}else for(var d in i)i.hasOwnProperty(d)&&Wl(e,d,i[d])}function Aa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(e){return Is.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function si(){}var Jl=null;function zn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ns=null,Mi=null;function wr(e){var i=kn(e);if(i&&(e=i.stateNode)){var a=e[qe]||null;t:switch(e=i.stateNode,i.type){case"input":if(Sa(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var f=o[qe]||null;if(!f)throw Error(s(90));Sa(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&br(o)}break t;case"textarea":Gu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Rs(e,!!a.multiple,i,!1)}}}var ba=!1;function Ds(e,i,a){if(ba)return e(i,a);ba=!0;try{var o=e(i);return o}finally{if(ba=!1,(Ns!==null||Mi!==null)&&(Bc(),Ns&&(i=Ns,e=Mi,Mi=Ns=null,wr(i),e)))for(i=0;i<e.length;i++)wr(e[i])}}function ri(e,i){var a=e.stateNode;if(a===null)return null;var o=a[qe]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ir=!1;if(Bn)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Ir=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Ir=!1}var Oi=null,$l=null,Nr=null;function to(){if(Nr)return Nr;var e,i=$l,a=i.length,o,f="value"in Oi?Oi.value:Oi.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var y=a-e;for(o=1;o<=y&&i[a-o]===f[d-o];o++);return Nr=f.slice(e,1<o?1-o:void 0)}function Dr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function ai(){return!1}function Xe(e){function i(a,o,f,d,y){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Wi:ai,this.isPropagationStopped=ai,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),i}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Xe(Zi),Ms=T({},Zi,{view:0,detail:0}),eo=Xe(Ms),Os,Ra,xi,wa=T({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xi&&(xi&&e.type==="mousemove"?(Os=e.screenX-xi.screenX,Ra=e.screenY-xi.screenY):Ra=Os=0,xi=e),Os)},movementY:function(e){return"movementY"in e?e.movementY:Ra}}),no=Xe(wa),Mr=T({},wa,{dataTransfer:0}),Ku=Xe(Mr),Xu=T({},Ms,{relatedTarget:0}),Or=Xe(Xu),io=T({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Xe(io),Ia=T({},Zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zu=Xe(Ia),Ju=T({},Zi,{data:0}),Li=Xe(Ju),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ec[e])?!!i[e]:!1}function Vs(){return nc}var mn=T({},Ms,{key:function(e){if(e.key){var i=$u[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(e){return e.type==="keypress"?Dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ic=Xe(mn),sc=T({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=Xe(sc),c=T({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),p=Xe(c),v=T({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Xe(v),U=T({},wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Xe(U),tt=T({},Zi,{newState:0,oldState:0}),At=Xe(tt),ye=[9,13,27,32],Ht=Bn&&"CompositionEvent"in window,fe=null;Bn&&"documentMode"in document&&(fe=document.documentMode);var qn=Bn&&"TextEvent"in window&&!fe,Pi=Bn&&(!Ht||fe&&8<fe&&11>=fe),li=" ",oi=!1;function Vr(e,i){switch(e){case"keyup":return ye.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Na(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Da=!1;function J1(e,i){switch(e){case"compositionend":return Na(i);case"keypress":return i.which!==32?null:(oi=!0,li);case"textInput":return e=i.data,e===li&&oi?null:e;default:return null}}function $1(e,i){if(Da)return e==="compositionend"||!Ht&&Vr(e,i)?(e=to(),Nr=$l=Oi=null,Da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pi&&i.locale!=="ko"?null:i.data;default:return null}}var tA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!tA[e.type]:i==="textarea"}function Rp(e,i,a,o){Ns?Mi?Mi.push(o):Mi=[o]:Ns=o,i=Yc(i,"onChange"),0<i.length&&(a=new Vi("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var so=null,ro=null;function eA(e){ov(e,0)}function rc(e){var i=Rn(e);if(br(i))return e}function wp(e,i){if(e==="change")return i}var Ip=!1;if(Bn){var Ef;if(Bn){var Tf="oninput"in document;if(!Tf){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),Tf=typeof Np.oninput=="function"}Ef=Tf}else Ef=!1;Ip=Ef&&(!document.documentMode||9<document.documentMode)}function Dp(){so&&(so.detachEvent("onpropertychange",Mp),ro=so=null)}function Mp(e){if(e.propertyName==="value"&&rc(ro)){var i=[];Rp(i,ro,e,zn(e)),Ds(eA,i)}}function nA(e,i,a){e==="focusin"?(Dp(),so=i,ro=a,so.attachEvent("onpropertychange",Mp)):e==="focusout"&&Dp()}function iA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(ro)}function sA(e,i){if(e==="click")return rc(i)}function rA(e,i){if(e==="input"||e==="change")return rc(i)}function aA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var In=typeof Object.is=="function"?Object.is:aA;function ao(e,i){if(In(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!Se.call(i,f)||!In(e[f],i[f]))return!1}return!0}function Op(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vp(e,i){var a=Op(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Op(a)}}function xp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?xp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Lp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Di(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Di(e.document)}return i}function Sf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var lA=Bn&&"documentMode"in document&&11>=document.documentMode,Ma=null,Af=null,lo=null,Cf=!1;function Pp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cf||Ma==null||Ma!==Di(o)||(o=Ma,"selectionStart"in o&&Sf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),lo&&ao(lo,o)||(lo=o,o=Yc(Af,"onSelect"),0<o.length&&(i=new Vi("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=Ma)))}function xr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Oa={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},bf={},Up={};Bn&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Lr(e){if(bf[e])return bf[e];if(!Oa[e])return e;var i=Oa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Up)return bf[e]=i[a];return e}var kp=Lr("animationend"),zp=Lr("animationiteration"),Bp=Lr("animationstart"),oA=Lr("transitionrun"),uA=Lr("transitionstart"),cA=Lr("transitioncancel"),qp=Lr("transitionend"),Fp=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function ui(e,i){Fp.set(e,i),Ii(i,[e])}var ac=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fn=[],Va=0,wf=0;function lc(){for(var e=Va,i=wf=Va=0;i<e;){var a=Fn[i];Fn[i++]=null;var o=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var d=Fn[i];if(Fn[i++]=null,o!==null&&f!==null){var y=o.pending;y===null?f.next=f:(f.next=y.next,y.next=f),o.pending=f}d!==0&&jp(a,f,d)}}function oc(e,i,a,o){Fn[Va++]=e,Fn[Va++]=i,Fn[Va++]=a,Fn[Va++]=o,wf|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function If(e,i,a,o){return oc(e,i,a,o),uc(e)}function Pr(e,i){return oc(e,null,null,i),uc(e)}function jp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-_e(a),e=d.hiddenUpdates,o=e[f],o===null?e[f]=[i]:o.push(i),i.lane=a|536870912),d):null}function uc(e){if(50<Do)throw Do=0,Ud=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var xa={};function hA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,i,a,o){return new hA(e,i,a,o)}function Nf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $i(e,i){var a=e.alternate;return a===null?(a=Nn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Hp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function cc(e,i,a,o,f,d){var y=0;if(o=e,typeof e=="function")Nf(e)&&(y=1);else if(typeof e=="string")y=pC(e,a,rt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case N:return e=Nn(31,a,i,f),e.elementType=N,e.lanes=d,e;case W:return Ur(a.children,f,d,i);case Z:y=8,f|=24;break;case at:return e=Nn(12,a,i,f|2),e.elementType=at,e.lanes=d,e;case wt:return e=Nn(13,a,i,f),e.elementType=wt,e.lanes=d,e;case gt:return e=Nn(19,a,i,f),e.elementType=gt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ut:y=10;break t;case ot:y=9;break t;case _t:y=11;break t;case R:y=14;break t;case b:y=16,o=null;break t}y=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=Nn(y,a,i,f),i.elementType=e,i.type=o,i.lanes=d,i}function Ur(e,i,a,o){return e=Nn(7,e,o,i),e.lanes=a,e}function Df(e,i,a){return e=Nn(6,e,null,i),e.lanes=a,e}function Gp(e){var i=Nn(18,null,null,0);return i.stateNode=e,i}function Mf(e,i,a){return i=Nn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Qp=new WeakMap;function jn(e,i){if(typeof e=="object"&&e!==null){var a=Qp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:kl(i)},Qp.set(e,i),i)}return{value:e,source:i,stack:kl(i)}}var La=[],Pa=0,hc=null,oo=0,Hn=[],Gn=0,xs=null,Ui=1,ki="";function ts(e,i){La[Pa++]=oo,La[Pa++]=hc,hc=e,oo=i}function Yp(e,i,a){Hn[Gn++]=Ui,Hn[Gn++]=ki,Hn[Gn++]=xs,xs=e;var o=Ui;e=ki;var f=32-_e(o)-1;o&=~(1<<f),a+=1;var d=32-_e(i)+f;if(30<d){var y=f-f%5;d=(o&(1<<y)-1).toString(32),o>>=y,f-=y,Ui=1<<32-_e(i)+f|a<<f|o,ki=d+e}else Ui=1<<d|a<<f|o,ki=e}function Of(e){e.return!==null&&(ts(e,1),Yp(e,1,0))}function Vf(e){for(;e===hc;)hc=La[--Pa],La[Pa]=null,oo=La[--Pa],La[Pa]=null;for(;e===xs;)xs=Hn[--Gn],Hn[Gn]=null,ki=Hn[--Gn],Hn[Gn]=null,Ui=Hn[--Gn],Hn[Gn]=null}function Kp(e,i){Hn[Gn++]=Ui,Hn[Gn++]=ki,Hn[Gn++]=xs,Ui=i.id,ki=i.overflow,xs=e}var We=null,se=null,xt=!1,Ls=null,Qn=!1,xf=Error(s(519));function Ps(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uo(jn(i,e)),xf}function Xp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[qe]=o,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<Oo.length;a++)Nt(Oo[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),Hu(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),ws(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||fv(i.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),o.onScroll!=null&&Nt("scroll",i),o.onScrollEnd!=null&&Nt("scrollend",i),o.onClick!=null&&(i.onclick=si),i=!0):i=!1,i||Ps(e,!0)}function Wp(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:We=We.return}}function Ua(e){if(e!==We)return!1;if(!xt)return Wp(e),xt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Jd(e.type,e.memoizedProps)),a=!a),a&&se&&Ps(e),Wp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));se=Tv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));se=Tv(e)}else i===27?(i=se,Ws(e.type)?(e=im,im=null,se=e):se=i):se=We?Kn(e.stateNode.nextSibling):null;return!0}function kr(){se=We=null,xt=!1}function Lf(){var e=Ls;return e!==null&&(Sn===null?Sn=e:Sn.push.apply(Sn,e),Ls=null),e}function uo(e){Ls===null?Ls=[e]:Ls.push(e)}var Pf=O(null),zr=null,es=null;function Us(e,i,a){nt(Pf,i._currentValue),i._currentValue=a}function ns(e){e._currentValue=Pf.current,K(Pf)}function Uf(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function kf(e,i,a,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=f;for(var I=0;I<i.length;I++)if(S.context===i[I]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Uf(d.return,a,e),o||(y=null);break t}d=S.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(s(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),Uf(y,a,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function ka(e,i,a,o){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var S=f.type;In(f.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(f===Ut.current){if(y=f.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Uo):e=[Uo])}f=f.return}e!==null&&kf(i,e,a,o),i.flags|=262144}function fc(e){for(e=e.firstContext;e!==null;){if(!In(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Br(e){zr=e,es=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return Zp(zr,e)}function dc(e,i){return zr===null&&Br(e),Zp(e,i)}function Zp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},es===null){if(e===null)throw Error(s(308));es=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else es=es.next=i;return a}var fA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},dA=r.unstable_scheduleCallback,mA=r.unstable_NormalPriority,we={$$typeof:ut,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zf(){return{controller:new fA,data:new Map,refCount:0}}function co(e){e.refCount--,e.refCount===0&&dA(mA,function(){e.controller.abort()})}var ho=null,Bf=0,za=0,Ba=null;function gA(e,i){if(ho===null){var a=ho=[];Bf=0,za=jd(),Ba={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Bf++,i.then(Jp,Jp),i}function Jp(){if(--Bf===0&&ho!==null){Ba!==null&&(Ba.status="fulfilled");var e=ho;ho=null,za=0,Ba=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function pA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var $p=G.S;G.S=function(e,i){Py=dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&gA(e,i),$p!==null&&$p(e,i)};var qr=O(null);function qf(){var e=qr.current;return e!==null?e:ie.pooledCache}function mc(e,i){i===null?nt(qr,qr.current):nt(qr,i.pool)}function t_(){var e=qf();return e===null?null:{parent:we._currentValue,pool:e}}var qa=Error(s(460)),Ff=Error(s(474)),gc=Error(s(542)),pc={then:function(){}};function e_(e){return e=e.status,e==="fulfilled"||e==="rejected"}function n_(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(si,si),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,s_(e),e;default:if(typeof i.status=="string")i.then(si,si);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=o}},function(o){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,s_(e),e}throw jr=i,qa}}function Fr(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jr=a,qa):a}}var jr=null;function i_(){if(jr===null)throw Error(s(459));var e=jr;return jr=null,e}function s_(e){if(e===qa||e===gc)throw Error(s(483))}var Fa=null,fo=0;function _c(e){var i=fo;return fo+=1,Fa===null&&(Fa=[]),n_(Fa,e,i)}function mo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function yc(e,i){throw i.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function r_(e){function i(x,D){if(e){var k=x.deletions;k===null?(x.deletions=[D],x.flags|=16):k.push(D)}}function a(x,D){if(!e)return null;for(;D!==null;)i(x,D),D=D.sibling;return null}function o(x){for(var D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function f(x,D){return x=$i(x,D),x.index=0,x.sibling=null,x}function d(x,D,k){return x.index=k,e?(k=x.alternate,k!==null?(k=k.index,k<D?(x.flags|=67108866,D):k):(x.flags|=67108866,D)):(x.flags|=1048576,D)}function y(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function S(x,D,k,Q){return D===null||D.tag!==6?(D=Df(k,x.mode,Q),D.return=x,D):(D=f(D,k),D.return=x,D)}function I(x,D,k,Q){var ft=k.type;return ft===W?j(x,D,k.props.children,Q,k.key):D!==null&&(D.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===b&&Fr(ft)===D.type)?(D=f(D,k.props),mo(D,k),D.return=x,D):(D=cc(k.type,k.key,k.props,null,x.mode,Q),mo(D,k),D.return=x,D)}function z(x,D,k,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==k.containerInfo||D.stateNode.implementation!==k.implementation?(D=Mf(k,x.mode,Q),D.return=x,D):(D=f(D,k.children||[]),D.return=x,D)}function j(x,D,k,Q,ft){return D===null||D.tag!==7?(D=Ur(k,x.mode,Q,ft),D.return=x,D):(D=f(D,k),D.return=x,D)}function Y(x,D,k){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Df(""+D,x.mode,k),D.return=x,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case P:return k=cc(D.type,D.key,D.props,null,x.mode,k),mo(k,D),k.return=x,k;case H:return D=Mf(D,x.mode,k),D.return=x,D;case b:return D=Fr(D),Y(x,D,k)}if(xe(D)||L(D))return D=Ur(D,x.mode,k,null),D.return=x,D;if(typeof D.then=="function")return Y(x,_c(D),k);if(D.$$typeof===ut)return Y(x,dc(x,D),k);yc(x,D)}return null}function B(x,D,k,Q){var ft=D!==null?D.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ft!==null?null:S(x,D,""+k,Q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case P:return k.key===ft?I(x,D,k,Q):null;case H:return k.key===ft?z(x,D,k,Q):null;case b:return k=Fr(k),B(x,D,k,Q)}if(xe(k)||L(k))return ft!==null?null:j(x,D,k,Q,null);if(typeof k.then=="function")return B(x,D,_c(k),Q);if(k.$$typeof===ut)return B(x,D,dc(x,k),Q);yc(x,k)}return null}function F(x,D,k,Q,ft){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return x=x.get(k)||null,S(D,x,""+Q,ft);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return x=x.get(Q.key===null?k:Q.key)||null,I(D,x,Q,ft);case H:return x=x.get(Q.key===null?k:Q.key)||null,z(D,x,Q,ft);case b:return Q=Fr(Q),F(x,D,k,Q,ft)}if(xe(Q)||L(Q))return x=x.get(k)||null,j(D,x,Q,ft,null);if(typeof Q.then=="function")return F(x,D,k,_c(Q),ft);if(Q.$$typeof===ut)return F(x,D,k,dc(D,Q),ft);yc(D,Q)}return null}function lt(x,D,k,Q){for(var ft=null,Ft=null,ct=D,Rt=D=0,Mt=null;ct!==null&&Rt<k.length;Rt++){ct.index>Rt?(Mt=ct,ct=null):Mt=ct.sibling;var jt=B(x,ct,k[Rt],Q);if(jt===null){ct===null&&(ct=Mt);break}e&&ct&&jt.alternate===null&&i(x,ct),D=d(jt,D,Rt),Ft===null?ft=jt:Ft.sibling=jt,Ft=jt,ct=Mt}if(Rt===k.length)return a(x,ct),xt&&ts(x,Rt),ft;if(ct===null){for(;Rt<k.length;Rt++)ct=Y(x,k[Rt],Q),ct!==null&&(D=d(ct,D,Rt),Ft===null?ft=ct:Ft.sibling=ct,Ft=ct);return xt&&ts(x,Rt),ft}for(ct=o(ct);Rt<k.length;Rt++)Mt=F(ct,x,Rt,k[Rt],Q),Mt!==null&&(e&&Mt.alternate!==null&&ct.delete(Mt.key===null?Rt:Mt.key),D=d(Mt,D,Rt),Ft===null?ft=Mt:Ft.sibling=Mt,Ft=Mt);return e&&ct.forEach(function(er){return i(x,er)}),xt&&ts(x,Rt),ft}function pt(x,D,k,Q){if(k==null)throw Error(s(151));for(var ft=null,Ft=null,ct=D,Rt=D=0,Mt=null,jt=k.next();ct!==null&&!jt.done;Rt++,jt=k.next()){ct.index>Rt?(Mt=ct,ct=null):Mt=ct.sibling;var er=B(x,ct,jt.value,Q);if(er===null){ct===null&&(ct=Mt);break}e&&ct&&er.alternate===null&&i(x,ct),D=d(er,D,Rt),Ft===null?ft=er:Ft.sibling=er,Ft=er,ct=Mt}if(jt.done)return a(x,ct),xt&&ts(x,Rt),ft;if(ct===null){for(;!jt.done;Rt++,jt=k.next())jt=Y(x,jt.value,Q),jt!==null&&(D=d(jt,D,Rt),Ft===null?ft=jt:Ft.sibling=jt,Ft=jt);return xt&&ts(x,Rt),ft}for(ct=o(ct);!jt.done;Rt++,jt=k.next())jt=F(ct,x,Rt,jt.value,Q),jt!==null&&(e&&jt.alternate!==null&&ct.delete(jt.key===null?Rt:jt.key),D=d(jt,D,Rt),Ft===null?ft=jt:Ft.sibling=jt,Ft=jt);return e&&ct.forEach(function(wC){return i(x,wC)}),xt&&ts(x,Rt),ft}function ee(x,D,k,Q){if(typeof k=="object"&&k!==null&&k.type===W&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case P:t:{for(var ft=k.key;D!==null;){if(D.key===ft){if(ft=k.type,ft===W){if(D.tag===7){a(x,D.sibling),Q=f(D,k.props.children),Q.return=x,x=Q;break t}}else if(D.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===b&&Fr(ft)===D.type){a(x,D.sibling),Q=f(D,k.props),mo(Q,k),Q.return=x,x=Q;break t}a(x,D);break}else i(x,D);D=D.sibling}k.type===W?(Q=Ur(k.props.children,x.mode,Q,k.key),Q.return=x,x=Q):(Q=cc(k.type,k.key,k.props,null,x.mode,Q),mo(Q,k),Q.return=x,x=Q)}return y(x);case H:t:{for(ft=k.key;D!==null;){if(D.key===ft)if(D.tag===4&&D.stateNode.containerInfo===k.containerInfo&&D.stateNode.implementation===k.implementation){a(x,D.sibling),Q=f(D,k.children||[]),Q.return=x,x=Q;break t}else{a(x,D);break}else i(x,D);D=D.sibling}Q=Mf(k,x.mode,Q),Q.return=x,x=Q}return y(x);case b:return k=Fr(k),ee(x,D,k,Q)}if(xe(k))return lt(x,D,k,Q);if(L(k)){if(ft=L(k),typeof ft!="function")throw Error(s(150));return k=ft.call(k),pt(x,D,k,Q)}if(typeof k.then=="function")return ee(x,D,_c(k),Q);if(k.$$typeof===ut)return ee(x,D,dc(x,k),Q);yc(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,D!==null&&D.tag===6?(a(x,D.sibling),Q=f(D,k),Q.return=x,x=Q):(a(x,D),Q=Df(k,x.mode,Q),Q.return=x,x=Q),y(x)):a(x,D)}return function(x,D,k,Q){try{fo=0;var ft=ee(x,D,k,Q);return Fa=null,ft}catch(ct){if(ct===qa||ct===gc)throw ct;var Ft=Nn(29,ct,null,x.mode);return Ft.lanes=Q,Ft.return=x,Ft}}}var Hr=r_(!0),a_=r_(!1),ks=!1;function jf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function zs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var f=o.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),o.pending=i,i=uc(e),jp(e,null,a),i}return oc(e,o,i,a),uc(e)}function go(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ql(e,a)}}function Gf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Qf=!1;function po(){if(Qf){var e=Ba;if(e!==null)throw e}}function _o(e,i,a,o){Qf=!1;var f=e.updateQueue;ks=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var I=S,z=I.next;I.next=null,y===null?d=z:y.next=z,y=I;var j=e.alternate;j!==null&&(j=j.updateQueue,S=j.lastBaseUpdate,S!==y&&(S===null?j.firstBaseUpdate=z:S.next=z,j.lastBaseUpdate=I))}if(d!==null){var Y=f.baseState;y=0,j=z=I=null,S=d;do{var B=S.lane&-536870913,F=B!==S.lane;if(F?(Dt&B)===B:(o&B)===B){B!==0&&B===za&&(Qf=!0),j!==null&&(j=j.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var lt=e,pt=S;B=i;var ee=a;switch(pt.tag){case 1:if(lt=pt.payload,typeof lt=="function"){Y=lt.call(ee,Y,B);break t}Y=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=pt.payload,B=typeof lt=="function"?lt.call(ee,Y,B):lt,B==null)break t;Y=T({},Y,B);break t;case 2:ks=!0}}B=S.callback,B!==null&&(e.flags|=64,F&&(e.flags|=8192),F=f.callbacks,F===null?f.callbacks=[B]:F.push(B))}else F={lane:B,tag:S.tag,payload:S.payload,callback:S.callback,next:null},j===null?(z=j=F,I=Y):j=j.next=F,y|=B;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;F=S,S=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);j===null&&(I=Y),f.baseState=I,f.firstBaseUpdate=z,f.lastBaseUpdate=j,d===null&&(f.shared.lanes=0),Gs|=y,e.lanes=y,e.memoizedState=Y}}function l_(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function o_(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)l_(a[e],i)}var ja=O(null),vc=O(0);function u_(e,i){e=hs,nt(vc,e),nt(ja,i),hs=e|i.baseLanes}function Yf(){nt(vc,hs),nt(ja,ja.current)}function Kf(){hs=vc.current,K(ja),K(vc)}var Dn=O(null),Yn=null;function qs(e){var i=e.alternate;nt(ve,ve.current&1),nt(Dn,e),Yn===null&&(i===null||ja.current!==null||i.memoizedState!==null)&&(Yn=e)}function Xf(e){nt(ve,ve.current),nt(Dn,e),Yn===null&&(Yn=e)}function c_(e){e.tag===22?(nt(ve,ve.current),nt(Dn,e),Yn===null&&(Yn=e)):Fs()}function Fs(){nt(ve,ve.current),nt(Dn,Dn.current)}function Mn(e){K(Dn),Yn===e&&(Yn=null),K(ve)}var ve=O(0);function Ec(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||em(a)||nm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var is=0,Ct=null,$t=null,Ie=null,Tc=!1,Ha=!1,Gr=!1,Sc=0,yo=0,Ga=null,_A=0;function ge(){throw Error(s(321))}function Wf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!In(e[a],i[a]))return!1;return!0}function Zf(e,i,a,o,f,d){return is=d,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?Y_:fd,Gr=!1,d=a(o,f),Gr=!1,Ha&&(d=f_(i,a,o,f)),h_(e),d}function h_(e){G.H=To;var i=$t!==null&&$t.next!==null;if(is=0,Ie=$t=Ct=null,Tc=!1,yo=0,Ga=null,i)throw Error(s(300));e===null||Ne||(e=e.dependencies,e!==null&&fc(e)&&(Ne=!0))}function f_(e,i,a,o){Ct=e;var f=0;do{if(Ha&&(Ga=null),yo=0,Ha=!1,25<=f)throw Error(s(301));if(f+=1,Ie=$t=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=K_,d=i(a,o)}while(Ha);return d}function yA(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?vo(i):i,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(Ct.flags|=1024),i}function Jf(){var e=Sc!==0;return Sc=0,e}function $f(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function td(e){if(Tc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Tc=!1}is=0,Ie=$t=Ct=null,Ha=!1,yo=Sc=0,Ga=null}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?Ct.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function Ee(){if($t===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var i=Ie===null?Ct.memoizedState:Ie.next;if(i!==null)Ie=i,$t=e;else{if(e===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ie===null?Ct.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(e){var i=yo;return yo+=1,Ga===null&&(Ga=[]),e=n_(Ga,e,i),i=Ct,(Ie===null?i.memoizedState:Ie.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Y_:fd),e}function Cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vo(e);if(e.$$typeof===ut)return Ze(e)}throw Error(s(438,String(e)))}function ed(e){var i=null,a=Ct.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ac(),Ct.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function ss(e,i){return typeof i=="function"?i(e):i}function bc(e){var i=Ee();return nd(i,$t,e)}function nd(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var f=e.baseQueue,d=o.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}i.baseQueue=f=d,o.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var S=y=null,I=null,z=i,j=!1;do{var Y=z.lane&-536870913;if(Y!==z.lane?(Dt&Y)===Y:(is&Y)===Y){var B=z.revertLane;if(B===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Y===za&&(j=!0);else if((is&B)===B){z=z.next,B===za&&(j=!0);continue}else Y={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(S=I=Y,y=d):I=I.next=Y,Ct.lanes|=B,Gs|=B;Y=z.action,Gr&&a(d,Y),d=z.hasEagerState?z.eagerState:a(d,Y)}else B={lane:Y,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(S=I=B,y=d):I=I.next=B,Ct.lanes|=Y,Gs|=Y;z=z.next}while(z!==null&&z!==i);if(I===null?y=d:I.next=S,!In(d,e.memoizedState)&&(Ne=!0,j&&(a=Ba,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=I,o.lastRenderedState=d}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function id(e){var i=Ee(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);In(d,i.memoizedState)||(Ne=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function d_(e,i,a){var o=Ct,f=Ee(),d=xt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var y=!In(($t||f).memoizedState,a);if(y&&(f.memoizedState=a,Ne=!0),f=f.queue,ad(p_.bind(null,o,f,e),[e]),f.getSnapshot!==i||y||Ie!==null&&Ie.memoizedState.tag&1){if(o.flags|=2048,Qa(9,{destroy:void 0},g_.bind(null,o,f,a,i),null),ie===null)throw Error(s(349));d||(is&127)!==0||m_(o,i,a)}return a}function m_(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ct.updateQueue,i===null?(i=Ac(),Ct.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function g_(e,i,a,o){i.value=a,i.getSnapshot=o,__(i)&&y_(e)}function p_(e,i,a){return a(function(){__(i)&&y_(e)})}function __(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!In(e,a)}catch{return!0}}function y_(e){var i=Pr(e,2);i!==null&&An(i,e,2)}function sd(e){var i=gn();if(typeof e=="function"){var a=e;if(e=a(),Gr){Un(!0);try{a()}finally{Un(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},i}function v_(e,i,a,o){return e.baseState=a,nd(e,$t,typeof o=="function"?o:ss)}function vA(e,i,a,o,f){if(Ic(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};G.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,E_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function E_(e,i){var a=i.action,o=i.payload,f=e.state;if(i.isTransition){var d=G.T,y={};G.T=y;try{var S=a(f,o),I=G.S;I!==null&&I(y,S),T_(e,i,S)}catch(z){rd(e,i,z)}finally{d!==null&&y.types!==null&&(d.types=y.types),G.T=d}}else try{d=a(f,o),T_(e,i,d)}catch(z){rd(e,i,z)}}function T_(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){S_(e,i,o)},function(o){return rd(e,i,o)}):S_(e,i,a)}function S_(e,i,a){i.status="fulfilled",i.value=a,A_(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,E_(e,a)))}function rd(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,A_(i),i=i.next;while(i!==o)}e.action=null}function A_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function C_(e,i){return i}function b_(e,i){if(xt){var a=ie.formState;if(a!==null){t:{var o=Ct;if(xt){if(se){e:{for(var f=se,d=Qn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Kn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){se=Kn(f.nextSibling),o=f.data==="F!";break t}}Ps(o)}o=!1}o&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:i},a.queue=o,a=H_.bind(null,Ct,o),o.dispatch=a,o=sd(!1),d=hd.bind(null,Ct,!1,o.queue),o=gn(),f={state:i,dispatch:null,action:e,pending:null},o.queue=f,a=vA.bind(null,Ct,f,d,a),f.dispatch=a,o.memoizedState=e,[i,a,!1]}function R_(e){var i=Ee();return w_(i,$t,e)}function w_(e,i,a){if(i=nd(e,i,C_)[0],e=bc(ss)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=vo(i)}catch(y){throw y===qa?gc:y}else o=i;i=Ee();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Ct.flags|=2048,Qa(9,{destroy:void 0},EA.bind(null,f,a),null)),[o,d,e]}function EA(e,i){e.action=i}function I_(e){var i=Ee(),a=$t;if(a!==null)return w_(i,a,e);Ee(),i=i.memoizedState,a=Ee();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Qa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=Ac(),Ct.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function N_(){return Ee().memoizedState}function Rc(e,i,a,o){var f=gn();Ct.flags|=e,f.memoizedState=Qa(1|i,{destroy:void 0},a,o===void 0?null:o)}function wc(e,i,a,o){var f=Ee();o=o===void 0?null:o;var d=f.memoizedState.inst;$t!==null&&o!==null&&Wf(o,$t.memoizedState.deps)?f.memoizedState=Qa(i,d,a,o):(Ct.flags|=e,f.memoizedState=Qa(1|i,d,a,o))}function D_(e,i){Rc(8390656,8,e,i)}function ad(e,i){wc(2048,8,e,i)}function TA(e){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=Ac(),Ct.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function M_(e){var i=Ee().memoizedState;return TA({ref:i,nextImpl:e}),function(){if((Gt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function O_(e,i){return wc(4,2,e,i)}function V_(e,i){return wc(4,4,e,i)}function x_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function L_(e,i,a){a=a!=null?a.concat([e]):null,wc(4,4,x_.bind(null,i,e),a)}function ld(){}function P_(e,i){var a=Ee();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Wf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function U_(e,i){var a=Ee();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Wf(i,o[1]))return o[0];if(o=e(),Gr){Un(!0);try{e()}finally{Un(!1)}}return a.memoizedState=[o,i],o}function od(e,i,a){return a===void 0||(is&1073741824)!==0&&(Dt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=ky(),Ct.lanes|=e,Gs|=e,a)}function k_(e,i,a,o){return In(a,i)?a:ja.current!==null?(e=od(e,a,o),In(e,i)||(Ne=!0),e):(is&42)===0||(is&1073741824)!==0&&(Dt&261930)===0?(Ne=!0,e.memoizedState=a):(e=ky(),Ct.lanes|=e,Gs|=e,i)}function z_(e,i,a,o,f){var d=et.p;et.p=d!==0&&8>d?d:8;var y=G.T,S={};G.T=S,hd(e,!1,i,a);try{var I=f(),z=G.S;if(z!==null&&z(S,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var j=pA(I,o);Eo(e,i,j,xn(e))}else Eo(e,i,o,xn(e))}catch(Y){Eo(e,i,{then:function(){},status:"rejected",reason:Y},xn())}finally{et.p=d,y!==null&&S.types!==null&&(y.types=S.types),G.T=y}}function SA(){}function ud(e,i,a,o){if(e.tag!==5)throw Error(s(476));var f=B_(e).queue;z_(e,f,i,dt,a===null?SA:function(){return q_(e),a(o)})}function B_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function q_(e){var i=B_(e);i.next===null&&(i=e.alternate.memoizedState),Eo(e,i.next.queue,{},xn())}function cd(){return Ze(Uo)}function F_(){return Ee().memoizedState}function j_(){return Ee().memoizedState}function AA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();e=zs(a);var o=Bs(i,e,a);o!==null&&(An(o,i,a),go(o,i,a)),i={cache:zf()},e.payload=i;return}i=i.return}}function CA(e,i,a){var o=xn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ic(e)?G_(i,a):(a=If(e,i,a,o),a!==null&&(An(a,e,o),Q_(a,i,o)))}function H_(e,i,a){var o=xn();Eo(e,i,a,o)}function Eo(e,i,a,o){var f={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ic(e))G_(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,S=d(y,a);if(f.hasEagerState=!0,f.eagerState=S,In(S,y))return oc(e,i,f,0),ie===null&&lc(),!1}catch{}if(a=If(e,i,f,o),a!==null)return An(a,e,o),Q_(a,i,o),!0}return!1}function hd(e,i,a,o){if(o={lane:2,revertLane:jd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ic(e)){if(i)throw Error(s(479))}else i=If(e,a,o,2),i!==null&&An(i,e,2)}function Ic(e){var i=e.alternate;return e===Ct||i!==null&&i===Ct}function G_(e,i){Ha=Tc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Q_(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ql(e,a)}}var To={readContext:Ze,use:Cc,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};To.useEffectEvent=ge;var Y_={readContext:Ze,use:Cc,useCallback:function(e,i){return gn().memoizedState=[e,i===void 0?null:i],e},useContext:Ze,useEffect:D_,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Rc(4194308,4,x_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Rc(4194308,4,e,i)},useInsertionEffect:function(e,i){Rc(4,2,e,i)},useMemo:function(e,i){var a=gn();i=i===void 0?null:i;var o=e();if(Gr){Un(!0);try{e()}finally{Un(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=gn();if(a!==void 0){var f=a(i);if(Gr){Un(!0);try{a(i)}finally{Un(!1)}}}else f=i;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=CA.bind(null,Ct,e),[o.memoizedState,e]},useRef:function(e){var i=gn();return e={current:e},i.memoizedState=e},useState:function(e){e=sd(e);var i=e.queue,a=H_.bind(null,Ct,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:ld,useDeferredValue:function(e,i){var a=gn();return od(a,e,i)},useTransition:function(){var e=sd(!1);return e=z_.bind(null,Ct,e.queue,!0,!1),gn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Ct,f=gn();if(xt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ie===null)throw Error(s(349));(Dt&127)!==0||m_(o,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,D_(p_.bind(null,o,d,e),[e]),o.flags|=2048,Qa(9,{destroy:void 0},g_.bind(null,o,d,a,i),null),a},useId:function(){var e=gn(),i=ie.identifierPrefix;if(xt){var a=ki,o=Ui;a=(o&~(1<<32-_e(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Sc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=_A++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:cd,useFormState:b_,useActionState:b_,useOptimistic:function(e){var i=gn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=hd.bind(null,Ct,!0,a),a.dispatch=i,[e,i]},useMemoCache:ed,useCacheRefresh:function(){return gn().memoizedState=AA.bind(null,Ct)},useEffectEvent:function(e){var i=gn(),a={impl:e};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},fd={readContext:Ze,use:Cc,useCallback:P_,useContext:Ze,useEffect:ad,useImperativeHandle:L_,useInsertionEffect:O_,useLayoutEffect:V_,useMemo:U_,useReducer:bc,useRef:N_,useState:function(){return bc(ss)},useDebugValue:ld,useDeferredValue:function(e,i){var a=Ee();return k_(a,$t.memoizedState,e,i)},useTransition:function(){var e=bc(ss)[0],i=Ee().memoizedState;return[typeof e=="boolean"?e:vo(e),i]},useSyncExternalStore:d_,useId:F_,useHostTransitionStatus:cd,useFormState:R_,useActionState:R_,useOptimistic:function(e,i){var a=Ee();return v_(a,$t,e,i)},useMemoCache:ed,useCacheRefresh:j_};fd.useEffectEvent=M_;var K_={readContext:Ze,use:Cc,useCallback:P_,useContext:Ze,useEffect:ad,useImperativeHandle:L_,useInsertionEffect:O_,useLayoutEffect:V_,useMemo:U_,useReducer:id,useRef:N_,useState:function(){return id(ss)},useDebugValue:ld,useDeferredValue:function(e,i){var a=Ee();return $t===null?od(a,e,i):k_(a,$t.memoizedState,e,i)},useTransition:function(){var e=id(ss)[0],i=Ee().memoizedState;return[typeof e=="boolean"?e:vo(e),i]},useSyncExternalStore:d_,useId:F_,useHostTransitionStatus:cd,useFormState:I_,useActionState:I_,useOptimistic:function(e,i){var a=Ee();return $t!==null?v_(a,$t,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ed,useCacheRefresh:j_};K_.useEffectEvent=M_;function dd(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var md={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=xn(),f=zs(o);f.payload=i,a!=null&&(f.callback=a),i=Bs(e,f,o),i!==null&&(An(i,e,o),go(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=xn(),f=zs(o);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Bs(e,f,o),i!==null&&(An(i,e,o),go(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=xn(),o=zs(a);o.tag=2,i!=null&&(o.callback=i),i=Bs(e,o,a),i!==null&&(An(i,e,a),go(i,e,a))}};function X_(e,i,a,o,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,y):i.prototype&&i.prototype.isPureReactComponent?!ao(a,o)||!ao(f,d):!0}function W_(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&md.enqueueReplaceState(i,i.state,null)}function Qr(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Z_(e){ac(e)}function J_(e){console.error(e)}function $_(e){ac(e)}function Nc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ty(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gd(e,i,a){return a=zs(a),a.tag=3,a.payload={element:null},a.callback=function(){Nc(e,i)},a}function ey(e){return e=zs(e),e.tag=3,e}function ny(e,i,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=o.value;e.payload=function(){return f(d)},e.callback=function(){ty(i,a,o)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){ty(i,a,o),typeof f!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function bA(e,i,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&ka(i,a,f,!0),a=Dn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?qc():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===pc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Bd(e,o,f)),!1;case 22:return a.flags|=65536,o===pc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Bd(e,o,f)),!1}throw Error(s(435,a.tag))}return Bd(e,o,f),qc(),!1}if(xt)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,o!==xf&&(e=Error(s(422),{cause:o}),uo(jn(e,a)))):(o!==xf&&(i=Error(s(423),{cause:o}),uo(jn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=jn(o,a),f=gd(e.stateNode,o,f),Gf(e,f),pe!==4&&(pe=2)),!1;var d=Error(s(520),{cause:o});if(d=jn(d,a),No===null?No=[d]:No.push(d),pe!==4&&(pe=2),i===null)return!0;o=jn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=gd(a.stateNode,o,e),Gf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Qs===null||!Qs.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ey(f),ny(f,e,a,o),Gf(a,f),!1}a=a.return}while(a!==null);return!1}var pd=Error(s(461)),Ne=!1;function Je(e,i,a,o){i.child=e===null?a_(i,null,a,o):Hr(i,e.child,a,o)}function iy(e,i,a,o,f){a=a.render;var d=i.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return Br(i),o=Zf(e,i,a,y,d,f),S=Jf(),e!==null&&!Ne?($f(e,i,f),rs(e,i,f)):(xt&&S&&Of(i),i.flags|=1,Je(e,i,o,f),i.child)}function sy(e,i,a,o,f){if(e===null){var d=a.type;return typeof d=="function"&&!Nf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ry(e,i,d,o,f)):(e=cc(a.type,null,o,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Cd(e,f)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:ao,a(y,o)&&e.ref===i.ref)return rs(e,i,f)}return i.flags|=1,e=$i(d,o),e.ref=i.ref,e.return=i,i.child=e}function ry(e,i,a,o,f){if(e!==null){var d=e.memoizedProps;if(ao(d,o)&&e.ref===i.ref)if(Ne=!1,i.pendingProps=o=d,Cd(e,f))(e.flags&131072)!==0&&(Ne=!0);else return i.lanes=e.lanes,rs(e,i,f)}return _d(e,i,a,o,f)}function ay(e,i,a,o){var f=o.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(o=i.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~d}else o=0,i.child=null;return ly(e,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&mc(i,d!==null?d.cachePool:null),d!==null?u_(i,d):Yf(),c_(i);else return o=i.lanes=536870912,ly(e,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(mc(i,d.cachePool),u_(i,d),Fs(),i.memoizedState=null):(e!==null&&mc(i,null),Yf(),Fs());return Je(e,i,f,a),i.child}function So(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ly(e,i,a,o,f){var d=qf();return d=d===null?null:{parent:we._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&mc(i,null),Yf(),c_(i),e!==null&&ka(e,i,o,!0),i.childLanes=f,null}function Dc(e,i){return i=Oc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function oy(e,i,a){return Hr(i,e.child,null,a),e=Dc(i,i.pendingProps),e.flags|=2,Mn(i),i.memoizedState=null,e}function RA(e,i,a){var o=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(xt){if(o.mode==="hidden")return e=Dc(i,o),i.lanes=536870912,So(null,e);if(Xf(i),(e=se)?(e=Ev(e,Qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:xs!==null?{id:Ui,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=Gp(e),a.return=i,i.child=a,We=i,se=null)):e=null,e===null)throw Ps(i);return i.lanes=536870912,null}return Dc(i,o)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(Xf(i),f)if(i.flags&256)i.flags&=-257,i=oy(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ne||ka(e,i,a,!1),f=(a&e.childLanes)!==0,Ne||f){if(o=ie,o!==null&&(y=Fl(o,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,Pr(e,y),An(o,e,y),pd;qc(),i=oy(e,i,a)}else e=d.treeContext,se=Kn(y.nextSibling),We=i,xt=!0,Ls=null,Qn=!1,e!==null&&Kp(i,e),i=Dc(i,o),i.flags|=4096;return i}return e=$i(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Mc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function _d(e,i,a,o,f){return Br(i),a=Zf(e,i,a,o,void 0,f),o=Jf(),e!==null&&!Ne?($f(e,i,f),rs(e,i,f)):(xt&&o&&Of(i),i.flags|=1,Je(e,i,a,f),i.child)}function uy(e,i,a,o,f,d){return Br(i),i.updateQueue=null,a=f_(i,o,a,f),h_(e),o=Jf(),e!==null&&!Ne?($f(e,i,d),rs(e,i,d)):(xt&&o&&Of(i),i.flags|=1,Je(e,i,a,d),i.child)}function cy(e,i,a,o,f){if(Br(i),i.stateNode===null){var d=xa,y=a.contextType;typeof y=="object"&&y!==null&&(d=Ze(y)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=md,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},jf(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?Ze(y):xa,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(dd(i,a,y,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&md.enqueueReplaceState(d,d.state,null),_o(i,o,d,f),po(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var S=i.memoizedProps,I=Qr(a,S);d.props=I;var z=d.context,j=a.contextType;y=xa,typeof j=="object"&&j!==null&&(y=Ze(j));var Y=a.getDerivedStateFromProps;j=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,j||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||z!==y)&&W_(i,d,o,y),ks=!1;var B=i.memoizedState;d.state=B,_o(i,o,d,f),po(),z=i.memoizedState,S||B!==z||ks?(typeof Y=="function"&&(dd(i,a,Y,o),z=i.memoizedState),(I=ks||X_(i,a,I,o,B,z,y))?(j||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),d.props=o,d.state=z,d.context=y,o=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Hf(e,i),y=i.memoizedProps,j=Qr(a,y),d.props=j,Y=i.pendingProps,B=d.context,z=a.contextType,I=xa,typeof z=="object"&&z!==null&&(I=Ze(z)),S=a.getDerivedStateFromProps,(z=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Y||B!==I)&&W_(i,d,o,I),ks=!1,B=i.memoizedState,d.state=B,_o(i,o,d,f),po();var F=i.memoizedState;y!==Y||B!==F||ks||e!==null&&e.dependencies!==null&&fc(e.dependencies)?(typeof S=="function"&&(dd(i,a,S,o),F=i.memoizedState),(j=ks||X_(i,a,j,o,B,F,I)||e!==null&&e.dependencies!==null&&fc(e.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=F),d.props=o,d.state=F,d.context=I,o=j):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&B===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Mc(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Hr(i,e.child,null,f),i.child=Hr(i,null,a,f)):Je(e,i,a,f),i.memoizedState=d.state,e=i.child):e=rs(e,i,f),e}function hy(e,i,a,o){return kr(),i.flags|=256,Je(e,i,a,o),i.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(e){return{baseLanes:e,cachePool:t_()}}function Ed(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Vn),e}function fy(e,i,a){var o=i.pendingProps,f=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(ve.current&2)!==0),y&&(f=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,e===null){if(xt){if(f?qs(i):Fs(),(e=se)?(e=Ev(e,Qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:xs!==null?{id:Ui,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=Gp(e),a.return=i,i.child=a,We=i,se=null)):e=null,e===null)throw Ps(i);return nm(e)?i.lanes=32:i.lanes=536870912,null}var S=o.children;return o=o.fallback,f?(Fs(),f=i.mode,S=Oc({mode:"hidden",children:S},f),o=Ur(o,f,a,null),S.return=i,o.return=i,S.sibling=o,i.child=S,o=i.child,o.memoizedState=vd(a),o.childLanes=Ed(e,y,a),i.memoizedState=yd,So(null,o)):(qs(i),Td(i,S))}var I=e.memoizedState;if(I!==null&&(S=I.dehydrated,S!==null)){if(d)i.flags&256?(qs(i),i.flags&=-257,i=Sd(e,i,a)):i.memoizedState!==null?(Fs(),i.child=e.child,i.flags|=128,i=null):(Fs(),S=o.fallback,f=i.mode,o=Oc({mode:"visible",children:o.children},f),S=Ur(S,f,a,null),S.flags|=2,o.return=i,S.return=i,o.sibling=S,i.child=o,Hr(i,e.child,null,a),o=i.child,o.memoizedState=vd(a),o.childLanes=Ed(e,y,a),i.memoizedState=yd,i=So(null,o));else if(qs(i),nm(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var z=y.dgst;y=z,o=Error(s(419)),o.stack="",o.digest=y,uo({value:o,source:null,stack:null}),i=Sd(e,i,a)}else if(Ne||ka(e,i,a,!1),y=(a&e.childLanes)!==0,Ne||y){if(y=ie,y!==null&&(o=Fl(y,a),o!==0&&o!==I.retryLane))throw I.retryLane=o,Pr(e,o),An(y,e,o),pd;em(S)||qc(),i=Sd(e,i,a)}else em(S)?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,se=Kn(S.nextSibling),We=i,xt=!0,Ls=null,Qn=!1,e!==null&&Kp(i,e),i=Td(i,o.children),i.flags|=4096);return i}return f?(Fs(),S=o.fallback,f=i.mode,I=e.child,z=I.sibling,o=$i(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,z!==null?S=$i(z,S):(S=Ur(S,f,a,null),S.flags|=2),S.return=i,o.return=i,o.sibling=S,i.child=o,So(null,o),o=i.child,S=e.child.memoizedState,S===null?S=vd(a):(f=S.cachePool,f!==null?(I=we._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=t_(),S={baseLanes:S.baseLanes|a,cachePool:f}),o.memoizedState=S,o.childLanes=Ed(e,y,a),i.memoizedState=yd,So(e.child,o)):(qs(i),a=e.child,e=a.sibling,a=$i(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(y=i.deletions,y===null?(i.deletions=[e],i.flags|=16):y.push(e)),i.child=a,i.memoizedState=null,a)}function Td(e,i){return i=Oc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Oc(e,i){return e=Nn(22,e,null,i),e.lanes=0,e}function Sd(e,i,a){return Hr(i,e.child,null,a),e=Td(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function dy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Uf(e.return,i,a)}function Ad(e,i,a,o,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=a,y.tailMode=f,y.treeForkCount=d)}function my(e,i,a){var o=i.pendingProps,f=o.revealOrder,d=o.tail;o=o.children;var y=ve.current,S=(y&2)!==0;if(S?(y=y&1|2,i.flags|=128):y&=1,nt(ve,y),Je(e,i,o,a),o=xt?oo:0,!S&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dy(e,a,i);else if(e.tag===19)dy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Ec(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Ad(i,!1,f,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Ec(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Ad(i,!0,a,null,d,o);break;case"together":Ad(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function rs(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Gs|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(ka(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=$i(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=$i(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Cd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&fc(e)))}function wA(e,i,a){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),Us(i,we,e.memoizedState.cache),kr();break;case 27:case 5:yr(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:Us(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(qs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fy(e,i,a):(qs(i),e=rs(e,i,a),e!==null?e.sibling:null);qs(i);break;case 19:var f=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(ka(e,i,a,!1),o=(a&i.childLanes)!==0),f){if(o)return my(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),nt(ve,ve.current),o)break;return null;case 22:return i.lanes=0,ay(e,i,a,i.pendingProps);case 24:Us(i,we,e.memoizedState.cache)}return rs(e,i,a)}function gy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ne=!0;else{if(!Cd(e,a)&&(i.flags&128)===0)return Ne=!1,wA(e,i,a);Ne=(e.flags&131072)!==0}else Ne=!1,xt&&(i.flags&1048576)!==0&&Yp(i,oo,i.index);switch(i.lanes=0,i.tag){case 16:t:{var o=i.pendingProps;if(e=Fr(i.elementType),i.type=e,typeof e=="function")Nf(e)?(o=Qr(e,o),i.tag=1,i=cy(null,i,e,o,a)):(i.tag=0,i=_d(null,i,e,o,a));else{if(e!=null){var f=e.$$typeof;if(f===_t){i.tag=11,i=iy(null,i,e,o,a);break t}else if(f===R){i.tag=14,i=sy(null,i,e,o,a);break t}}throw i=ce(e)||e,Error(s(306,i,""))}}return i;case 0:return _d(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,f=Qr(o,i.pendingProps),cy(e,i,o,f,a);case 3:t:{if(Le(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;f=d.element,Hf(e,i),_o(i,o,null,a);var y=i.memoizedState;if(o=y.cache,Us(i,we,o),o!==d.cache&&kf(i,[we],a,!0),po(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=hy(e,i,o,a);break t}else if(o!==f){f=jn(Error(s(424)),i),uo(f),i=hy(e,i,o,a);break t}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,se=Kn(e.firstChild),We=i,xt=!0,Ls=null,Qn=!0,a=a_(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(kr(),o===f){i=rs(e,i,a);break t}Je(e,i,o,a)}i=i.child}return i;case 26:return Mc(e,i),e===null?(a=Rv(i.type,null,i.pendingProps,null))?i.memoizedState=a:xt||(a=i.type,e=i.pendingProps,o=Kc(bt.current).createElement(a),o[Ce]=i,o[qe]=e,$e(o,a,e),be(o),i.stateNode=o):i.memoizedState=Rv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return yr(i),e===null&&xt&&(o=i.stateNode=Av(i.type,i.pendingProps,bt.current),We=i,Qn=!0,f=se,Ws(i.type)?(im=f,se=Kn(o.firstChild)):se=f),Je(e,i,i.pendingProps.children,a),Mc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&xt&&((f=o=se)&&(o=iC(o,i.type,i.pendingProps,Qn),o!==null?(i.stateNode=o,We=i,se=Kn(o.firstChild),Qn=!1,f=!0):f=!1),f||Ps(i)),yr(i),f=i.type,d=i.pendingProps,y=e!==null?e.memoizedProps:null,o=d.children,Jd(f,d)?o=null:y!==null&&Jd(f,y)&&(i.flags|=32),i.memoizedState!==null&&(f=Zf(e,i,yA,null,null,a),Uo._currentValue=f),Mc(e,i),Je(e,i,o,a),i.child;case 6:return e===null&&xt&&((e=a=se)&&(a=sC(a,i.pendingProps,Qn),a!==null?(i.stateNode=a,We=i,se=null,e=!0):e=!1),e||Ps(i)),null;case 13:return fy(e,i,a);case 4:return Le(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Hr(i,null,o,a):Je(e,i,o,a),i.child;case 11:return iy(e,i,i.type,i.pendingProps,a);case 7:return Je(e,i,i.pendingProps,a),i.child;case 8:return Je(e,i,i.pendingProps.children,a),i.child;case 12:return Je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Us(i,i.type,o.value),Je(e,i,o.children,a),i.child;case 9:return f=i.type._context,o=i.pendingProps.children,Br(i),f=Ze(f),o=o(f),i.flags|=1,Je(e,i,o,a),i.child;case 14:return sy(e,i,i.type,i.pendingProps,a);case 15:return ry(e,i,i.type,i.pendingProps,a);case 19:return my(e,i,a);case 31:return RA(e,i,a);case 22:return ay(e,i,a,i.pendingProps);case 24:return Br(i),o=Ze(we),e===null?(f=qf(),f===null&&(f=ie,d=zf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:o,cache:f},jf(i),Us(i,we,f)):((e.lanes&a)!==0&&(Hf(e,i),_o(i,null,null,a),po()),f=e.memoizedState,d=i.memoizedState,f.parent!==o?(f={parent:o,cache:o},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Us(i,we,o)):(o=d.cache,Us(i,we,o),o!==f.cache&&kf(i,[we],a,!0))),Je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function as(e){e.flags|=4}function bd(e,i,a,o,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Fy())e.flags|=8192;else throw jr=pc,Ff}else e.flags&=-16777217}function py(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mv(i))if(Fy())e.flags|=8192;else throw jr=pc,Ff}function Vc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?zu():536870912,e.lanes|=i,Wa|=i)}function Ao(e,i){if(!xt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function IA(e,i,a){var o=i.pendingProps;switch(Vf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ns(we),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ua(i)?as(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Lf())),re(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(as(i),d!==null?(re(i),py(i,d)):(re(i),bd(i,f,null,o,a))):d?d!==e.memoizedState?(as(i),re(i),py(i,d)):(re(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&as(i),re(i),bd(i,f,e,o,a)),null;case 27:if(ga(i),a=bt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&as(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=rt.current,Ua(i)?Xp(i):(e=Av(f,o,a),i.stateNode=e,as(i))}return re(i),null;case 5:if(ga(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&as(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(d=rt.current,Ua(i))Xp(i);else{var y=Kc(bt.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(f,{is:o.is}):y.createElement(f)}}d[Ce]=i,d[qe]=o;t:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break t;for(;y.sibling===null;){if(y.return===null||y.return===i)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;t:switch($e(d,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&as(i)}}return re(i),bd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&as(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=bt.current,Ua(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,f=We,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||fv(e.nodeValue,a)),e||Ps(i,!0)}else e=Kc(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return re(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(o=Ua(i),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ce]=i}else kr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),e=!1}else a=Lf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Mn(i),i):(Mn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ua(i),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ce]=i}else kr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),f=!1}else f=Lf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Mn(i),i):(Mn(i),null)}return Mn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=i.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==f&&(o.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Vc(i,i.updateQueue),re(i),null);case 4:return he(),e===null&&Yd(i.stateNode.containerInfo),re(i),null;case 10:return ns(i.type),re(i),null;case 19:if(K(ve),o=i.memoizedState,o===null)return re(i),null;if(f=(i.flags&128)!==0,d=o.rendering,d===null)if(f)Ao(o,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Ec(e),d!==null){for(i.flags|=128,Ao(o,!1),e=d.updateQueue,i.updateQueue=e,Vc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Hp(a,e),a=a.sibling;return nt(ve,ve.current&1|2),xt&&ts(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&dn()>kc&&(i.flags|=128,f=!0,Ao(o,!1),i.lanes=4194304)}else{if(!f)if(e=Ec(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Vc(i,e),Ao(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!xt)return re(i),null}else 2*dn()-o.renderingStartTime>kc&&a!==536870912&&(i.flags|=128,f=!0,Ao(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(e=o.last,e!==null?e.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dn(),e.sibling=null,a=ve.current,nt(ve,f?a&1|2:a&1),xt&&ts(i,o.treeForkCount),e):(re(i),null);case 22:case 23:return Mn(i),Kf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&Vc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&K(qr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ns(we),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function NA(e,i){switch(Vf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ns(we),he(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return ga(i),null;case 31:if(i.memoizedState!==null){if(Mn(i),i.alternate===null)throw Error(s(340));kr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Mn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));kr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return K(ve),null;case 4:return he(),null;case 10:return ns(i.type),null;case 22:case 23:return Mn(i),Kf(),e!==null&&K(qr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ns(we),null;case 25:return null;default:return null}}function _y(e,i){switch(Vf(i),i.tag){case 3:ns(we),he();break;case 26:case 27:case 5:ga(i);break;case 4:he();break;case 31:i.memoizedState!==null&&Mn(i);break;case 13:Mn(i);break;case 19:K(ve);break;case 10:ns(i.type);break;case 22:case 23:Mn(i),Kf(),e!==null&&K(qr);break;case 24:ns(we)}}function Co(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&e)===e){o=void 0;var d=a.create,y=a.inst;o=d(),y.destroy=o}a=a.next}while(a!==f)}}catch(S){Zt(i,i.return,S)}}function js(e,i,a){try{var o=i.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var d=f.next;o=d;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,f=i;var I=a,z=S;try{z()}catch(j){Zt(f,I,j)}}}o=o.next}while(o!==d)}}catch(j){Zt(i,i.return,j)}}function yy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{o_(i,a)}catch(o){Zt(e,e.return,o)}}}function vy(e,i,a){a.props=Qr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(e,i,o)}}function bo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(f){Zt(e,i,f)}}function zi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){Zt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Zt(e,i,f)}else a.current=null}function Ey(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){Zt(e,e.return,f)}}function Rd(e,i,a){try{var o=e.stateNode;ZA(o,e.type,a,i),o[qe]=i}catch(f){Zt(e,e.return,f)}}function Ty(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ws(e.type)||e.tag===4}function wd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ty(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ws(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Id(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=si));else if(o!==4&&(o===27&&Ws(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Id(e,i,a),e=e.sibling;e!==null;)Id(e,i,a),e=e.sibling}function xc(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ws(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(xc(e,i,a),e=e.sibling;e!==null;)xc(e,i,a),e=e.sibling}function Sy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);$e(i,o,a),i[Ce]=e,i[qe]=a}catch(d){Zt(e,e.return,d)}}var ls=!1,De=!1,Nd=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,je=null;function DA(e,i){if(e=e.containerInfo,Wd=eh,e=Lp(e),Sf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var y=0,S=-1,I=-1,z=0,j=0,Y=e,B=null;e:for(;;){for(var F;Y!==a||f!==0&&Y.nodeType!==3||(S=y+f),Y!==d||o!==0&&Y.nodeType!==3||(I=y+o),Y.nodeType===3&&(y+=Y.nodeValue.length),(F=Y.firstChild)!==null;)B=Y,Y=F;for(;;){if(Y===e)break e;if(B===a&&++z===f&&(S=y),B===d&&++j===o&&(I=y),(F=Y.nextSibling)!==null)break;Y=B,B=Y.parentNode}Y=F}a=S===-1||I===-1?null:{start:S,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:e,selectionRange:a},eh=!1,je=i;je!==null;)if(i=je,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,je=e;else for(;je!==null;){switch(i=je,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var lt=Qr(a.type,f);e=o.getSnapshotBeforeUpdate(lt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Zt(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)tm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,je=e;break}je=i.return}}function Cy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:us(e,a),o&4&&Co(5,a);break;case 1:if(us(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(y){Zt(a,a.return,y)}else{var f=Qr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Zt(a,a.return,y)}}o&64&&yy(a),o&512&&bo(a,a.return);break;case 3:if(us(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{o_(e,i)}catch(y){Zt(a,a.return,y)}}break;case 27:i===null&&o&4&&Sy(a);case 26:case 5:us(e,a),i===null&&o&4&&Ey(a),o&512&&bo(a,a.return);break;case 12:us(e,a);break;case 31:us(e,a),o&4&&wy(e,a);break;case 13:us(e,a),o&4&&Iy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=zA.bind(null,a),rC(e,a))));break;case 22:if(o=a.memoizedState!==null||ls,!o){i=i!==null&&i.memoizedState!==null||De,f=ls;var d=De;ls=o,(De=i)&&!d?cs(e,a,(a.subtreeFlags&8772)!==0):us(e,a),ls=f,De=d}break;case 30:break;default:us(e,a)}}function by(e){var i=e.alternate;i!==null&&(e.alternate=null,by(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ea(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var de=null,vn=!1;function os(e,i,a){for(a=a.child;a!==null;)Ry(e,i,a),a=a.sibling}function Ry(e,i,a){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ti,a)}catch{}switch(a.tag){case 26:De||zi(a,i),os(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:De||zi(a,i);var o=de,f=vn;Ws(a.type)&&(de=a.stateNode,vn=!1),os(e,i,a),xo(a.stateNode),de=o,vn=f;break;case 5:De||zi(a,i);case 6:if(o=de,f=vn,de=null,os(e,i,a),de=o,vn=f,de!==null)if(vn)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{de.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:de!==null&&(vn?(e=de,yv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sl(e)):yv(de,a.stateNode));break;case 4:o=de,f=vn,de=a.stateNode.containerInfo,vn=!0,os(e,i,a),de=o,vn=f;break;case 0:case 11:case 14:case 15:js(2,a,i),De||js(4,a,i),os(e,i,a);break;case 1:De||(zi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&vy(a,i,o)),os(e,i,a);break;case 21:os(e,i,a);break;case 22:De=(o=De)||a.memoizedState!==null,os(e,i,a),De=o;break;default:os(e,i,a)}}function wy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sl(e)}catch(a){Zt(i,i.return,a)}}}function Iy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sl(e)}catch(a){Zt(i,i.return,a)}}function MA(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ay),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ay),i;default:throw Error(s(435,e.tag))}}function Lc(e,i){var a=MA(e);i.forEach(function(o){if(!a.has(o)){a.add(o);var f=BA.bind(null,e,o);o.then(f,f)}})}function En(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],d=e,y=i,S=y;t:for(;S!==null;){switch(S.tag){case 27:if(Ws(S.type)){de=S.stateNode,vn=!1;break t}break;case 5:de=S.stateNode,vn=!1;break t;case 3:case 4:de=S.stateNode.containerInfo,vn=!0;break t}S=S.return}if(de===null)throw Error(s(160));Ry(d,y,f),de=null,vn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ny(i,e),i=i.sibling}var ci=null;function Ny(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:En(i,e),Tn(e),o&4&&(js(3,e,e.return),Co(3,e),js(5,e,e.return));break;case 1:En(i,e),Tn(e),o&512&&(De||a===null||zi(a,a.return)),o&64&&ls&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=ci;if(En(i,e),Tn(e),o&512&&(De||a===null||zi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":d=f.getElementsByTagName("title")[0],(!d||d[bi]||d[Ce]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(o),f.head.insertBefore(d,f.querySelector("head > title"))),$e(d,o,a),d[Ce]=e,be(d),o=d;break t;case"link":var y=Nv("link","href",f).get(o+(a.href||""));if(y){for(var S=0;S<y.length;S++)if(d=y[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(S,1);break e}}d=f.createElement(o),$e(d,o,a),f.head.appendChild(d);break;case"meta":if(y=Nv("meta","content",f).get(o+(a.content||""))){for(S=0;S<y.length;S++)if(d=y[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(S,1);break e}}d=f.createElement(o),$e(d,o,a),f.head.appendChild(d);break;default:throw Error(s(468,o))}d[Ce]=e,be(d),o=d}e.stateNode=o}else Dv(f,e.type,e.stateNode);else e.stateNode=Iv(f,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Dv(f,e.type,e.stateNode):Iv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Rd(e,e.memoizedProps,a.memoizedProps)}break;case 27:En(i,e),Tn(e),o&512&&(De||a===null||zi(a,a.return)),a!==null&&o&4&&Rd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(En(i,e),Tn(e),o&512&&(De||a===null||zi(a,a.return)),e.flags&32){f=e.stateNode;try{yn(f,"")}catch(lt){Zt(e,e.return,lt)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,Rd(e,f,a!==null?a.memoizedProps:f)),o&1024&&(Nd=!0);break;case 6:if(En(i,e),Tn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(lt){Zt(e,e.return,lt)}}break;case 3:if(Zc=null,f=ci,ci=Xc(i.containerInfo),En(i,e),ci=f,Tn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{sl(i.containerInfo)}catch(lt){Zt(e,e.return,lt)}Nd&&(Nd=!1,Dy(e));break;case 4:o=ci,ci=Xc(e.stateNode.containerInfo),En(i,e),Tn(e),ci=o;break;case 12:En(i,e),Tn(e);break;case 31:En(i,e),Tn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lc(e,o)));break;case 13:En(i,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Uc=dn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lc(e,o)));break;case 22:f=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,z=ls,j=De;if(ls=z||f,De=j||I,En(i,e),De=j,ls=z,Tn(e),o&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||ls||De||Yr(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=I.stateNode;var Y=I.memoizedProps.style,B=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;S.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(lt){Zt(I,I.return,lt)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(lt){Zt(I,I.return,lt)}}}else if(i.tag===18){if(a===null){I=i;try{var F=I.stateNode;f?vv(F,!0):vv(I.stateNode,!1)}catch(lt){Zt(I,I.return,lt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Lc(e,a))));break;case 19:En(i,e),Tn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lc(e,o)));break;case 30:break;case 21:break;default:En(i,e),Tn(e)}}function Tn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Ty(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=wd(e);xc(e,d,f);break;case 5:var y=a.stateNode;a.flags&32&&(yn(y,""),a.flags&=-33);var S=wd(e);xc(e,S,y);break;case 3:case 4:var I=a.stateNode.containerInfo,z=wd(e);Id(e,z,I);break;default:throw Error(s(161))}}catch(j){Zt(e,e.return,j)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Dy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Dy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function us(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cy(e,i.alternate,i),i=i.sibling}function Yr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:js(4,i,i.return),Yr(i);break;case 1:zi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),Yr(i);break;case 27:xo(i.stateNode);case 26:case 5:zi(i,i.return),Yr(i);break;case 22:i.memoizedState===null&&Yr(i);break;case 30:Yr(i);break;default:Yr(i)}e=e.sibling}}function cs(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,f=e,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:cs(f,d,a),Co(4,d);break;case 1:if(cs(f,d,a),o=d,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Zt(o,o.return,z)}if(o=d,f=o.updateQueue,f!==null){var S=o.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)l_(I[f],S)}catch(z){Zt(o,o.return,z)}}a&&y&64&&yy(d),bo(d,d.return);break;case 27:Sy(d);case 26:case 5:cs(f,d,a),a&&o===null&&y&4&&Ey(d),bo(d,d.return);break;case 12:cs(f,d,a);break;case 31:cs(f,d,a),a&&y&4&&wy(f,d);break;case 13:cs(f,d,a),a&&y&4&&Iy(f,d);break;case 22:d.memoizedState===null&&cs(f,d,a),bo(d,d.return);break;case 30:break;default:cs(f,d,a)}i=i.sibling}}function Dd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&co(a))}function Md(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&co(e))}function hi(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)My(e,i,a,o),i=i.sibling}function My(e,i,a,o){var f=i.flags;switch(i.tag){case 0:case 11:case 15:hi(e,i,a,o),f&2048&&Co(9,i);break;case 1:hi(e,i,a,o);break;case 3:hi(e,i,a,o),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&co(e)));break;case 12:if(f&2048){hi(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,y=d.id,S=d.onPostCommit;typeof S=="function"&&S(y,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){Zt(i,i.return,I)}}else hi(e,i,a,o);break;case 31:hi(e,i,a,o);break;case 13:hi(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?hi(e,i,a,o):Ro(e,i):d._visibility&2?hi(e,i,a,o):(d._visibility|=2,Ya(e,i,a,o,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Dd(y,i);break;case 24:hi(e,i,a,o),f&2048&&Md(i.alternate,i);break;default:hi(e,i,a,o)}}function Ya(e,i,a,o,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,y=i,S=a,I=o,z=y.flags;switch(y.tag){case 0:case 11:case 15:Ya(d,y,S,I,f),Co(8,y);break;case 23:break;case 22:var j=y.stateNode;y.memoizedState!==null?j._visibility&2?Ya(d,y,S,I,f):Ro(d,y):(j._visibility|=2,Ya(d,y,S,I,f)),f&&z&2048&&Dd(y.alternate,y);break;case 24:Ya(d,y,S,I,f),f&&z&2048&&Md(y.alternate,y);break;default:Ya(d,y,S,I,f)}i=i.sibling}}function Ro(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,f=o.flags;switch(o.tag){case 22:Ro(a,o),f&2048&&Dd(o.alternate,o);break;case 24:Ro(a,o),f&2048&&Md(o.alternate,o);break;default:Ro(a,o)}i=i.sibling}}var wo=8192;function Ka(e,i,a){if(e.subtreeFlags&wo)for(e=e.child;e!==null;)Oy(e,i,a),e=e.sibling}function Oy(e,i,a){switch(e.tag){case 26:Ka(e,i,a),e.flags&wo&&e.memoizedState!==null&&_C(a,ci,e.memoizedState,e.memoizedProps);break;case 5:Ka(e,i,a);break;case 3:case 4:var o=ci;ci=Xc(e.stateNode.containerInfo),Ka(e,i,a),ci=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=wo,wo=16777216,Ka(e,i,a),wo=o):Ka(e,i,a));break;default:Ka(e,i,a)}}function Vy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Io(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];je=o,Ly(o,e)}Vy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xy(e),e=e.sibling}function xy(e){switch(e.tag){case 0:case 11:case 15:Io(e),e.flags&2048&&js(9,e,e.return);break;case 3:Io(e);break;case 12:Io(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Pc(e)):Io(e);break;default:Io(e)}}function Pc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];je=o,Ly(o,e)}Vy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:js(8,i,i.return),Pc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(i));break;default:Pc(i)}e=e.sibling}}function Ly(e,i){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:js(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:co(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,je=o;else t:for(a=e;je!==null;){o=je;var f=o.sibling,d=o.return;if(by(o),o===a){je=null;break t}if(f!==null){f.return=d,je=f;break t}je=d}}}var OA={getCacheForType:function(e){var i=Ze(we),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return Ze(we).controller.signal}},VA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,ie=null,It=null,Dt=0,Wt=0,On=null,Hs=!1,Xa=!1,Od=!1,hs=0,pe=0,Gs=0,Kr=0,Vd=0,Vn=0,Wa=0,No=null,Sn=null,xd=!1,Uc=0,Py=0,kc=1/0,zc=null,Qs=null,Ue=0,Ys=null,Za=null,fs=0,Ld=0,Pd=null,Uy=null,Do=0,Ud=null;function xn(){return(Gt&2)!==0&&Dt!==0?Dt&-Dt:G.T!==null?jd():Bu()}function ky(){if(Vn===0)if((Dt&536870912)===0||xt){var e=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),Vn=e}else Vn=536870912;return e=Dn.current,e!==null&&(e.flags|=32),Vn}function An(e,i,a){(e===ie&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)&&(Ja(e,0),Ks(e,Dt,Vn,!1)),Sr(e,a),((Gt&2)===0||e!==ie)&&(e===ie&&((Gt&2)===0&&(Kr|=a),pe===4&&Ks(e,Dt,Vn,!1)),Bi(e))}function zy(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&127)===0&&(i&e.expiredLanes)===0||ei(e,i),f=o?PA(e,i):zd(e,i,!0),d=o;do{if(f===0){Xa&&!o&&Ks(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!xA(a)){f=zd(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var S=e;f=No;var I=S.current.memoizedState.isDehydrated;if(I&&(Ja(S,y).flags|=256),y=zd(S,y,!1),y!==2){if(Od&&!I){S.errorRecoveryDisabledLanes|=d,Kr|=d,f=4;break t}d=Sn,Sn=f,d!==null&&(Sn===null?Sn=d:Sn.push.apply(Sn,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){Ja(e,0),Ks(e,i,0,!0);break}t:{switch(o=e,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ks(o,i,Vn,!Hs);break t;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Uc+300-dn(),10<f)){if(Ks(o,i,Vn,!Hs),Si(o,0,!0)!==0)break t;fs=i,o.timeoutHandle=pv(By.bind(null,o,a,Sn,zc,xd,i,Vn,Kr,Wa,Hs,d,"Throttled",-0,0),f);break t}By(o,a,Sn,zc,xd,i,Vn,Kr,Wa,Hs,d,null,-0,0)}}break}while(!0);Bi(e)}function By(e,i,a,o,f,d,y,S,I,z,j,Y,B,F){if(e.timeoutHandle=-1,Y=i.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},Oy(i,d,Y);var lt=(d&62914560)===d?Uc-dn():(d&4194048)===d?Py-dn():0;if(lt=yC(Y,lt),lt!==null){fs=d,e.cancelPendingCommit=lt(Ky.bind(null,e,i,d,a,o,f,y,S,I,j,Y,null,B,F)),Ks(e,d,y,!z);return}}Ky(e,i,d,a,o,f,y,S,I)}function xA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],d=f.getSnapshot;f=f.value;try{if(!In(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ks(e,i,a,o){i&=~Vd,i&=~Kr,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var f=i;0<f;){var d=31-_e(f),y=1<<d;o[d]=-1,f&=~y}a!==0&&Ar(e,a,i)}function Bc(){return(Gt&6)===0?(Mo(0),!1):!0}function kd(){if(It!==null){if(Wt===0)var e=It.return;else e=It,es=zr=null,td(e),Fa=null,fo=0,e=It;for(;e!==null;)_y(e.alternate,e),e=e.return;It=null}}function Ja(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,tC(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),fs=0,kd(),ie=e,It=a=$i(e.current,null),Dt=i,Wt=0,On=null,Hs=!1,Xa=ei(e,i),Od=!1,Wa=Vn=Vd=Kr=Gs=pe=0,Sn=No=null,xd=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var f=31-_e(o),d=1<<f;i|=e[f],o&=~d}return hs=i,lc(),a}function qy(e,i){Ct=null,G.H=To,i===qa||i===gc?(i=i_(),Wt=3):i===Ff?(i=i_(),Wt=4):Wt=i===pd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,It===null&&(pe=1,Nc(e,jn(i,e.current)))}function Fy(){var e=Dn.current;return e===null?!0:(Dt&4194048)===Dt?Yn===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?e===Yn:!1}function jy(){var e=G.H;return G.H=To,e===null?To:e}function Hy(){var e=G.A;return G.A=OA,e}function qc(){pe=4,Hs||(Dt&4194048)!==Dt&&Dn.current!==null||(Xa=!0),(Gs&134217727)===0&&(Kr&134217727)===0||ie===null||Ks(ie,Dt,Vn,!1)}function zd(e,i,a){var o=Gt;Gt|=2;var f=jy(),d=Hy();(ie!==e||Dt!==i)&&(zc=null,Ja(e,i)),i=!1;var y=pe;t:do try{if(Wt!==0&&It!==null){var S=It,I=On;switch(Wt){case 8:kd(),y=6;break t;case 3:case 2:case 9:case 6:Dn.current===null&&(i=!0);var z=Wt;if(Wt=0,On=null,$a(e,S,I,z),a&&Xa){y=0;break t}break;default:z=Wt,Wt=0,On=null,$a(e,S,I,z)}}LA(),y=pe;break}catch(j){qy(e,j)}while(!0);return i&&e.shellSuspendCounter++,es=zr=null,Gt=o,G.H=f,G.A=d,It===null&&(ie=null,Dt=0,lc()),y}function LA(){for(;It!==null;)Gy(It)}function PA(e,i){var a=Gt;Gt|=2;var o=jy(),f=Hy();ie!==e||Dt!==i?(zc=null,kc=dn()+500,Ja(e,i)):Xa=ei(e,i);t:do try{if(Wt!==0&&It!==null){i=It;var d=On;e:switch(Wt){case 1:Wt=0,On=null,$a(e,i,d,1);break;case 2:case 9:if(e_(d)){Wt=0,On=null,Qy(i);break}i=function(){Wt!==2&&Wt!==9||ie!==e||(Wt=7),Bi(e)},d.then(i,i);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:e_(d)?(Wt=0,On=null,Qy(i)):(Wt=0,On=null,$a(e,i,d,7));break;case 5:var y=null;switch(It.tag){case 26:y=It.memoizedState;case 5:case 27:var S=It;if(y?Mv(y):S.stateNode.complete){Wt=0,On=null;var I=S.sibling;if(I!==null)It=I;else{var z=S.return;z!==null?(It=z,Fc(z)):It=null}break e}}Wt=0,On=null,$a(e,i,d,5);break;case 6:Wt=0,On=null,$a(e,i,d,6);break;case 8:kd(),pe=6;break t;default:throw Error(s(462))}}UA();break}catch(j){qy(e,j)}while(!0);return es=zr=null,G.H=o,G.A=f,Gt=a,It!==null?0:(ie=null,Dt=0,lc(),pe)}function UA(){for(;It!==null&&!gf();)Gy(It)}function Gy(e){var i=gy(e.alternate,e,hs);e.memoizedProps=e.pendingProps,i===null?Fc(e):It=i}function Qy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=uy(a,i,i.pendingProps,i.type,void 0,Dt);break;case 11:i=uy(a,i,i.pendingProps,i.type.render,i.ref,Dt);break;case 5:td(i);default:_y(a,i),i=It=Hp(i,hs),i=gy(a,i,hs)}e.memoizedProps=e.pendingProps,i===null?Fc(e):It=i}function $a(e,i,a,o){es=zr=null,td(i),Fa=null,fo=0;var f=i.return;try{if(bA(e,f,i,a,Dt)){pe=1,Nc(e,jn(a,e.current)),It=null;return}}catch(d){if(f!==null)throw It=f,d;pe=1,Nc(e,jn(a,e.current)),It=null;return}i.flags&32768?(xt||o===1?e=!0:Xa||(Dt&536870912)!==0?e=!1:(Hs=e=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Yy(i,e)):Fc(i)}function Fc(e){var i=e;do{if((i.flags&32768)!==0){Yy(i,Hs);return}e=i.return;var a=IA(i.alternate,i,hs);if(a!==null){It=a;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);pe===0&&(pe=5)}function Yy(e,i){do{var a=NA(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);pe=6,It=null}function Ky(e,i,a,o,f,d,y,S,I){e.cancelPendingCommit=null;do jc();while(Ue!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=wf,yf(e,a,d,y,S,I),e===ie&&(It=ie=null,Dt=0),Za=i,Ys=e,fs=a,Ld=d,Pd=f,Uy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qA(Cs,function(){return $y(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,f=et.p,et.p=2,y=Gt,Gt|=4;try{DA(e,i,a)}finally{Gt=y,et.p=f,G.T=o}}Ue=1,Xy(),Wy(),Zy()}}function Xy(){if(Ue===1){Ue=0;var e=Ys,i=Za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=et.p;et.p=2;var f=Gt;Gt|=4;try{Ny(i,e);var d=Zd,y=Lp(e.containerInfo),S=d.focusedElem,I=d.selectionRange;if(y!==S&&S&&S.ownerDocument&&xp(S.ownerDocument.documentElement,S)){if(I!==null&&Sf(S)){var z=I.start,j=I.end;if(j===void 0&&(j=z),"selectionStart"in S)S.selectionStart=z,S.selectionEnd=Math.min(j,S.value.length);else{var Y=S.ownerDocument||document,B=Y&&Y.defaultView||window;if(B.getSelection){var F=B.getSelection(),lt=S.textContent.length,pt=Math.min(I.start,lt),ee=I.end===void 0?pt:Math.min(I.end,lt);!F.extend&&pt>ee&&(y=ee,ee=pt,pt=y);var x=Vp(S,pt),D=Vp(S,ee);if(x&&D&&(F.rangeCount!==1||F.anchorNode!==x.node||F.anchorOffset!==x.offset||F.focusNode!==D.node||F.focusOffset!==D.offset)){var k=Y.createRange();k.setStart(x.node,x.offset),F.removeAllRanges(),pt>ee?(F.addRange(k),F.extend(D.node,D.offset)):(k.setEnd(D.node,D.offset),F.addRange(k))}}}}for(Y=[],F=S;F=F.parentNode;)F.nodeType===1&&Y.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Y.length;S++){var Q=Y[S];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}eh=!!Wd,Zd=Wd=null}finally{Gt=f,et.p=o,G.T=a}}e.current=i,Ue=2}}function Wy(){if(Ue===2){Ue=0;var e=Ys,i=Za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=et.p;et.p=2;var f=Gt;Gt|=4;try{Cy(e,i.alternate,i)}finally{Gt=f,et.p=o,G.T=a}}Ue=3}}function Zy(){if(Ue===4||Ue===3){Ue=0,Vu();var e=Ys,i=Za,a=fs,o=Uy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ue=5:(Ue=0,Za=Ys=null,Jy(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Qs=null),Xi(a),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ti,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,f=et.p,et.p=2,G.T=null;try{for(var d=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];d(S.value,{componentStack:S.stack})}}finally{G.T=i,et.p=f}}(fs&3)!==0&&jc(),Bi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Ud?Do++:(Do=0,Ud=e):Do=0,Mo(0)}}function Jy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,co(i)))}function jc(){return Xy(),Wy(),Zy(),$y()}function $y(){if(Ue!==5)return!1;var e=Ys,i=Ld;Ld=0;var a=Xi(fs),o=G.T,f=et.p;try{et.p=32>a?32:a,G.T=null,a=Pd,Pd=null;var d=Ys,y=fs;if(Ue=0,Za=Ys=null,fs=0,(Gt&6)!==0)throw Error(s(331));var S=Gt;if(Gt|=4,xy(d.current),My(d,d.current,y,a),Gt=S,Mo(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ti,d)}catch{}return!0}finally{et.p=f,G.T=o,Jy(e,i)}}function tv(e,i,a){i=jn(a,i),i=gd(e.stateNode,i,2),e=Bs(e,i,2),e!==null&&(Sr(e,2),Bi(e))}function Zt(e,i,a){if(e.tag===3)tv(e,e,a);else for(;i!==null;){if(i.tag===3){tv(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qs===null||!Qs.has(o))){e=jn(a,e),a=ey(2),o=Bs(i,a,2),o!==null&&(ny(a,o,i,e),Sr(o,2),Bi(o));break}}i=i.return}}function Bd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new VA;var f=new Set;o.set(i,f)}else f=o.get(i),f===void 0&&(f=new Set,o.set(i,f));f.has(a)||(Od=!0,f.add(a),e=kA.bind(null,e,i,a),i.then(e,e))}function kA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(Dt&a)===a&&(pe===4||pe===3&&(Dt&62914560)===Dt&&300>dn()-Uc?(Gt&2)===0&&Ja(e,0):Vd|=a,Wa===Dt&&(Wa=0)),Bi(e)}function ev(e,i){i===0&&(i=zu()),e=Pr(e,i),e!==null&&(Sr(e,i),Bi(e))}function zA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),ev(e,a)}function BA(e,i){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),ev(e,a)}function qA(e,i){return Pe(e,i)}var Hc=null,tl=null,qd=!1,Gc=!1,Fd=!1,Xs=0;function Bi(e){e!==tl&&e.next===null&&(tl===null?Hc=tl=e:tl=tl.next=e),Gc=!0,qd||(qd=!0,jA())}function Mo(e,i){if(!Fd&&Gc){Fd=!0;do for(var a=!1,o=Hc;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var d=0;else{var y=o.suspendedLanes,S=o.pingedLanes;d=(1<<31-_e(42|e)+1)-1,d&=f&~(y&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,rv(o,d))}else d=Dt,d=Si(o,o===ie?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||ei(o,d)||(a=!0,rv(o,d));o=o.next}while(a);Fd=!1}}function FA(){nv()}function nv(){Gc=qd=!1;var e=0;Xs!==0&&$A()&&(e=Xs);for(var i=dn(),a=null,o=Hc;o!==null;){var f=o.next,d=iv(o,i);d===0?(o.next=null,a===null?Hc=f:a.next=f,f===null&&(tl=a)):(a=o,(e!==0||(d&3)!==0)&&(Gc=!0)),o=f}Ue!==0&&Ue!==5||Mo(e),Xs!==0&&(Xs=0)}function iv(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-_e(d),S=1<<y,I=f[y];I===-1?((S&a)===0||(S&o)!==0)&&(f[y]=_f(S,i)):I<=i&&(e.expiredLanes|=S),d&=~S}if(i=ie,a=Dt,a=Si(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&As(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ei(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&As(o),Xi(a)){case 2:case 8:a=Bl;break;case 32:a=Cs;break;case 268435456:a=xu;break;default:a=Cs}return o=sv.bind(null,e),a=Pe(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&As(o),e.callbackPriority=2,e.callbackNode=null,2}function sv(e,i){if(Ue!==0&&Ue!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(jc()&&e.callbackNode!==a)return null;var o=Dt;return o=Si(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zy(e,o,i),iv(e,dn()),e.callbackNode!=null&&e.callbackNode===a?sv.bind(null,e):null)}function rv(e,i){if(jc())return null;zy(e,i,!0)}function jA(){eC(function(){(Gt&6)!==0?Pe(zl,FA):nv()})}function jd(){if(Xs===0){var e=za;e===0&&(e=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),Xs=e}return Xs}function av(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ca(""+e)}function lv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function HA(e,i,a,o,f){if(i==="submit"&&a&&a.stateNode===f){var d=av((f[qe]||null).action),y=o.submitter;y&&(i=(i=y[qe]||null)?av(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var S=new Vi("action","action",null,o,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Xs!==0){var I=y?lv(f,y):new FormData(f);ud(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(S.preventDefault(),I=y?lv(f,y):new FormData(f),ud(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var Hd=0;Hd<Rf.length;Hd++){var Gd=Rf[Hd],GA=Gd.toLowerCase(),QA=Gd[0].toUpperCase()+Gd.slice(1);ui(GA,"on"+QA)}ui(kp,"onAnimationEnd"),ui(zp,"onAnimationIteration"),ui(Bp,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(oA,"onTransitionRun"),ui(uA,"onTransitionStart"),ui(cA,"onTransitionCancel"),ui(qp,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oo));function ov(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],f=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var y=o.length-1;0<=y;y--){var S=o[y],I=S.instance,z=S.currentTarget;if(S=S.listener,I!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=z;try{d(f)}catch(j){ac(j)}f.currentTarget=null,d=I}else for(y=0;y<o.length;y++){if(S=o[y],I=S.instance,z=S.currentTarget,S=S.listener,I!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=z;try{d(f)}catch(j){ac(j)}f.currentTarget=null,d=I}}}}function Nt(e,i){var a=i[va];a===void 0&&(a=i[va]=new Set);var o=e+"__bubble";a.has(o)||(uv(i,e,2,!1),a.add(o))}function Qd(e,i,a){var o=0;i&&(o|=4),uv(a,e,o,i)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function Yd(e){if(!e[Qc]){e[Qc]=!0,jl.forEach(function(a){a!=="selectionchange"&&(YA.has(a)||Qd(a,!1,e),Qd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Qc]||(i[Qc]=!0,Qd("selectionchange",!1,i))}}function uv(e,i,a,o){switch(kv(i)){case 2:var f=TC;break;case 8:f=SC;break;default:f=om}a=f.bind(null,i,a,e),f=void 0,!Ir||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function Kd(e,i,a,o,f){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===f)break;if(y===4)for(y=o.return;y!==null;){var I=y.tag;if((I===3||I===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;S!==null;){if(y=Ri(S),y===null)return;if(I=y.tag,I===5||I===6||I===26||I===27){o=d=y;continue t}S=S.parentNode}}o=o.return}Ds(function(){var z=d,j=zn(a),Y=[];t:{var B=Fp.get(e);if(B!==void 0){var F=Vi,lt=e;switch(e){case"keypress":if(Dr(a)===0)break t;case"keydown":case"keyup":F=ic;break;case"focusin":lt="focus",F=Or;break;case"focusout":lt="blur",F=Or;break;case"beforeblur":case"afterblur":F=Or;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=p;break;case kp:case zp:case Bp:F=Wu;break;case qp:F=A;break;case"scroll":case"scrollend":F=eo;break;case"wheel":F=q;break;case"copy":case"cut":case"paste":F=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Ji;break;case"toggle":case"beforetoggle":F=At}var pt=(i&4)!==0,ee=!pt&&(e==="scroll"||e==="scrollend"),x=pt?B!==null?B+"Capture":null:B;pt=[];for(var D=z,k;D!==null;){var Q=D;if(k=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||k===null||x===null||(Q=ri(D,x),Q!=null&&pt.push(Vo(D,Q,k))),ee)break;D=D.return}0<pt.length&&(B=new F(B,lt,null,a,j),Y.push({event:B,listeners:pt}))}}if((i&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",B&&a!==Jl&&(lt=a.relatedTarget||a.fromElement)&&(Ri(lt)||lt[Ci]))break t;if((F||B)&&(B=j.window===j?j:(B=j.ownerDocument)?B.defaultView||B.parentWindow:window,F?(lt=a.relatedTarget||a.toElement,F=z,lt=lt?Ri(lt):null,lt!==null&&(ee=u(lt),pt=lt.tag,lt!==ee||pt!==5&&pt!==27&&pt!==6)&&(lt=null)):(F=null,lt=z),F!==lt)){if(pt=no,Q="onMouseLeave",x="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Ji,Q="onPointerLeave",x="onPointerEnter",D="pointer"),ee=F==null?B:Rn(F),k=lt==null?B:Rn(lt),B=new pt(Q,D+"leave",F,a,j),B.target=ee,B.relatedTarget=k,Q=null,Ri(j)===z&&(pt=new pt(x,D+"enter",lt,a,j),pt.target=k,pt.relatedTarget=ee,Q=pt),ee=Q,F&&lt)e:{for(pt=KA,x=F,D=lt,k=0,Q=x;Q;Q=pt(Q))k++;Q=0;for(var ft=D;ft;ft=pt(ft))Q++;for(;0<k-Q;)x=pt(x),k--;for(;0<Q-k;)D=pt(D),Q--;for(;k--;){if(x===D||D!==null&&x===D.alternate){pt=x;break e}x=pt(x),D=pt(D)}pt=null}else pt=null;F!==null&&cv(Y,B,F,pt,!1),lt!==null&&ee!==null&&cv(Y,ee,lt,pt,!0)}}t:{if(B=z?Rn(z):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var Ft=wp;else if(bp(B))if(Ip)Ft=rA;else{Ft=iA;var ct=nA}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Aa(z.elementType)&&(Ft=wp):Ft=sA;if(Ft&&(Ft=Ft(e,z))){Rp(Y,Ft,a,j);break t}ct&&ct(e,B,z),e==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Xl(B,"number",B.value)}switch(ct=z?Rn(z):window,e){case"focusin":(bp(ct)||ct.contentEditable==="true")&&(Ma=ct,Af=z,lo=null);break;case"focusout":lo=Af=Ma=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Pp(Y,a,j);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":Pp(Y,a,j)}var Rt;if(Ht)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Da?Vr(e,a)&&(Mt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(Pi&&a.locale!=="ko"&&(Da||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Da&&(Rt=to()):(Oi=j,$l="value"in Oi?Oi.value:Oi.textContent,Da=!0)),ct=Yc(z,Mt),0<ct.length&&(Mt=new Li(Mt,e,null,a,j),Y.push({event:Mt,listeners:ct}),Rt?Mt.data=Rt:(Rt=Na(a),Rt!==null&&(Mt.data=Rt)))),(Rt=qn?J1(e,a):$1(e,a))&&(Mt=Yc(z,"onBeforeInput"),0<Mt.length&&(ct=new Li("onBeforeInput","beforeinput",null,a,j),Y.push({event:ct,listeners:Mt}),ct.data=Rt)),HA(Y,e,z,a,j)}ov(Y,i)})}function Vo(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Yc(e,i){for(var a=i+"Capture",o=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ri(e,a),f!=null&&o.unshift(Vo(e,f,d)),f=ri(e,i),f!=null&&o.push(Vo(e,f,d))),e.tag===3)return o;e=e.return}return[]}function KA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cv(e,i,a,o,f){for(var d=i._reactName,y=[];a!==null&&a!==o;){var S=a,I=S.alternate,z=S.stateNode;if(S=S.tag,I!==null&&I===o)break;S!==5&&S!==26&&S!==27||z===null||(I=z,f?(z=ri(a,d),z!=null&&y.unshift(Vo(a,z,I))):f||(z=ri(a,d),z!=null&&y.push(Vo(a,z,I)))),a=a.return}y.length!==0&&e.push({event:i,listeners:y})}var XA=/\r\n?/g,WA=/\u0000|\uFFFD/g;function hv(e){return(typeof e=="string"?e:""+e).replace(XA,`
`).replace(WA,"")}function fv(e,i){return i=hv(i),hv(e)===i}function te(e,i,a,o,f,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||yn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&yn(e,""+o);break;case"className":wn(e,"class",o);break;case"tabIndex":wn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(e,a,o);break;case"style":Zl(e,o,d);break;case"data":if(i!=="object"){wn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ca(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&te(e,i,"name",f.name,f,null),te(e,i,"formEncType",f.formEncType,f,null),te(e,i,"formMethod",f.formMethod,f,null),te(e,i,"formTarget",f.formTarget,f,null)):(te(e,i,"encType",f.encType,f,null),te(e,i,"method",f.method,f,null),te(e,i,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ca(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=si);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Ca(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),Ta(e,"popover",o);break;case"xlinkActuate":Re(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Re(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Re(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Re(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Re(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Re(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Re(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Re(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Re(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Yu.get(a)||a,Ta(e,a,o))}}function Xd(e,i,a,o,f,d){switch(a){case"style":Zl(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?yn(e,o):(typeof o=="number"||typeof o=="bigint")&&yn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,f);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ta(e,a,o)}}}function $e(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,d,y,a,null)}}f&&te(e,i,"srcSet",a.srcSet,a,null),o&&te(e,i,"src",a.src,a,null);return;case"input":Nt("invalid",e);var S=d=y=f=null,I=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var j=a[o];if(j!=null)switch(o){case"name":f=j;break;case"type":y=j;break;case"checked":I=j;break;case"defaultChecked":z=j;break;case"value":d=j;break;case"defaultValue":S=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:te(e,i,o,j,a,null)}}Hu(e,d,S,I,z,y,f,!1);return;case"select":Nt("invalid",e),o=y=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:te(e,i,f,S,a,null)}i=d,a=y,e.multiple=!!o,i!=null?Rs(e,!!o,i,!1):a!=null&&Rs(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),d=f=o=null;for(y in a)if(a.hasOwnProperty(y)&&(S=a[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:te(e,i,y,S,a,null)}ws(e,o,f,d);return;case"option":for(I in a)a.hasOwnProperty(I)&&(o=a[I],o!=null)&&(I==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":te(e,i,I,o,a,null));return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<Oo.length;o++)Nt(Oo[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:te(e,i,z,o,a,null)}return;default:if(Aa(i)){for(j in a)a.hasOwnProperty(j)&&(o=a[j],o!==void 0&&Xd(e,i,j,o,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(o=a[S],o!=null&&te(e,i,S,o,a,null))}function ZA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,S=null,I=null,z=null,j=null;for(F in a){var Y=a[F];if(a.hasOwnProperty(F)&&Y!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=Y;default:o.hasOwnProperty(F)||te(e,i,F,null,o,Y)}}for(var B in o){var F=o[B];if(Y=a[B],o.hasOwnProperty(B)&&(F!=null||Y!=null))switch(B){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":j=F;break;case"value":y=F;break;case"defaultValue":S=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==Y&&te(e,i,B,F,o,Y)}}Sa(e,y,S,I,z,j,d,f);return;case"select":F=y=S=B=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":F=I;default:o.hasOwnProperty(d)||te(e,i,d,null,o,I)}for(f in o)if(d=o[f],I=a[f],o.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":B=d;break;case"defaultValue":S=d;break;case"multiple":y=d;default:d!==I&&te(e,i,f,d,o,I)}i=S,a=y,o=F,B!=null?Rs(e,!!a,B,!1):!!o!=!!a&&(i!=null?Rs(e,!!a,i,!0):Rs(e,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:te(e,i,S,null,o,f)}for(y in o)if(f=o[y],d=a[y],o.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":B=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&te(e,i,y,f,o,d)}Gu(e,B,F);return;case"option":for(var lt in a)B=a[lt],a.hasOwnProperty(lt)&&B!=null&&!o.hasOwnProperty(lt)&&(lt==="selected"?e.selected=!1:te(e,i,lt,null,o,B));for(I in o)B=o[I],F=a[I],o.hasOwnProperty(I)&&B!==F&&(B!=null||F!=null)&&(I==="selected"?e.selected=B&&typeof B!="function"&&typeof B!="symbol":te(e,i,I,B,o,F));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)B=a[pt],a.hasOwnProperty(pt)&&B!=null&&!o.hasOwnProperty(pt)&&te(e,i,pt,null,o,B);for(z in o)if(B=o[z],F=a[z],o.hasOwnProperty(z)&&B!==F&&(B!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:te(e,i,z,B,o,F)}return;default:if(Aa(i)){for(var ee in a)B=a[ee],a.hasOwnProperty(ee)&&B!==void 0&&!o.hasOwnProperty(ee)&&Xd(e,i,ee,void 0,o,B);for(j in o)B=o[j],F=a[j],!o.hasOwnProperty(j)||B===F||B===void 0&&F===void 0||Xd(e,i,j,B,o,F);return}}for(var x in a)B=a[x],a.hasOwnProperty(x)&&B!=null&&!o.hasOwnProperty(x)&&te(e,i,x,null,o,B);for(Y in o)B=o[Y],F=a[Y],!o.hasOwnProperty(Y)||B===F||B==null&&F==null||te(e,i,Y,B,o,F)}function dv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JA(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var f=a[o],d=f.transferSize,y=f.initiatorType,S=f.duration;if(d&&S&&dv(y)){for(y=0,S=f.responseEnd,o+=1;o<a.length;o++){var I=a[o],z=I.startTime;if(z>S)break;var j=I.transferSize,Y=I.initiatorType;j&&dv(Y)&&(I=I.responseEnd,y+=j*(I<S?1:(S-z)/(I-z)))}if(--o,i+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Wd=null,Zd=null;function Kc(e){return e.nodeType===9?e:e.ownerDocument}function mv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Jd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $d=null;function $A(){var e=window.event;return e&&e.type==="popstate"?e===$d?!1:($d=e,!0):($d=null,!1)}var pv=typeof setTimeout=="function"?setTimeout:void 0,tC=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,eC=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(e){return _v.resolve(null).then(e).catch(nC)}:pv;function nC(e){setTimeout(function(){throw e})}function Ws(e){return e==="head"}function yv(e,i){var a=i,o=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(f),sl(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")xo(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,xo(a);for(var d=a.firstChild;d;){var y=d.nextSibling,S=d.nodeName;d[bi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&xo(e.ownerDocument.body);a=f}while(a);sl(i)}function vv(e,i){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function tm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tm(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function iC(e,i,a,o){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[bi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Kn(e.nextSibling),e===null)break}return null}function sC(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kn(e.nextSibling),e===null))return null;return e}function Ev(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Kn(e.nextSibling),e===null))return null;return e}function em(e){return e.data==="$?"||e.data==="$~"}function nm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rC(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Kn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var im=null;function Tv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Sv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function Av(e,i,a){switch(i=Kc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function xo(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ea(e)}var Xn=new Map,Cv=new Set;function Xc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ds=et.d;et.d={f:aC,r:lC,D:oC,C:uC,L:cC,m:hC,X:dC,S:fC,M:mC};function aC(){var e=ds.f(),i=Bc();return e||i}function lC(e){var i=kn(e);i!==null&&i.tag===5&&i.type==="form"?q_(i):ds.r(e)}var el=typeof document>"u"?null:document;function bv(e,i,a){var o=el;if(o&&typeof i=="string"&&i){var f=_n(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Cv.has(f)||(Cv.add(f),e={rel:e,crossOrigin:a,href:i},o.querySelector(f)===null&&(i=o.createElement("link"),$e(i,"link",e),be(i),o.head.appendChild(i)))}}function oC(e){ds.D(e),bv("dns-prefetch",e,null)}function uC(e,i){ds.C(e,i),bv("preconnect",e,i)}function cC(e,i,a){ds.L(e,i,a);var o=el;if(o&&e&&i){var f='link[rel="preload"][as="'+_n(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_n(a.imageSizes)+'"]')):f+='[href="'+_n(e)+'"]';var d=f;switch(i){case"style":d=nl(e);break;case"script":d=il(e)}Xn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Xn.set(d,e),o.querySelector(f)!==null||i==="style"&&o.querySelector(Lo(d))||i==="script"&&o.querySelector(Po(d))||(i=o.createElement("link"),$e(i,"link",e),be(i),o.head.appendChild(i)))}}function hC(e,i){ds.m(e,i);var a=el;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+_n(o)+'"][href="'+_n(e)+'"]',d=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=il(e)}if(!Xn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Xn.set(d,e),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Po(d)))return}o=a.createElement("link"),$e(o,"link",e),be(o),a.head.appendChild(o)}}}function fC(e,i,a){ds.S(e,i,a);var o=el;if(o&&e){var f=wi(o).hoistableStyles,d=nl(e);i=i||"default";var y=f.get(d);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(Lo(d)))S.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Xn.get(d))&&sm(e,a);var I=y=o.createElement("link");be(I),$e(I,"link",e),I._p=new Promise(function(z,j){I.onload=z,I.onerror=j}),I.addEventListener("load",function(){S.loading|=1}),I.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Wc(y,i,o)}y={type:"stylesheet",instance:y,count:1,state:S},f.set(d,y)}}}function dC(e,i){ds.X(e,i);var a=el;if(a&&e){var o=wi(a).hoistableScripts,f=il(e),d=o.get(f);d||(d=a.querySelector(Po(f)),d||(e=T({src:e,async:!0},i),(i=Xn.get(f))&&rm(e,i),d=a.createElement("script"),be(d),$e(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function mC(e,i){ds.M(e,i);var a=el;if(a&&e){var o=wi(a).hoistableScripts,f=il(e),d=o.get(f);d||(d=a.querySelector(Po(f)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Xn.get(f))&&rm(e,i),d=a.createElement("script"),be(d),$e(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function Rv(e,i,a,o){var f=(f=bt.current)?Xc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=nl(a.href),a=wi(f).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=nl(a.href);var d=wi(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(Lo(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(e,a),d||gC(f,e,a,y.state))),i&&o===null)throw Error(s(528,""));return y}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=il(a),a=wi(f).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function nl(e){return'href="'+_n(e)+'"'}function Lo(e){return'link[rel="stylesheet"]['+e+"]"}function wv(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function gC(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),$e(i,"link",a),be(i),e.head.appendChild(i))}function il(e){return'[src="'+_n(e)+'"]'}function Po(e){return"script[async]"+e}function Iv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+_n(a.href)+'"]');if(o)return i.instance=o,be(o),o;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),be(o),$e(o,"style",f),Wc(o,a.precedence,e),i.instance=o;case"stylesheet":f=nl(a.href);var d=e.querySelector(Lo(f));if(d)return i.state.loading|=4,i.instance=d,be(d),d;o=wv(a),(f=Xn.get(f))&&sm(o,f),d=(e.ownerDocument||e).createElement("link"),be(d);var y=d;return y._p=new Promise(function(S,I){y.onload=S,y.onerror=I}),$e(d,"link",o),i.state.loading|=4,Wc(d,a.precedence,e),i.instance=d;case"script":return d=il(a.src),(f=e.querySelector(Po(d)))?(i.instance=f,be(f),f):(o=a,(f=Xn.get(d))&&(o=T({},a),rm(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),be(f),$e(f,"link",o),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Wc(o,a.precedence,e));return i.instance}function Wc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,d=f,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===i)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function sm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function rm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Zc=null;function Nv(e,i,a){if(Zc===null){var o=new Map,f=Zc=new Map;f.set(a,o)}else f=Zc,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[bi]||d[Ce]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=e+y;var S=o.get(y);S?S.push(d):o.set(y,[d])}}return o}function Dv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function pC(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Mv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function _C(e,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=nl(o.href),d=i.querySelector(Lo(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Jc.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,be(d);return}d=i.ownerDocument||i,o=wv(o),(f=Xn.get(f))&&sm(o,f),d=d.createElement("link"),be(d);var y=d;y._p=new Promise(function(S,I){y.onload=S,y.onerror=I}),$e(d,"link",o),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Jc.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var am=0;function yC(e,i){return e.stylesheets&&e.count===0&&th(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&th(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&am===0&&(am=62500*JA());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&th(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>am?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $c=null;function th(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$c=new Map,i.forEach(vC,e),$c=null,Jc.call(e))}function vC(e,i){if(!(i.state.loading&4)){var a=$c.get(e);if(a)var o=a.get(null);else{a=new Map,$c.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),o=y)}o&&a.set(null,o)}f=i.instance,y=f.getAttribute("data-precedence"),d=a.get(y)||o,d===o&&a.set(null,f),a.set(y,f),this.count++,o=Jc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Uo={$$typeof:ut,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function EC(e,i,a,o,f,d,y,S,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Ov(e,i,a,o,f,d,y,S,I,z,j,Y){return e=new EC(e,i,a,y,I,z,j,Y,S),i=1,d===!0&&(i|=24),d=Nn(3,null,null,i),e.current=d,d.stateNode=e,i=zf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},jf(d),e}function Vv(e){return e?(e=xa,e):xa}function xv(e,i,a,o,f,d){f=Vv(f),o.context===null?o.context=f:o.pendingContext=f,o=zs(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Bs(e,o,i),a!==null&&(An(a,e,i),go(a,e,i))}function Lv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function lm(e,i){Lv(e,i),(e=e.alternate)&&Lv(e,i)}function Pv(e){if(e.tag===13||e.tag===31){var i=Pr(e,67108864);i!==null&&An(i,e,67108864),lm(e,67108864)}}function Uv(e){if(e.tag===13||e.tag===31){var i=xn();i=Cr(i);var a=Pr(e,i);a!==null&&An(a,e,i),lm(e,i)}}var eh=!0;function TC(e,i,a,o){var f=G.T;G.T=null;var d=et.p;try{et.p=2,om(e,i,a,o)}finally{et.p=d,G.T=f}}function SC(e,i,a,o){var f=G.T;G.T=null;var d=et.p;try{et.p=8,om(e,i,a,o)}finally{et.p=d,G.T=f}}function om(e,i,a,o){if(eh){var f=um(o);if(f===null)Kd(e,i,o,nh,a),zv(e,o);else if(CC(f,e,i,a,o))o.stopPropagation();else if(zv(e,o),i&4&&-1<AC.indexOf(e)){for(;f!==null;){var d=kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Ti(d.pendingLanes);if(y!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var I=1<<31-_e(y);S.entanglements[1]|=I,y&=~I}Bi(d),(Gt&6)===0&&(kc=dn()+500,Mo(0))}}break;case 31:case 13:S=Pr(d,2),S!==null&&An(S,d,2),Bc(),lm(d,2)}if(d=um(o),d===null&&Kd(e,i,o,nh,a),d===f)break;f=d}f!==null&&o.stopPropagation()}else Kd(e,i,o,null,a)}}function um(e){return e=zn(e),cm(e)}var nh=null;function cm(e){if(nh=null,e=Ri(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return nh=e,null}function kv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case zl:return 2;case Bl:return 8;case Cs:case pf:return 32;case xu:return 268435456;default:return 32}default:return 32}}var hm=!1,Zs=null,Js=null,$s=null,ko=new Map,zo=new Map,tr=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zv(e,i){switch(e){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":ko.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(i.pointerId)}}function Bo(e,i,a,o,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[f]},i!==null&&(i=kn(i),i!==null&&Pv(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function CC(e,i,a,o,f){switch(i){case"focusin":return Zs=Bo(Zs,e,i,a,o,f),!0;case"dragenter":return Js=Bo(Js,e,i,a,o,f),!0;case"mouseover":return $s=Bo($s,e,i,a,o,f),!0;case"pointerover":var d=f.pointerId;return ko.set(d,Bo(ko.get(d)||null,e,i,a,o,f)),!0;case"gotpointercapture":return d=f.pointerId,zo.set(d,Bo(zo.get(d)||null,e,i,a,o,f)),!0}return!1}function Bv(e){var i=Ri(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,ni(e.priority,function(){Uv(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,ni(e.priority,function(){Uv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ih(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=um(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Jl=o,a.target.dispatchEvent(o),Jl=null}else return i=kn(a),i!==null&&Pv(i),e.blockedOn=a,!1;i.shift()}return!0}function qv(e,i,a){ih(e)&&a.delete(i)}function bC(){hm=!1,Zs!==null&&ih(Zs)&&(Zs=null),Js!==null&&ih(Js)&&(Js=null),$s!==null&&ih($s)&&($s=null),ko.forEach(qv),zo.forEach(qv)}function sh(e,i){e.blockedOn===i&&(e.blockedOn=null,hm||(hm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bC)))}var rh=null;function Fv(e){rh!==e&&(rh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){rh===e&&(rh=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],f=e[i+2];if(typeof o!="function"){if(cm(o||a)===null)continue;break}var d=kn(a);d!==null&&(e.splice(i,3),i-=3,ud(d,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function sl(e){function i(I){return sh(I,e)}Zs!==null&&sh(Zs,e),Js!==null&&sh(Js,e),$s!==null&&sh($s,e),ko.forEach(i),zo.forEach(i);for(var a=0;a<tr.length;a++){var o=tr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<tr.length&&(a=tr[0],a.blockedOn===null);)Bv(a),a.blockedOn===null&&tr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],d=a[o+1],y=f[qe]||null;if(typeof d=="function")y||Fv(a);else if(y){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[qe]||null)S=y.formAction;else if(cm(f)!==null)continue}else S=y.action;typeof S=="function"?a[o+1]=S:(a.splice(o,3),o-=3),Fv(a)}}}function jv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function fm(e){this._internalRoot=e}ah.prototype.render=fm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=xn();xv(a,o,e,i,null,null)},ah.prototype.unmount=fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;xv(e.current,2,null,e,null,null),Bc(),i[Ci]=null}};function ah(e){this._internalRoot=e}ah.prototype.unstable_scheduleHydration=function(e){if(e){var i=Bu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<tr.length&&i!==0&&i<tr[a].priority;a++);tr.splice(a,0,e),a===0&&Bv(e)}};var Hv=t.version;if(Hv!=="19.2.4")throw Error(s(527,Hv,"19.2.4"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var RC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{ti=lh.inject(RC),Ke=lh}catch{}}return Fo.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",f=Z_,d=J_,y=$_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=Ov(e,1,!1,null,null,a,o,null,f,d,y,jv),e[Ci]=i.current,Yd(e),new fm(i)},Fo.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,f="",d=Z_,y=J_,S=$_,I=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=Ov(e,1,!0,i,a??null,o,f,I,d,y,S,jv),i.context=Vv(null),a=i.current,o=xn(),o=Cr(o),f=zs(o),f.callback=null,Bs(a,f,o),a=o,i.current.lanes=a,Sr(i,a),Bi(i),e[Ci]=i.current,Yd(e),new ah(i)},Fo.version="19.2.4",Fo}var tE;function PC(){if(tE)return gm.exports;tE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),gm.exports=LC(),gm.exports}var UC=PC();const kC=5,zC=1,BC=5,qC=30,FC=100,jC=360,HC=50,GC=2,QC=6,rn={SETUP:"SETUP",ENTERNEWID:"ENTERNEWID",ENTEROLDID:"ENTEROLDID",NEWGAMESETUP:"NEWGAMESETUP",DISPLAYQMS:"DISPLAYQMS",RUNMATCH:"RUNMATCH",FINISHMATCH:"FINISHMATCH"},pn={IDLE:"IDLE",AUTO:"AUTO",PAUSE:"PAUSE",TELEOP:"TELEOP",FINISHED:"FINISHED"},YC="#a32020",KC="#2040a3";var fi=(r=>(r.NOTPLAYED="notplayed",r.RED="red",r.BLUE="blue",r.TIE="tie",r))(fi||{});const Bm={notplayed:{color:"#474747"},red:{color:YC},blue:{color:KC},tie:{color:"#808080"}},eE="#383838";class Ln{teamName;totalRP;matchesPlayed;numQMs;teamColor;constructor(t,n=eE,s=0,l=0,u=0){this.teamName=t,this.totalRP=s,this.matchesPlayed=l,this.numQMs=u,this.teamColor=n}getTeamName(){return this.teamName}setTeamName(t){this.teamName=t,console.log(this.teamName)}getTotalRP(){return this.totalRP}getMatchesPlayed(){return this.matchesPlayed}addMatchData(t){this.totalRP+=t,this.matchesPlayed++}getAvgRP(){return this.matchesPlayed===0?0:this.totalRP/this.matchesPlayed}getNumQMs(){return this.numQMs}incrementNumQMs(){this.numQMs++}getTeamColor(){return this.teamColor}setTeamColor(t){/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)?this.teamColor=t:t=eE}getAverageRP(t){var n=0,s=0;return t.forEach(l=>{l.getPlayed()&&(l.getRed1()===this||l.getRed2()===this||l.getRed3()===this?(n+=l.getRedRP(),s++):(l.getBlue1()===this||l.getBlue2()===this||l.getBlue3()===this)&&(n+=l.getBlueRP(),s++)),console.log("getAverageRP team: "+this.teamName+" totalRP: "+n+" matches played: "+s)}),s==0?0:n/s}}const XC={toFirestore:r=>({teamName:r.getTeamName(),teamColor:r.getTeamColor(),totalRP:r.getTotalRP(),matchesPlayed:r.getMatchesPlayed(),numQMs:r.getNumQMs()}),fromFirestore:(r,t)=>{const n=r.data(t);if(n)return new Ln(n.teamName,n.teamColor,n.totalRP,n.matchesPlayed,n.numQMs)}};function vm(r,t){console.log("desired name: "+r),console.log(t);const n=t.find(s=>s.getTeamName()===r);return n||(console.error("team not found"),new Ln(""))}class Fi{color;team1;team2;team3;autoFuels;autoClimbPoints;teleopFuels;endgameClimbPoints;fouls;techFouls;constructor(t,n,s,l,u=0,h=0,m=0,_=0,g=0,E=0){this.color=t,this.team1=n,this.team2=s,this.team3=l,this.autoFuels=u,this.autoClimbPoints=h,this.teleopFuels=m,this.endgameClimbPoints=_,this.fouls=g,this.techFouls=E}getColor(){return this.color}getTeam1(){return this.team1}getTeam2(){return this.team2}getTeam3(){return this.team3}withAutoFuels(t=this.autoFuels){return new Fi(this.color,this.team1,this.team2,this.team3,t,this.autoClimbPoints,this.teleopFuels,this.endgameClimbPoints,this.fouls,this.techFouls)}withAutoClimbPoints(t=this.autoClimbPoints){return new Fi(this.color,this.team1,this.team2,this.team3,this.autoFuels,t,this.teleopFuels,this.endgameClimbPoints,this.fouls,this.techFouls)}withTeleopFuels(t=this.teleopFuels){return new Fi(this.color,this.team1,this.team2,this.team3,this.autoFuels,this.autoClimbPoints,t,this.endgameClimbPoints,this.fouls,this.techFouls)}withEndgameClimbPoints(t=this.endgameClimbPoints){return new Fi(this.color,this.team1,this.team2,this.team3,this.autoFuels,this.autoClimbPoints,this.teleopFuels,t,this.fouls,this.techFouls)}withFouls(t=this.fouls){return new Fi(this.color,this.team1,this.team2,this.team3,this.autoFuels,this.autoClimbPoints,this.teleopFuels,this.endgameClimbPoints,t,this.techFouls)}withTechFouls(t=this.techFouls){return new Fi(this.color,this.team1,this.team2,this.team3,this.autoFuels,this.autoClimbPoints,this.teleopFuels,this.endgameClimbPoints,this.fouls,t)}getAutoFuels(){return this.autoFuels}getAutoClimbPoints(){return this.autoClimbPoints}getTeleopFuels(){return this.teleopFuels}getEndgameClimbPoints(){return this.endgameClimbPoints}getFouls(){return this.fouls}getTechFouls(){return this.techFouls}getTotalPoints(){return this.autoFuels+this.autoClimbPoints+this.teleopFuels+this.endgameClimbPoints+this.fouls*GC+this.techFouls*QC}getEnergizedRP(){return this.autoFuels+this.teleopFuels>=FC}getSuperchargedRP(){return this.autoFuels+this.teleopFuels>=jC}getTraversalRP(){return this.endgameClimbPoints+this.autoClimbPoints>=HC}}const Sh={toFirestore:r=>({color:r.getColor(),team1Name:r.getTeam1().getTeamName(),team2Name:r.getTeam2().getTeamName(),team3Name:r.getTeam3().getTeamName(),autoFuels:r.getAutoFuels(),autoClimbPoints:r.getAutoClimbPoints(),teleopFuels:r.getTeleopFuels(),endgameClimbPoints:r.getEndgameClimbPoints(),fouls:r.getFouls(),techFouls:r.getTechFouls()}),fromFirestore:(r,t)=>(r||console.error("data does not exist, cannot make a new FRC Alliance"),new Fi(r.color,vm(r.team1Name,t),vm(r.team2Name,t),vm(r.team3Name,t),r.autoFuels,r.autoClimbPoints,r.teleopFuels,r.endgameClimbPoints,r.fouls,r.techFouls))};class uu{redAlliance;blueAlliance;name;played;constructor(t,n,s,l=!1){this.redAlliance=t,this.blueAlliance=n,this.name=s,this.played=l}getRed1(){return this.redAlliance===void 0&&console.log("red alliance undefined"),this.redAlliance.getTeam1()}getRed2(){return this.redAlliance.getTeam2()}getRed3(){return this.redAlliance.getTeam3()}getBlue1(){return this.blueAlliance.getTeam1()}getBlue2(){return this.blueAlliance.getTeam2()}getBlue3(){return this.blueAlliance.getTeam3()}getName(){return this.name}getWinnerState(){return this.played?this.redAlliance.getTotalPoints()>this.blueAlliance.getTotalPoints()?fi.RED:this.blueAlliance.getTotalPoints()>this.redAlliance.getTotalPoints()?fi.BLUE:fi.TIE:fi.NOTPLAYED}getRedRP(){var t=0;return this.getWinnerState()===fi.RED?t=3:this.getWinnerState()===fi.TIE&&(t=1),(this.redAlliance.getEnergizedRP()?1:0)+(this.redAlliance.getSuperchargedRP()?1:0)+(this.redAlliance.getTraversalRP()?1:0)+t}getBlueRP(){var t=0;return this.getWinnerState()===fi.BLUE?t=3:this.getWinnerState()===fi.TIE&&(t=1),(this.blueAlliance.getEnergizedRP()?1:0)+(this.blueAlliance.getSuperchargedRP()?1:0)+(this.blueAlliance.getTraversalRP()?1:0)+t}getColor(){return Bm[this.getWinnerState()].color}getRedAlliance(){return this.redAlliance}getBlueAlliance(){return this.blueAlliance}withRedAlliance(t){return new uu(t,this.blueAlliance,this.name,this.played)}withBlueAlliance(t){return new uu(this.redAlliance,t,this.name,this.played)}getPlayed(){return this.played}setPlayed(t){this.played=t}}const WC={toFirestore:r=>({redAlliance:Sh.toFirestore(r.getRedAlliance()),blueAlliance:Sh.toFirestore(r.getBlueAlliance()),played:r.getPlayed()})};class di{teams;qmMatches;numQMs;currentQM;constructor(t,n,s,l){console.log("frcgame constructor"),t!==void 0?this.teams=t:this.teams=[],n!==void 0?this.qmMatches=n:this.qmMatches=[],s!==void 0?this.numQMs=s:this.numQMs=0,l!==void 0?this.currentQM=l:this.currentQM=1}withTestTeams(){const t=new di([],this.qmMatches,this.numQMs,this.currentQM);return t.teams=[...this.teams,new Ln("CardinalBotics","#690000"),new Ln("Highlander Robotics","#510485"),new Ln("#1 Sea Bass","#995406"),new Ln("test team 1","#1c7011"),new Ln("test team 2","#1f876f"),new Ln("test team 3","#1e0c78"),new Ln("test team 4","#a8a113"),new Ln("test team 5","#7a0c7a")],t}withTeam(t){if(t.getTeamName()==="")return this;const n=new di([],this.qmMatches,this.numQMs,this.currentQM);return n.teams=[...this.teams,t],n}withTeamRemovedAtIndex(t){const n=new di([],this.qmMatches,this.numQMs,this.currentQM);return n.teams=this.teams.filter((s,l)=>l!==t),console.log("new game: "+n.getTeams()),n}withQMMatches(t){const n=new di(this.teams,[],this.numQMs,this.currentQM);return n.qmMatches=t,n}withUpdatedCurrentMatch(t){const n=new di(this.teams,this.qmMatches,this.numQMs,this.currentQM);return n.qmMatches[this.currentQM-1]=t,n}iterateQM(){const t=new di(this.teams,this.qmMatches,this.numQMs,this.currentQM);return this.currentQM<this.qmMatches.length&&(t.currentQM=t.currentQM+1),console.log("newgame currentqm: "+t.getCurrentQMNumber()),t}getCurrentQMMatch(){return this.qmMatches[this.currentQM-1]}getQMMatches(){return this.qmMatches}getTeams(){return this.teams}setNumQMs(t){this.numQMs=t,console.log(this.teams)}getNumQMs(){return this.numQMs}getCurrentQMNumber(){return this.currentQM}withQM(t,n){const s=new di(this.teams,this.qmMatches,this.numQMs,this.currentQM);return s.qmMatches[n]=t,s}displayTeamAddingMenu(){return this.teams===void 0?$.jsx("p",{children:"teams appear here once they are added"}):$.jsx("div",{children:this.teams.map((t,n)=>$.jsx("div",{children:t.getTeamName()},n))})}}const jo={toFirestore:r=>(console.log("frcgame tofirestore current qm number: "+r.getCurrentQMNumber()),{teams:r.getTeams().map(t=>XC.toFirestore(t)),qmMatches:r.getQMMatches().map(t=>WC.toFirestore(t)),numQMs:r.getNumQMs(),currentQM:r.getCurrentQMNumber()}),fromFirestore:r=>{const t=r.data();if(!t)return new di;const n=(t.teams??[]).map(l=>new Ln(l.teamName,l.teamColor,l.totalRP,l.matchesPlayed,l.numQMs));console.log(n);const s=(t.qmMatches??[]).map(l=>new uu(Sh.fromFirestore(l.redAlliance,n),Sh.fromFirestore(l.blueAlliance,n),l.name,l.played));return console.log("current QM from firebase data: "+t.currentQM),new di(n,s,t.numQMs,t.currentQM)}};var Em={exports:{}},Tm={};var nE;function ZC(){if(nE)return Tm;nE=1;var r=Yh().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Tm.c=function(t){return r.H.useMemoCache(t)},Tm}var iE;function JC(){return iE||(iE=1,Em.exports=ZC()),Em.exports}var oa=JC();const $C=r=>{const t=oa.c(7),{frcGame:n,onRemove:s}=r;let l;if(t[0]!==n||t[1]!==s){let h;t[3]!==s?(h=(m,_)=>$.jsxs("div",{style:{backgroundColor:m.getTeamColor()},className:"row",children:[m.getTeamName(),$.jsx("button",{className:"removeButton",onClick:()=>s(_),children:"remove"})]},_),t[3]=s,t[4]=h):h=t[4],l=n.getTeams().map(h),t[0]=n,t[1]=s,t[2]=l}else l=t[2];let u;return t[5]!==l?(u=$.jsx("div",{children:l}),t[5]=l,t[6]=u):u=t[6],u};function tb(r){for(let t=r.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[r[t],r[n]]=[r[n],r[t]]}}function eb(r){const t=r.getTeams();var n=0,s=[];for(let _=0;_<r.getNumQMs();_++){var l=[],u=[];for(let T=0;T<t.length;T++)t[T].getNumQMs()==n?l.push(t[T]):u.push(t[T]);var h=[];if(l.length>=6)tb(l),h=l.slice(0,6);else{n++,h=l;var m=6-h.length;for(let T=0;T<m;T++)h.push(u[T])}for(let T=0;T<h.length;T++)h[T].incrementNumQMs();const g=new Fi(Bm[fi.RED].color,h[0],h[1],h[2]),E=new Fi(Bm[fi.BLUE].color,h[3],h[4],h[5]);s.push(new uu(g,E,"qm"+(s.length+1)))}return s}const gs=r=>{const t=oa.c(11),{frcTeam:n}=r;let s;t[0]!==n?(s=n.getTeamColor(),t[0]=n,t[1]=s):s=t[1];let l;t[2]!==s?(l={backgroundColor:s},t[2]=s,t[3]=l):l=t[3];let u;t[4]!==n?(u=n.getTeamName(),t[4]=n,t[5]=u):u=t[5];let h;t[6]!==u?(h=$.jsx("h3",{children:u}),t[6]=u,t[7]=h):h=t[7];let m;return t[8]!==l||t[9]!==h?(m=$.jsx("div",{className:"team",style:l,children:h}),t[8]=l,t[9]=h,t[10]=m):m=t[10],m},nb=r=>{const t=oa.c(49),{frcMatch:n}=r;let s;t[0]!==n?(s=n.getColor(),t[0]=n,t[1]=s):s=t[1];let l;t[2]!==s?(l={backgroundColor:s},t[2]=s,t[3]=l):l=t[3];const u=console.log(n);let h;t[4]!==u?(h=$.jsx($.Fragment,{children:u}),t[4]=u,t[5]=h):h=t[5];let m;t[6]!==n?(m=n.getName(),t[6]=n,t[7]=m):m=t[7];let _;t[8]!==m?(_=$.jsxs("h3",{children:[" ",m," "]}),t[8]=m,t[9]=_):_=t[9];let g;t[10]!==n?(g=n.getRed1(),t[10]=n,t[11]=g):g=t[11];let E;t[12]!==g?(E=$.jsx(gs,{frcTeam:g}),t[12]=g,t[13]=E):E=t[13];let T;t[14]!==n?(T=n.getRed2(),t[14]=n,t[15]=T):T=t[15];let C;t[16]!==T?(C=$.jsx(gs,{frcTeam:T}),t[16]=T,t[17]=C):C=t[17];let P;t[18]!==n?(P=n.getRed3(),t[18]=n,t[19]=P):P=t[19];let H;t[20]!==P?(H=$.jsx(gs,{frcTeam:P}),t[20]=P,t[21]=H):H=t[21];let W;t[22]!==n?(W=n.getBlue1(),t[22]=n,t[23]=W):W=t[23];let Z;t[24]!==W?(Z=$.jsx(gs,{frcTeam:W}),t[24]=W,t[25]=Z):Z=t[25];let at;t[26]!==n?(at=n.getBlue2(),t[26]=n,t[27]=at):at=t[27];let ot;t[28]!==at?(ot=$.jsx(gs,{frcTeam:at}),t[28]=at,t[29]=ot):ot=t[29];let ut;t[30]!==n?(ut=n.getBlue3(),t[30]=n,t[31]=ut):ut=t[31];let _t;t[32]!==ut?(_t=$.jsx(gs,{frcTeam:ut}),t[32]=ut,t[33]=_t):_t=t[33];let wt;t[34]!==n?(wt=n.getWinnerState(),t[34]=n,t[35]=wt):wt=t[35];let gt;t[36]!==wt?(gt=$.jsxs("h3",{children:[" ",wt," "]}),t[36]=wt,t[37]=gt):gt=t[37];let R;return t[38]!==C||t[39]!==H||t[40]!==Z||t[41]!==ot||t[42]!==_t||t[43]!==l||t[44]!==gt||t[45]!==h||t[46]!==_||t[47]!==E?(R=$.jsxs("div",{className:"datatable",style:l,children:[h,_,E,C,H,Z,ot,_t,gt]}),t[38]=C,t[39]=H,t[40]=Z,t[41]=ot,t[42]=_t,t[43]=l,t[44]=gt,t[45]=h,t[46]=_,t[47]=E,t[48]=R):R=t[48],R},ib=r=>{const t=oa.c(4),{frcGame:n}=r;let s;t[0]!==n?(s=n.getQMMatches().map(sb),t[0]=n,t[1]=s):s=t[1];let l;return t[2]!==s?(l=$.jsx("div",{children:s}),t[2]=s,t[3]=l):l=t[3],l};function sb(r,t){return $.jsx("div",{children:$.jsx(nb,{frcMatch:r})},t)}function rb(r){const t=oa.c(22),{onFinished:n}=r,[s,l]=ln.useState(pn.IDLE),[u,h]=ln.useState(0),m=ln.useRef(null),_=ln.useRef(null),g=ln.useRef(null),E=ln.useRef(null);let T,C;t[0]!==s?(T=()=>{if(s===pn.IDLE||s===pn.FINISHED)return;const b=setInterval(()=>{h(N=>N<=1?(clearInterval(b),s===pn.AUTO?l(pn.PAUSE):s===pn.PAUSE?l(pn.TELEOP):s===pn.TELEOP&&l(pn.FINISHED),0):(s===pn.TELEOP&&N===qC+1&&g.current?.play(),N-1))},1e3);return()=>clearInterval(b)},C=[s],t[0]=s,t[1]=T,t[2]=C):(T=t[1],C=t[2]),ln.useEffect(T,C);let P;t[3]!==s||t[4]!==n?(P=()=>{s===pn.AUTO&&(m.current?.play(),h(kC)),s===pn.PAUSE&&(_.current?.play(),h(zC)),s===pn.TELEOP&&h(BC),s===pn.FINISHED&&(E.current?.play(),n())},t[3]=s,t[4]=n,t[5]=P):P=t[5];let H;t[6]!==s?(H=[s],t[6]=s,t[7]=H):H=t[7],ln.useEffect(P,H);let W;t[8]!==s?(W=s.toUpperCase(),t[8]=s,t[9]=W):W=t[9];let Z;t[10]!==W?(Z=$.jsx("h1",{children:W}),t[10]=W,t[11]=Z):Z=t[11];let at;t[12]!==u?(at=$.jsx("h2",{children:u}),t[12]=u,t[13]=at):at=t[13];let ot,ut,_t,wt,gt;t[14]===Symbol.for("react.memo_cache_sentinel")?(wt=$.jsx("button",{onClick:()=>l(pn.AUTO),children:"Start Match"}),gt=$.jsx("audio",{ref:m,src:"src\\assets\\audio\\AutoStart.mp3"}),ot=$.jsx("audio",{ref:_,src:"src\\assets\\audio\\AutoEnd.mp3"}),ut=$.jsx("audio",{ref:g,src:"src\\assets\\audio\\EndgameStart.mp3"}),_t=$.jsx("audio",{ref:E,src:"src\\assets\\audio\\TeleopEnd.mp3"}),t[14]=ot,t[15]=ut,t[16]=_t,t[17]=wt,t[18]=gt):(ot=t[14],ut=t[15],_t=t[16],wt=t[17],gt=t[18]);let R;return t[19]!==Z||t[20]!==at?(R=$.jsxs("div",{children:[Z,at,wt,gt,ot,ut,_t]}),t[19]=Z,t[20]=at,t[21]=R):R=t[21],R}const oh=r=>{const t=oa.c(42),{frcAlliance:n,endScreen:s}=r,l=s===void 0?!1:s;let u;t[0]!==n?(u=n.getColor(),t[0]=n,t[1]=u):u=t[1];let h;t[2]!==u?(h={backgroundColor:u},t[2]=u,t[3]=h):h=t[3];let m;t[4]!==n?(m=n.getTotalPoints(),t[4]=n,t[5]=m):m=t[5];let _;t[6]!==m?(_=$.jsxs("h2",{children:[" ",m," "]}),t[6]=m,t[7]=_):_=t[7];let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g={backgroundColor:"transparent"},t[8]=g):g=t[8];let E;t[9]!==n?(E=n.getTeam1(),t[9]=n,t[10]=E):E=t[10];let T;t[11]!==E?(T=$.jsx(gs,{frcTeam:E}),t[11]=E,t[12]=T):T=t[12];let C;t[13]!==n?(C=n.getTeam3(),t[13]=n,t[14]=C):C=t[14];let P;t[15]!==C?(P=$.jsx(gs,{frcTeam:C}),t[15]=C,t[16]=P):P=t[16];let H;t[17]!==n?(H=n.getTeam2(),t[17]=n,t[18]=H):H=t[18];let W;t[19]!==H?(W=$.jsx(gs,{frcTeam:H}),t[19]=H,t[20]=W):W=t[20];let Z;t[21]!==P||t[22]!==W||t[23]!==T?(Z=$.jsxs("div",{className:"datatable",style:g,children:[T,P,W]}),t[21]=P,t[22]=W,t[23]=T,t[24]=Z):Z=t[24];const at="Energized RP: "+(n.getEnergizedRP()?"":"");let ot;t[25]!==at?(ot=$.jsx("h3",{children:at}),t[25]=at,t[26]=ot):ot=t[26];const ut="Supercharged RP: "+(n.getSuperchargedRP()?"":"");let _t;t[27]!==ut?(_t=$.jsx("h3",{children:ut}),t[27]=ut,t[28]=_t):_t=t[28];const wt="Traversal RP: "+(n.getTraversalRP()?"":"");let gt;t[29]!==wt?(gt=$.jsx("h3",{children:wt}),t[29]=wt,t[30]=gt):gt=t[30];let R;t[31]!==l||t[32]!==n?(R=l&&$.jsxs("div",{children:[$.jsx("h3",{children:"Fuels: "+(n.getAutoFuels()+n.getTeleopFuels())}),$.jsx("h3",{children:"Climb: "+(n.getAutoClimbPoints()+n.getEndgameClimbPoints())}),$.jsx("h3",{children:"Fouls: "+(n.getFouls()+n.getTechFouls())})]}),t[31]=l,t[32]=n,t[33]=R):R=t[33];let b;return t[34]!==Z||t[35]!==ot||t[36]!==_t||t[37]!==gt||t[38]!==R||t[39]!==h||t[40]!==_?(b=$.jsxs("div",{style:h,children:[_,Z,ot,_t,gt,R]}),t[34]=Z,t[35]=ot,t[36]=_t,t[37]=gt,t[38]=R,t[39]=h,t[40]=_,t[41]=b):b=t[41],b},ab=()=>{};var sE={};const YT={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const it=function(r,t){if(!r)throw wl(t)},wl=function(r){return new Error("Firebase Database ("+YT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};const KT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},lb=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];t[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],h=r[n++],m=r[n++],_=((l&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(_>>10)),t[s++]=String.fromCharCode(56320+(_&1023))}else{const u=r[n++],h=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return t.join("")},Ag={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const u=r[l],h=l+1<r.length,m=h?r[l+1]:0,_=l+2<r.length,g=_?r[l+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let C=(m&15)<<2|g>>6,P=g&63;_||(P=64,h||(C=64)),s.push(n[E],n[T],n[C],n[P])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(KT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):lb(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],m=l<r.length?n[r.charAt(l)]:0;++l;const g=l<r.length?n[r.charAt(l)]:64;++l;const T=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||m==null||g==null||T==null)throw new ob;const C=u<<2|m>>4;if(s.push(C),g!==64){const P=m<<4&240|g>>2;if(s.push(P),T!==64){const H=g<<6&192|T;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ob extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XT=function(r){const t=KT(r);return Ag.encodeByteArray(t,!0)},Ah=function(r){return XT(r).replace(/\./g,"")},qm=function(r){try{return Ag.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ub(r){return WT(void 0,r)}function WT(r,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!cb(n)||(r[n]=WT(r[n],t[n]));return r}function cb(r){return r!=="__proto__"}function hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fb=()=>hb().__FIREBASE_DEFAULTS__,db=()=>{if(typeof process>"u"||typeof sE>"u")return;const r=sE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&qm(r[1]);return t&&JSON.parse(t)},Cg=()=>{try{return ab()||fb()||db()||mb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gb=r=>Cg()?.emulatorHosts?.[r],pb=r=>{const t=gb(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},ZT=()=>Cg()?.config;class bg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}function Rg(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _b(r){return(await fetch(r,{credentials:"include"})).ok}function yb(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ah(JSON.stringify(n)),Ah(JSON.stringify(h)),""].join(".")}const tu={};function vb(){const r={prod:[],emulator:[]};for(const t of Object.keys(tu))tu[t]?r.emulator.push(t):r.prod.push(t);return r}function Eb(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let rE=!1;function Tb(r,t){if(typeof window>"u"||typeof document>"u"||!Rg(window.location.host)||tu[r]===t||tu[r]||rE)return;tu[r]=t;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=vb().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function _(C,P){C.setAttribute("width","24"),C.setAttribute("id",P),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{rE=!0,h()},C}function E(C,P){C.setAttribute("id",P),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=Eb(s),P=n("text"),H=document.getElementById(P)||document.createElement("span"),W=n("learnmore"),Z=document.getElementById(W)||document.createElement("a"),at=n("preprendIcon"),ot=document.getElementById(at)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ut=C.element;m(ut),E(Z,W);const _t=g();_(ot,at),ut.append(ot,H,Z,_t),document.body.appendChild(ut)}u?(H.innerText="Preview backend disconnected.",ot.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ot.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function JT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $T(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(JT())}function Sb(){const r=Cg()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ab(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cb(){return YT.NODE_ADMIN===!0}function bb(){return!Sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rb(){try{return typeof indexedDB=="object"}catch{return!1}}function wb(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}const Ib="FirebaseError";class Il extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=Ib,Object.setPrototypeOf(this,Il.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t0.prototype.create)}}class t0{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,u=this.errors[t],h=u?Nb(u,s):"Error",m=`${this.serviceName}: ${h} (${l}).`;return new Il(l,m,s)}}function Nb(r,t){return r.replace(Db,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const Db=/\{\$([^}]+)}/g;function cu(r){return JSON.parse(r)}function tn(r){return JSON.stringify(r)}const e0=function(r){let t={},n={},s={},l="";try{const u=r.split(".");t=cu(qm(u[0])||""),n=cu(qm(u[1])||""),l=u[2],s=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:s,signature:l}},Mb=function(r){const t=e0(r),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ob=function(r){const t=e0(r).claims;return typeof t=="object"&&t.admin===!0};function Ss(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function _l(r,t){if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}function aE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ch(r,t,n){const s={};for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=t.call(n,r[l],l,r));return s}function bh(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const u=r[l],h=t[l];if(lE(u)&&lE(h)){if(!bh(u,h))return!1}else if(u!==h)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function lE(r){return r!==null&&typeof r=="object"}function Vb(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}class xb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const s=this.W_;if(typeof t=="string")for(let T=0;T<16;T++)s[T]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let T=0;T<16;T++)s[T]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let T=16;T<80;T++){const C=s[T-3]^s[T-8]^s[T-14]^s[T-16];s[T]=(C<<1|C>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],h=this.chain_[2],m=this.chain_[3],_=this.chain_[4],g,E;for(let T=0;T<80;T++){T<40?T<20?(g=m^u&(h^m),E=1518500249):(g=u^h^m,E=1859775393):T<60?(g=u&h|m&(u|h),E=2400959708):(g=u^h^m,E=3395469782);const C=(l<<5|l>>>27)+g+_+E+s[T]&4294967295;_=m,m=h,h=(u<<30|u>>>2)&4294967295,u=l,l=C}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+_&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const s=n-this.blockSize;let l=0;const u=this.buf_;let h=this.inbuf_;for(;l<n;){if(h===0)for(;l<=s;)this.compress_(t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<n;)if(u[h]=t.charCodeAt(l),++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}else for(;l<n;)if(u[h]=t[l],++h,++l,h===this.blockSize){this.compress_(u),h=0;break}}this.inbuf_=h,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)t[s]=this.chain_[l]>>u&255,++s;return t}}function Lb(r,t){return`${r} failed: ${t} argument `}const Pb=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);if(l>=55296&&l<=56319){const u=l-55296;s++,it(s<r.length,"Surrogate pair missing trail surrogate.");const h=r.charCodeAt(s)-56320;l=65536+(u<<10)+h}l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):l<65536?(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},Kh=function(r){let t=0;for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);s<128?t++:s<2048?t+=2:s>=55296&&s<=56319?(t+=4,n++):t+=3}return t};function yl(r){return r&&r._delegate?r._delegate:r}class vl{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Wr="[DEFAULT]";class Ub{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new bg;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zb(t))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(t=Wr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wr){return this.instances.has(t)}getOptions(t=Wr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&t(u,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:kb(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Wr){return this.component?this.component.multipleInstances?t:Wr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kb(r){return r===Wr?void 0:r}function zb(r){return r.instantiationMode==="EAGER"}class Bb{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ub(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Lt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Lt||(Lt={}));const qb={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Fb=Lt.INFO,jb={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Hb=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=jb[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wg{constructor(t){this.name=t,this._logLevel=Fb,this._logHandler=Hb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Lt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}const Gb=(r,t)=>t.some(n=>r instanceof n);let oE,uE;function Qb(){return oE||(oE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yb(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,Fm=new WeakMap,i0=new WeakMap,Sm=new WeakMap,Ig=new WeakMap;function Kb(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(ir(r.result)),l()},h=()=>{s(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&n0.set(n,r)}).catch(()=>{}),Ig.set(t,r),t}function Xb(r){if(Fm.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Fm.set(r,t)}let jm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Fm.get(r);if(t==="objectStoreNames")return r.objectStoreNames||i0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function Wb(r){jm=r(jm)}function Zb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Am(this),t,...n);return i0.set(s,t.sort?t.sort():[t]),ir(s)}:Yb().includes(r)?function(...t){return r.apply(Am(this),t),ir(n0.get(this))}:function(...t){return ir(r.apply(Am(this),t))}}function Jb(r){return typeof r=="function"?Zb(r):(r instanceof IDBTransaction&&Xb(r),Gb(r,Qb())?new Proxy(r,jm):r)}function ir(r){if(r instanceof IDBRequest)return Kb(r);if(Sm.has(r))return Sm.get(r);const t=Jb(r);return t!==r&&(Sm.set(r,t),Ig.set(t,r)),t}const Am=r=>Ig.get(r);function $b(r,t,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const h=indexedDB.open(r,t),m=ir(h);return s&&h.addEventListener("upgradeneeded",_=>{s(ir(h.result),_.oldVersion,_.newVersion,ir(h.transaction),_)}),n&&h.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{u&&_.addEventListener("close",()=>u()),l&&_.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const tR=["get","getKey","getAll","getAllKeys","count"],eR=["put","add","delete","clear"],Cm=new Map;function cE(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Cm.get(t))return Cm.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=eR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||tR.includes(n)))return;const u=async function(h,...m){const _=this.transaction(h,l?"readwrite":"readonly");let g=_.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),l&&_.done]))[0]};return Cm.set(t,u),u}Wb(r=>({...r,get:(t,n,s)=>cE(t,n)||r.get(t,n,s),has:(t,n)=>!!cE(t,n)||r.has(t,n)}));class nR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function iR(r){return r.getComponent()?.type==="VERSION"}const Hm="@firebase/app",hE="0.14.8";const vs=new wg("@firebase/app"),sR="@firebase/app-compat",rR="@firebase/analytics-compat",aR="@firebase/analytics",lR="@firebase/app-check-compat",oR="@firebase/app-check",uR="@firebase/auth",cR="@firebase/auth-compat",hR="@firebase/database",fR="@firebase/data-connect",dR="@firebase/database-compat",mR="@firebase/functions",gR="@firebase/functions-compat",pR="@firebase/installations",_R="@firebase/installations-compat",yR="@firebase/messaging",vR="@firebase/messaging-compat",ER="@firebase/performance",TR="@firebase/performance-compat",SR="@firebase/remote-config",AR="@firebase/remote-config-compat",CR="@firebase/storage",bR="@firebase/storage-compat",RR="@firebase/firestore",wR="@firebase/ai",IR="@firebase/firestore-compat",NR="firebase",DR="12.9.0";const Gm="[DEFAULT]",MR={[Hm]:"fire-core",[sR]:"fire-core-compat",[aR]:"fire-analytics",[rR]:"fire-analytics-compat",[oR]:"fire-app-check",[lR]:"fire-app-check-compat",[uR]:"fire-auth",[cR]:"fire-auth-compat",[hR]:"fire-rtdb",[fR]:"fire-data-connect",[dR]:"fire-rtdb-compat",[mR]:"fire-fn",[gR]:"fire-fn-compat",[pR]:"fire-iid",[_R]:"fire-iid-compat",[yR]:"fire-fcm",[vR]:"fire-fcm-compat",[ER]:"fire-perf",[TR]:"fire-perf-compat",[SR]:"fire-rc",[AR]:"fire-rc-compat",[CR]:"fire-gcs",[bR]:"fire-gcs-compat",[RR]:"fire-fst",[IR]:"fire-fst-compat",[wR]:"fire-vertex","fire-js":"fire-js",[NR]:"fire-js-all"};const Rh=new Map,OR=new Map,Qm=new Map;function fE(r,t){try{r.container.addComponent(t)}catch(n){vs.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function hu(r){const t=r.name;if(Qm.has(t))return vs.debug(`There were multiple attempts to register component ${t}.`),!1;Qm.set(t,r);for(const n of Rh.values())fE(n,r);for(const n of OR.values())fE(n,r);return!0}function VR(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function s0(r){return r==null?!1:r.settings!==void 0}const xR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new t0("app","Firebase",xR);class LR{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const r0=DR;function a0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Gm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw sr.create("bad-app-name",{appName:String(l)});if(n||(n=ZT()),!n)throw sr.create("no-options");const u=Rh.get(l);if(u){if(bh(n,u.options)&&bh(s,u.config))return u;throw sr.create("duplicate-app",{appName:l})}const h=new Bb(l);for(const _ of Qm.values())h.addComponent(_);const m=new LR(n,s,h);return Rh.set(l,m),m}function PR(r=Gm){const t=Rh.get(r);if(!t&&r===Gm&&ZT())return a0();if(!t)throw sr.create("no-app",{appName:r});return t}function rr(r,t,n){let s=MR[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const h=[`Unable to register library "${s}" with version "${t}":`];l&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vs.warn(h.join(" "));return}hu(new vl(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const UR="firebase-heartbeat-database",kR=1,fu="firebase-heartbeat-store";let bm=null;function l0(){return bm||(bm=$b(UR,kR,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(r=>{throw sr.create("idb-open",{originalErrorMessage:r.message})})),bm}async function zR(r){try{const n=(await l0()).transaction(fu),s=await n.objectStore(fu).get(o0(r));return await n.done,s}catch(t){if(t instanceof Il)vs.warn(t.message);else{const n=sr.create("idb-get",{originalErrorMessage:t?.message});vs.warn(n.message)}}}async function dE(r,t){try{const s=(await l0()).transaction(fu,"readwrite");await s.objectStore(fu).put(t,o0(r)),await s.done}catch(n){if(n instanceof Il)vs.warn(n.message);else{const s=sr.create("idb-set",{originalErrorMessage:n?.message});vs.warn(s.message)}}}function o0(r){return`${r.name}!${r.options.appId}`}const BR=1024,qR=30;class FR{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>qR){const l=GR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){vs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mE(),{heartbeatsToSend:n,unsentEntries:s}=jR(this._heartbeatsCache.heartbeats),l=Ah(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return vs.warn(t),""}}}function mE(){return new Date().toISOString().substring(0,10)}function jR(r,t=BR){const n=[];let s=r.slice();for(const l of r){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),gE(n)>t){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),gE(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class HR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rb()?wb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return dE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return dE(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function gE(r){return Ah(JSON.stringify({version:2,heartbeats:r})).length}function GR(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}function QR(r){hu(new vl("platform-logger",t=>new nR(t),"PRIVATE")),hu(new vl("heartbeat",t=>new FR(t),"PRIVATE")),rr(Hm,hE,r),rr(Hm,hE,"esm2020"),rr("fire-js","")}QR("");var YR="firebase",KR="12.9.0";rr(YR,KR,"app");var pE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ar,u0;(function(){var r;function t(R,b){function N(){}N.prototype=b.prototype,R.F=b.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(V,M,L){for(var w=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)w[ce-2]=arguments[ce];return b.prototype[M].apply(V,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(R,b,N){N||(N=0);const V=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)V[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;M<16;++M)V[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=R.g[0],N=R.g[1],M=R.g[2];let L=R.g[3],w;w=b+(L^N&(M^L))+V[0]+3614090360&4294967295,b=N+(w<<7&4294967295|w>>>25),w=L+(M^b&(N^M))+V[1]+3905402710&4294967295,L=b+(w<<12&4294967295|w>>>20),w=M+(N^L&(b^N))+V[2]+606105819&4294967295,M=L+(w<<17&4294967295|w>>>15),w=N+(b^M&(L^b))+V[3]+3250441966&4294967295,N=M+(w<<22&4294967295|w>>>10),w=b+(L^N&(M^L))+V[4]+4118548399&4294967295,b=N+(w<<7&4294967295|w>>>25),w=L+(M^b&(N^M))+V[5]+1200080426&4294967295,L=b+(w<<12&4294967295|w>>>20),w=M+(N^L&(b^N))+V[6]+2821735955&4294967295,M=L+(w<<17&4294967295|w>>>15),w=N+(b^M&(L^b))+V[7]+4249261313&4294967295,N=M+(w<<22&4294967295|w>>>10),w=b+(L^N&(M^L))+V[8]+1770035416&4294967295,b=N+(w<<7&4294967295|w>>>25),w=L+(M^b&(N^M))+V[9]+2336552879&4294967295,L=b+(w<<12&4294967295|w>>>20),w=M+(N^L&(b^N))+V[10]+4294925233&4294967295,M=L+(w<<17&4294967295|w>>>15),w=N+(b^M&(L^b))+V[11]+2304563134&4294967295,N=M+(w<<22&4294967295|w>>>10),w=b+(L^N&(M^L))+V[12]+1804603682&4294967295,b=N+(w<<7&4294967295|w>>>25),w=L+(M^b&(N^M))+V[13]+4254626195&4294967295,L=b+(w<<12&4294967295|w>>>20),w=M+(N^L&(b^N))+V[14]+2792965006&4294967295,M=L+(w<<17&4294967295|w>>>15),w=N+(b^M&(L^b))+V[15]+1236535329&4294967295,N=M+(w<<22&4294967295|w>>>10),w=b+(M^L&(N^M))+V[1]+4129170786&4294967295,b=N+(w<<5&4294967295|w>>>27),w=L+(N^M&(b^N))+V[6]+3225465664&4294967295,L=b+(w<<9&4294967295|w>>>23),w=M+(b^N&(L^b))+V[11]+643717713&4294967295,M=L+(w<<14&4294967295|w>>>18),w=N+(L^b&(M^L))+V[0]+3921069994&4294967295,N=M+(w<<20&4294967295|w>>>12),w=b+(M^L&(N^M))+V[5]+3593408605&4294967295,b=N+(w<<5&4294967295|w>>>27),w=L+(N^M&(b^N))+V[10]+38016083&4294967295,L=b+(w<<9&4294967295|w>>>23),w=M+(b^N&(L^b))+V[15]+3634488961&4294967295,M=L+(w<<14&4294967295|w>>>18),w=N+(L^b&(M^L))+V[4]+3889429448&4294967295,N=M+(w<<20&4294967295|w>>>12),w=b+(M^L&(N^M))+V[9]+568446438&4294967295,b=N+(w<<5&4294967295|w>>>27),w=L+(N^M&(b^N))+V[14]+3275163606&4294967295,L=b+(w<<9&4294967295|w>>>23),w=M+(b^N&(L^b))+V[3]+4107603335&4294967295,M=L+(w<<14&4294967295|w>>>18),w=N+(L^b&(M^L))+V[8]+1163531501&4294967295,N=M+(w<<20&4294967295|w>>>12),w=b+(M^L&(N^M))+V[13]+2850285829&4294967295,b=N+(w<<5&4294967295|w>>>27),w=L+(N^M&(b^N))+V[2]+4243563512&4294967295,L=b+(w<<9&4294967295|w>>>23),w=M+(b^N&(L^b))+V[7]+1735328473&4294967295,M=L+(w<<14&4294967295|w>>>18),w=N+(L^b&(M^L))+V[12]+2368359562&4294967295,N=M+(w<<20&4294967295|w>>>12),w=b+(N^M^L)+V[5]+4294588738&4294967295,b=N+(w<<4&4294967295|w>>>28),w=L+(b^N^M)+V[8]+2272392833&4294967295,L=b+(w<<11&4294967295|w>>>21),w=M+(L^b^N)+V[11]+1839030562&4294967295,M=L+(w<<16&4294967295|w>>>16),w=N+(M^L^b)+V[14]+4259657740&4294967295,N=M+(w<<23&4294967295|w>>>9),w=b+(N^M^L)+V[1]+2763975236&4294967295,b=N+(w<<4&4294967295|w>>>28),w=L+(b^N^M)+V[4]+1272893353&4294967295,L=b+(w<<11&4294967295|w>>>21),w=M+(L^b^N)+V[7]+4139469664&4294967295,M=L+(w<<16&4294967295|w>>>16),w=N+(M^L^b)+V[10]+3200236656&4294967295,N=M+(w<<23&4294967295|w>>>9),w=b+(N^M^L)+V[13]+681279174&4294967295,b=N+(w<<4&4294967295|w>>>28),w=L+(b^N^M)+V[0]+3936430074&4294967295,L=b+(w<<11&4294967295|w>>>21),w=M+(L^b^N)+V[3]+3572445317&4294967295,M=L+(w<<16&4294967295|w>>>16),w=N+(M^L^b)+V[6]+76029189&4294967295,N=M+(w<<23&4294967295|w>>>9),w=b+(N^M^L)+V[9]+3654602809&4294967295,b=N+(w<<4&4294967295|w>>>28),w=L+(b^N^M)+V[12]+3873151461&4294967295,L=b+(w<<11&4294967295|w>>>21),w=M+(L^b^N)+V[15]+530742520&4294967295,M=L+(w<<16&4294967295|w>>>16),w=N+(M^L^b)+V[2]+3299628645&4294967295,N=M+(w<<23&4294967295|w>>>9),w=b+(M^(N|~L))+V[0]+4096336452&4294967295,b=N+(w<<6&4294967295|w>>>26),w=L+(N^(b|~M))+V[7]+1126891415&4294967295,L=b+(w<<10&4294967295|w>>>22),w=M+(b^(L|~N))+V[14]+2878612391&4294967295,M=L+(w<<15&4294967295|w>>>17),w=N+(L^(M|~b))+V[5]+4237533241&4294967295,N=M+(w<<21&4294967295|w>>>11),w=b+(M^(N|~L))+V[12]+1700485571&4294967295,b=N+(w<<6&4294967295|w>>>26),w=L+(N^(b|~M))+V[3]+2399980690&4294967295,L=b+(w<<10&4294967295|w>>>22),w=M+(b^(L|~N))+V[10]+4293915773&4294967295,M=L+(w<<15&4294967295|w>>>17),w=N+(L^(M|~b))+V[1]+2240044497&4294967295,N=M+(w<<21&4294967295|w>>>11),w=b+(M^(N|~L))+V[8]+1873313359&4294967295,b=N+(w<<6&4294967295|w>>>26),w=L+(N^(b|~M))+V[15]+4264355552&4294967295,L=b+(w<<10&4294967295|w>>>22),w=M+(b^(L|~N))+V[6]+2734768916&4294967295,M=L+(w<<15&4294967295|w>>>17),w=N+(L^(M|~b))+V[13]+1309151649&4294967295,N=M+(w<<21&4294967295|w>>>11),w=b+(M^(N|~L))+V[4]+4149444226&4294967295,b=N+(w<<6&4294967295|w>>>26),w=L+(N^(b|~M))+V[11]+3174756917&4294967295,L=b+(w<<10&4294967295|w>>>22),w=M+(b^(L|~N))+V[2]+718787259&4294967295,M=L+(w<<15&4294967295|w>>>17),w=N+(L^(M|~b))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+b&4294967295,R.g[1]=R.g[1]+(M+(w<<21&4294967295|w>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+L&4294967295}s.prototype.v=function(R,b){b===void 0&&(b=R.length);const N=b-this.blockSize,V=this.C;let M=this.h,L=0;for(;L<b;){if(M==0)for(;L<=N;)l(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<b;)if(V[M++]=R.charCodeAt(L++),M==this.blockSize){l(this,V),M=0;break}}else for(;L<b;)if(V[M++]=R[L++],M==this.blockSize){l(this,V),M=0;break}}this.h=M,this.o+=b},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var b=1;b<R.length-8;++b)R[b]=0;b=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=b&255,b/=256;for(this.v(R),R=Array(16),b=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)R[b++]=this.g[N]>>>V&255;return R};function u(R,b){var N=m;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=b(R)}function h(R,b){this.h=b;const N=[];let V=!0;for(let M=R.length-1;M>=0;M--){const L=R[M]|0;V&&L==b||(N[M]=L,V=!1)}this.g=N}var m={};function _(R){return-128<=R&&R<128?u(R,function(b){return new h([b|0],b<0?-1:0)}):new h([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return Z(g(-R));const b=[];let N=1;for(let V=0;R>=N;V++)b[V]=R/N|0,N*=4294967296;return new h(b,0)}function E(R,b){if(R.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(R.charAt(0)=="-")return Z(E(R.substring(1),b));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(b,8));let V=T;for(let L=0;L<R.length;L+=8){var M=Math.min(8,R.length-L);const w=parseInt(R.substring(L,L+M),b);M<8?(M=g(Math.pow(b,M)),V=V.j(M).add(g(w))):(V=V.j(N),V=V.add(g(w)))}return V}var T=_(0),C=_(1),P=_(16777216);r=h.prototype,r.m=function(){if(W(this))return-Z(this).m();let R=0,b=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);R+=(V>=0?V:4294967296+V)*b,b*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(H(this))return"0";if(W(this))return"-"+Z(this).toString(R);const b=g(Math.pow(R,6));var N=this;let V="";for(;;){const M=_t(N,b).g;N=at(N,M.j(b));let L=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=M,H(N))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function H(R){if(R.h!=0)return!1;for(let b=0;b<R.g.length;b++)if(R.g[b]!=0)return!1;return!0}function W(R){return R.h==-1}r.l=function(R){return R=at(this,R),W(R)?-1:H(R)?0:1};function Z(R){const b=R.g.length,N=[];for(let V=0;V<b;V++)N[V]=~R.g[V];return new h(N,~R.h).add(C)}r.abs=function(){return W(this)?Z(this):this},r.add=function(R){const b=Math.max(this.g.length,R.g.length),N=[];let V=0;for(let M=0;M<=b;M++){let L=V+(this.i(M)&65535)+(R.i(M)&65535),w=(L>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);V=w>>>16,L&=65535,w&=65535,N[M]=w<<16|L}return new h(N,N[N.length-1]&-2147483648?-1:0)};function at(R,b){return R.add(Z(b))}r.j=function(R){if(H(this)||H(R))return T;if(W(this))return W(R)?Z(this).j(Z(R)):Z(Z(this).j(R));if(W(R))return Z(this.j(Z(R)));if(this.l(P)<0&&R.l(P)<0)return g(this.m()*R.m());const b=this.g.length+R.g.length,N=[];for(var V=0;V<2*b;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<R.g.length;M++){const L=this.i(V)>>>16,w=this.i(V)&65535,ce=R.i(M)>>>16,xe=R.i(M)&65535;N[2*V+2*M]+=w*xe,ot(N,2*V+2*M),N[2*V+2*M+1]+=L*xe,ot(N,2*V+2*M+1),N[2*V+2*M+1]+=w*ce,ot(N,2*V+2*M+1),N[2*V+2*M+2]+=L*ce,ot(N,2*V+2*M+2)}for(R=0;R<b;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=b;R<2*b;R++)N[R]=0;return new h(N,0)};function ot(R,b){for(;(R[b]&65535)!=R[b];)R[b+1]+=R[b]>>>16,R[b]&=65535,b++}function ut(R,b){this.g=R,this.h=b}function _t(R,b){if(H(b))throw Error("division by zero");if(H(R))return new ut(T,T);if(W(R))return b=_t(Z(R),b),new ut(Z(b.g),Z(b.h));if(W(b))return b=_t(R,Z(b)),new ut(Z(b.g),b.h);if(R.g.length>30){if(W(R)||W(b))throw Error("slowDivide_ only works with positive integers.");for(var N=C,V=b;V.l(R)<=0;)N=wt(N),V=wt(V);var M=gt(N,1),L=gt(V,1);for(V=gt(V,2),N=gt(N,2);!H(V);){var w=L.add(V);w.l(R)<=0&&(M=M.add(N),L=w),V=gt(V,1),N=gt(N,1)}return b=at(R,M.j(b)),new ut(M,b)}for(M=T;R.l(b)>=0;){for(N=Math.max(1,Math.floor(R.m()/b.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=g(N),w=L.j(b);W(w)||w.l(R)>0;)N-=V,L=g(N),w=L.j(b);H(L)&&(L=C),M=M.add(L),R=at(R,w)}return new ut(M,R)}r.B=function(R){return _t(this,R).h},r.and=function(R){const b=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<b;V++)N[V]=this.i(V)&R.i(V);return new h(N,this.h&R.h)},r.or=function(R){const b=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<b;V++)N[V]=this.i(V)|R.i(V);return new h(N,this.h|R.h)},r.xor=function(R){const b=Math.max(this.g.length,R.g.length),N=[];for(let V=0;V<b;V++)N[V]=this.i(V)^R.i(V);return new h(N,this.h^R.h)};function wt(R){const b=R.g.length+1,N=[];for(let V=0;V<b;V++)N[V]=R.i(V)<<1|R.i(V-1)>>>31;return new h(N,R.h)}function gt(R,b){const N=b>>5;b%=32;const V=R.g.length-N,M=[];for(let L=0;L<V;L++)M[L]=b>0?R.i(L+N)>>>b|R.i(L+N+1)<<32-b:R.i(L+N);return new h(M,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,u0=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,ar=h}).apply(typeof pE<"u"?pE:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var c0,Xo,h0,ph,Ym,f0,d0,m0;(function(){var r,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(c,p){if(p)t:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break t;v=v[U]}c=c[c.length-1],A=v[c],p=p(A),p!=A&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var u=u||{},h=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function _(c,p,v){return c.call.apply(c.bind,arguments)}function g(c,p,v){return g=_,g.apply(null,arguments)}function E(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,q){for(var tt=Array(arguments.length-2),At=2;At<arguments.length;At++)tt[At-2]=arguments[At];return p.prototype[U].apply(A,tt)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const p=c.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=c[A];return v}return[]}function H(c,p){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const q=U.length||0;c.length=v+q;for(let tt=0;tt<q;tt++)c[v+tt]=U[tt]}else c.push(U)}}class W{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(c){h.setTimeout(()=>{throw c},0)}function at(){var c=R;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ot{constructor(){this.h=this.g=null}add(p,v){const A=ut.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ut=new W(()=>new _t,c=>c.reset());class _t{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,gt=!1,R=new ot,b=()=>{const c=Promise.resolve(void 0);wt=()=>{c.then(N)}};function N(){for(var c;c=at();){try{c.h.call(c.g)}catch(v){Z(v)}var p=ut;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}gt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function ce(c,p){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}T(ce,M),ce.prototype.init=function(c,p){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),G=0;function et(c,p,v,A,U){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=U,this.key=++G,this.da=this.fa=!1}function dt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qt(c,p,v){for(const A in c)p.call(v,c[A],A,c)}function Kt(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function O(c){const p={};for(const v in c)p[v]=c[v];return p}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(c,p){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let q=0;q<K.length;q++)v=K[q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function rt(c){this.src=c,this.g={},this.h=0}rt.prototype.add=function(c,p,v,A,U){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const tt=bt(c,p,A,U);return tt>-1?(p=c[tt],v||(p.fa=!1)):(p=new et(p,this.src,q,!!A,U),p.fa=v,c.push(p)),p};function vt(c,p){const v=p.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,p,void 0),q;(q=U>=0)&&Array.prototype.splice.call(A,U,1),q&&(dt(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function bt(c,p,v,A){for(let U=0;U<c.length;++U){const q=c[U];if(!q.da&&q.listener==p&&q.capture==!!v&&q.ha==A)return U}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Le={};function he(c,p,v,A,U){if(Array.isArray(p)){for(let q=0;q<p.length;q++)he(c,p[q],v,A,U);return null}return v=kl(v),c&&c[xe]?c.J(p,v,m(A)?!!A.capture:!1,U):yr(c,p,v,!1,A,U)}function yr(c,p,v,A,U,q){if(!p)throw Error("Invalid event type");const tt=m(U)?!!U.capture:!!U;let At=vr(c);if(At||(c[Ut]=At=new rt(c)),v=At.add(p,v,A,tt,q),v.proxy)return v;if(A=ga(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)L||(U=tt),U===void 0&&(U=!1),c.addEventListener(p.toString(),A,U);else if(c.attachEvent)c.attachEvent(vi(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ga(){function c(v){return p.call(c.src,c.listener,v)}const p=Pl;return c}function pa(c,p,v,A,U){if(Array.isArray(p))for(var q=0;q<p.length;q++)pa(c,p[q],v,A,U);else A=m(A)?!!A.capture:!!A,v=kl(v),c&&c[xe]?(c=c.i,q=String(p).toString(),q in c.g&&(p=c.g[q],v=bt(p,v,A,U),v>-1&&(dt(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[q],c.h--)))):c&&(c=vr(c))&&(p=c.g[p.toString()],c=-1,p&&(c=bt(p,v,A,U)),(v=c>-1?p[c]:null)&&_a(v))}function _a(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[xe])vt(p.i,c);else{var v=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(v,A,c.capture):p.detachEvent?p.detachEvent(vi(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=vr(p))?(vt(v,c),v.h==0&&(v.src=null,p[Ut]=null)):dt(c)}}}function vi(c){return c in Le?Le[c]:Le[c]="on"+c}function Pl(c,p){if(c.da)c=!0;else{p=new ce(p,this);const v=c.listener,A=c.ha||c.src;c.fa&&_a(c),c=v.call(A,p)}return c}function vr(c){return c=c[Ut],c instanceof rt?c:null}var Ul="__closure_events_fn_"+(Math.random()*1e9>>>0);function kl(c){return typeof c=="function"?c:(c[Ul]||(c[Ul]=function(p){return c.handleEvent(p)}),c[Ul])}function Se(){V.call(this),this.i=new rt(this),this.M=this,this.G=null}T(Se,V),Se.prototype[xe]=!0,Se.prototype.removeEventListener=function(c,p,v,A){pa(this,c,p,v,A)};function Pe(c,p){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new M(p,c);else if(p instanceof M)p.target=p.target||c;else{var U=p;p=new M(A,c),nt(p,U)}U=!0;let q,tt;if(v)for(tt=v.length-1;tt>=0;tt--)q=p.g=v[tt],U=As(q,A,!0,p)&&U;if(q=p.g=c,U=As(q,A,!0,p)&&U,U=As(q,A,!1,p)&&U,v)for(tt=0;tt<v.length;tt++)q=p.g=v[tt],U=As(q,A,!1,p)&&U}Se.prototype.N=function(){if(Se.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let A=0;A<v.length;A++)dt(v[A]);delete c.g[p],c.h--}}this.G=null},Se.prototype.J=function(c,p,v,A){return this.i.add(String(c),p,!1,v,A)},Se.prototype.K=function(c,p,v,A){return this.i.add(String(c),p,!0,v,A)};function As(c,p,v,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let q=0;q<p.length;++q){const tt=p[q];if(tt&&!tt.da&&tt.capture==v){const At=tt.listener,ye=tt.ha||tt.src;tt.fa&&vt(c.i,tt),U=At.call(ye,A)!==!1&&U}}return U&&!A.defaultPrevented}function gf(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(c,p||0)}function Vu(c){c.g=gf(()=>{c.g=null,c.i&&(c.i=!1,Vu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class dn extends V{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Vu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(c){V.call(this),this.h=c,this.g={}}T(Er,V);var zl=[];function Bl(c){qt(c.g,function(p,v){this.g.hasOwnProperty(v)&&_a(p)},c),c.g={}}Er.prototype.N=function(){Er.Z.N.call(this),Bl(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=h.JSON.stringify,pf=h.JSON.parse,xu=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Lu(){}function Pu(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){M.call(this,"d")}T(Ke,M);function Un(){M.call(this,"c")}T(Un,M);var _e={},Uu=null;function ya(){return Uu=Uu||new Se}_e.Ia="serverreachability";function ku(c){M.call(this,_e.Ia,c)}T(ku,M);function Ei(c){const p=ya();Pe(p,new ku(p))}_e.STAT_EVENT="statevent";function Tr(c,p){M.call(this,_e.STAT_EVENT,c),this.stat=p}T(Tr,M);function Ae(c){const p=ya();Pe(p,new Tr(p,c))}_e.Ja="timingevent";function Ti(c,p){M.call(this,_e.Ja,c),this.size=p}T(Ti,M);function Si(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},p)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function _f(c,p,v,A,U,q){c.info(function(){if(c.g)if(q){var tt="",At=q.split("&");for(let Ht=0;Ht<At.length;Ht++){var ye=At[Ht].split("=");if(ye.length>1){const fe=ye[0];ye=ye[1];const qn=fe.split("_");tt=qn.length>=2&&qn[1]=="type"?tt+(fe+"="+ye+"&"):tt+(fe+"=redacted&")}}}else tt=null;else tt=q;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+p+`
`+v+`
`+tt})}function zu(c,p,v,A,U,q,tt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+p+`
`+v+`
`+q+" "+tt})}function Ai(c,p,v,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+yf(c,v)+(A?" "+A:"")})}function Sr(c,p){c.info(function(){return"TIMEOUT: "+p})}ei.prototype.info=function(){};function yf(c,p){if(!c.g)return p;if(!p)return null;try{const q=JSON.parse(p);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var v=q[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let tt=1;tt<A.length;tt++)A[tt]=""}}}}return Cs(q)}catch{return p}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fl;function Cr(){}T(Cr,Lu),Cr.prototype.g=function(){return new XMLHttpRequest},Fl=new Cr;function Xi(c){return encodeURIComponent(String(c))}function Bu(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function ni(c,p,v,A){this.j=c,this.i=p,this.l=v,this.S=A||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}var Ce={},qe={};function Ci(c,p,v){c.M=1,c.A=br(Re(p)),c.u=v,c.R=!0,va(c,null)}function va(c,p){c.F=Date.now(),bi(c),c.B=Re(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),Aa(v.i,"t",A),c.C=0,v=c.j.L,c.h=new ii,c.g=ec(c.j,v?p:null,!c.u),c.P>0&&(c.O=new dn(g(c.Y,c,c.g),c.P)),p=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(zl[0]=U.toString()),U=zl);for(let q=0;q<U.length;q++){const tt=he(v,U[q],A||p.handleEvent,!1,p.h||p);if(!tt)break;p.g[tt.key]=tt}p=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),Ei(),_f(c.i,c.v,c.B,c.l,c.S,c.u)}ni.prototype.ba=function(c){c=c.target;const p=this.O;p&&ai(c)==3?p.j():this.Y(c)},ni.prototype.Y=function(c){try{if(c==this.g)t:{const At=ai(this.g),ye=this.g.ya(),Ht=this.g.ca();if(!(At<3)&&(At!=3||this.g&&(this.h.h||this.g.la()||Xe(this.g)))){this.K||At!=4||ye==7||(ye==8||Ht<=0?Ei(3):Ei(2)),Ri(this);var p=this.g.ca();this.X=p;var v=vf(this);if(this.o=p==200,zu(this.i,this.v,this.B,this.l,this.S,At,p),this.o){if(this.U&&!this.L){e:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var q=A;break e}}q=null}if(c=q)Ai(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,c);else{this.o=!1,this.m=3,Ae(12),Rn(this),kn(this);break t}}if(this.R){c=!0;let fe;for(;!this.K&&this.C<v.length;)if(fe=Fu(this,v),fe==qe){At==4&&(this.m=4,Ae(14),c=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==Ce){this.m=4,Ae(15),Ai(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Ai(this.i,this.l,fe,null),wi(this,fe);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||v.length!=0||this.h.h||(this.m=1,Ae(16),c=!1),this.o=this.o&&c,!c)Ai(this.i,this.l,v,"[Invalid Chunked Response]"),Rn(this),kn(this);else if(v.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),io(tt),tt.P=!0,Ae(11))}}else Ai(this.i,this.l,v,null),wi(this,v);At==4&&Rn(this),this.o&&!this.K&&(At==4?Zu(this.j,this):(this.o=!1,bi(this)))}else Zi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),Rn(this),kn(this)}}}catch{}};function vf(c){if(!qu(c))return c.g.la();const p=Xe(c.g);if(p==="")return"";let v="";const A=p.length,U=ai(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Rn(c),kn(c),"";c.h.i=new h.TextDecoder}for(let q=0;q<A;q++)c.h.h=!0,v+=c.h.i.decode(p[q],{stream:!(U&&q==A-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function qu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Fu(c,p){var v=c.C,A=p.indexOf(`
`,v);return A==-1?qe:(v=Number(p.substring(v,A)),isNaN(v)?Ce:(A+=1,A+v>p.length?qe:(p=p.slice(A,A+v),c.C=A+v,p)))}ni.prototype.cancel=function(){this.K=!0,Rn(this)};function bi(c){c.T=Date.now()+c.H,Ea(c,c.H)}function Ea(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Si(g(c.aa,c),p)}function Ri(c){c.D&&(h.clearTimeout(c.D),c.D=null)}ni.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Sr(this.i,this.B),this.M!=2&&(Ei(),Ae(17)),Rn(this),this.m=2,kn(this)):Ea(this,this.T-c)};function kn(c){c.j.I==0||c.K||Zu(c.j,c)}function Rn(c){Ri(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Bl(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function wi(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||Ni(v.h,c))){if(!c.L&&Ni(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Ia(v),Os(v);else break t;Or(v),Ae(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Si(g(v.Va,v),6e3));Ii(v.h)<=1&&v.ta&&(v.ta=void 0)}else Li(v,11)}else if((c.L||v.g==c)&&Ia(v),!w(p))for(U=v.Ba.g.parse(p),p=0;p<U.length;p++){let Ht=U[p];const fe=Ht[0];if(!(fe<=v.K))if(v.K=fe,Ht=Ht[1],v.I==2)if(Ht[0]=="c"){v.M=Ht[1],v.ba=Ht[2];const qn=Ht[3];qn!=null&&(v.ka=qn,v.j.info("VER="+v.ka));const Pi=Ht[4];Pi!=null&&(v.za=Pi,v.j.info("SVER="+v.za));const li=Ht[5];li!=null&&typeof li=="number"&&li>0&&(A=1.5*li,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const oi=c.g;if(oi){const Vr=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vr){var q=A.h;q.g||Vr.indexOf("spdy")==-1&&Vr.indexOf("quic")==-1&&Vr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Gl(q,q.h),q.h=null))}if(A.G){const Na=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(A.wa=Na,Xt(A.J,A.G,Na))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var tt=c;if(A.na=tc(A,A.L?A.ba:null,A.W),tt.L){Ql(A.h,tt);var At=tt,ye=A.O;ye&&(At.H=ye),At.D&&(Ri(At),bi(At)),A.g=tt}else Xu(A);v.i.length>0&&xi(v)}else Ht[0]!="stop"&&Ht[0]!="close"||Li(v,7);else v.I==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Li(v,7):eo(v):Ht[0]!="noop"&&v.l&&v.l.qa(Ht),v.A=0)}}Ei(4)}catch{}}var be=class{constructor(c,p){this.g=c,this.map=p}};function jl(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ii(c){return c.h?1:c.g?c.g.size:0}function Ni(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Gl(c,p){c.g?c.g.add(p):c.h=p}function Ql(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}jl.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return P(c.i)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,q=null;A>=0?(U=c[v].substring(0,A),q=c[v].substring(A+1)):U=c[v],p(U,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function wn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof wn?(this.l=c.l,Fe(this,c.j),this.o=c.o,this.g=c.g,bs(this,c.u),this.h=c.h,Kl(this,Yu(c.i)),this.m=c.m):c&&(p=String(c).match(ju))?(this.l=!1,Fe(this,p[1]||"",!0),this.o=Di(p[2]||""),this.g=Di(p[3]||"",!0),bs(this,p[4]),this.h=Di(p[5]||"",!0),Kl(this,p[6]||"",!0),this.m=Di(p[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}wn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Rr(p,Sa,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Rr(p,Sa,!0),"@"),c.push(Xi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Rr(v,v.charAt(0)=="/"?Xl:Hu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Rr(v,Gu)),c.join("")},wn.prototype.resolve=function(c){const p=Re(this);let v=!!c.j;v?Fe(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var A=c.h;if(v)bs(p,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=p.h.lastIndexOf("/");U!=-1&&(A=p.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const q=[];for(let tt=0;tt<U.length;){const At=U[tt++];At=="."?A&&tt==U.length&&q.push(""):At==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),A&&tt==U.length&&q.push("")):(q.push(At),A=!0)}A=q.join("/")}else A=U}return v?p.h=A:v=c.i.toString()!=="",v?Kl(p,Yu(c.i)):v=!!c.m,v&&(p.m=c.m),p};function Re(c){return new wn(c)}function Fe(c,p,v){c.j=v?Di(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function bs(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Kl(c,p,v){p instanceof ws?(c.i=p,Ca(c.i,c.l)):(v||(p=Rr(p,Rs)),c.i=new ws(p,c.l))}function Xt(c,p,v){c.i.set(p,v)}function br(c){return Xt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Di(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rr(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,_n),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _n(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Sa=/[#\/\?@]/g,Hu=/[#\?:]/g,Xl=/[#\?]/g,Rs=/[#\?@]/g,Gu=/#/g;function ws(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function yn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ta(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=ws.prototype,r.add=function(c,p){yn(this),this.i=null,c=Is(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Qu(c,p){yn(c),p=Is(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Wl(c,p){return yn(c),p=Is(c,p),c.g.has(p)}r.forEach=function(c,p){yn(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(p,U,A,this)},this)},this)};function Zl(c,p){yn(c);let v=[];if(typeof p=="string")Wl(c,p)&&(v=v.concat(c.g.get(Is(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}r.set=function(c,p){return yn(this),this.i=null,c=Is(this,c),Wl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=Zl(this,c),c.length>0?String(c[0]):p):p};function Aa(c,p,v){Qu(c,p),v.length>0&&(c.i=null,c.g.set(Is(c,p),P(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const U=Xi(v);v=Zl(this,v);for(let q=0;q<v.length;q++){let tt=U;v[q]!==""&&(tt+="="+Xi(v[q])),c.push(tt)}}return this.i=c.join("&")};function Yu(c){const p=new ws;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Is(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ca(c,p){p&&!c.j&&(yn(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(Qu(this,A),Aa(this,U,v))},c)),c.j=p}function si(c,p){const v=new ei;if(h.Image){const A=new Image;A.onload=E(zn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=E(zn,v,"TestLoadImage: error",!1,p,A),A.onabort=E(zn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=E(zn,v,"TestLoadImage: timeout",!1,p,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Jl(c,p){const v=new ei,A=new AbortController,U=setTimeout(()=>{A.abort(),zn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout(U),q.ok?zn(v,"TestPingServer: ok",!0,p):zn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),zn(v,"TestPingServer: error",!1,p)})}function zn(c,p,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Ns(){this.g=new xu}function Mi(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Mi,Lu),Mi.prototype.g=function(){return new wr(this.i,this.h)};function wr(c,p){Se.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(wr,Se),r=wr.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ri(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ba(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ba(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ds(this):ri(this),this.readyState==3&&ba(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},r.Na=function(c){this.g&&(this.response=c,Ds(this))},r.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ri(c)}r.setRequestHeader=function(c,p){this.A.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bn(c){let p="";return qt(c,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function Ir(c,p,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Bn(v),typeof c=="string"?v!=null&&Xi(v):Xt(c,p,v))}function Jt(c){Se.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Jt,Se);var Oi=/^https?$/i,$l=["POST","PUT"];r=Jt.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fl.g(),this.g.onreadystatechange=C(g(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(q){Nr(this,q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())v.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),U=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call($l,p,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,tt]of v)this.g.setRequestHeader(q,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){Nr(this,q)}};function Nr(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,to(c),Wi(c)}function to(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pe(this,"complete"),Pe(this,"abort"),Wi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),Jt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Dr(this):this.Xa())},r.Xa=function(){Dr(this)};function Dr(c){if(c.h&&typeof u<"u"){if(c.v&&ai(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pe(c,"readystatechange"),ai(c)==4){c.h=!1;try{const q=c.ca();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var A;if(A=q===0){let tt=String(c.D).match(ju)[1]||null;!tt&&h.self&&h.self.location&&(tt=h.self.location.protocol.slice(0,-1)),A=!Oi.test(tt?tt.toLowerCase():"")}v=A}if(v)Pe(c,"complete"),Pe(c,"success");else{c.o=6;try{var U=ai(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",to(c)}}finally{Wi(c)}}}}function Wi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||Pe(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ai(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),pf(p)}};function Xe(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(c){const p={};c=(c.g&&ai(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(w(c[A]))continue;var v=Bu(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=p[U]||[];p[U]=q,q.push(v)}Kt(p,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Ms(c){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,c),this.Za=Vi("retryDelaySeedMs",1e4,c),this.Ta=Vi("forwardChannelMaxRetries",2,c),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new jl(c&&c.concurrentRequestLimit),this.Ba=new Ns,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ms.prototype,r.ka=8,r.I=1,r.connect=function(c,p,v,A){Ae(0),this.W=c,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=tc(this,null,this.W),xi(this)};function eo(c){if(Ra(c),c.I==3){var p=c.V++,v=Re(c.J);if(Xt(v,"SID",c.M),Xt(v,"RID",p),Xt(v,"TYPE","terminate"),Mr(c,v),p=new ni(c,c.j,p),p.M=2,p.A=br(Re(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=ec(p.j,null),p.g.ea(p.A)),p.F=Date.now(),bi(p)}$u(c)}function Os(c){c.g&&(io(c),c.g.cancel(),c.g=null)}function Ra(c){Os(c),c.v&&(h.clearTimeout(c.v),c.v=null),Ia(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function xi(c){if(!Hl(c.h)&&!c.m){c.m=!0;var p=c.Ea;wt||b(),gt||(wt(),gt=!0),R.add(p,c),c.D=0}}function wa(c,p){return Ii(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Si(g(c.Ea,c,p),Ju(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new ni(this,this.j,c);let q=this.o;if(this.U&&(q?(q=O(q),nt(q,this.U)):q=this.U),this.u!==null||this.R||(U.J=q,q=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Ku(this,U,p),v=Re(this.J),Xt(v,"RID",c),Xt(v,"CVER",22),this.G&&Xt(v,"X-HTTP-Session-Id",this.G),Mr(this,v),q&&(this.R?p="headers="+Xi(Bn(q))+"&"+p:this.u&&Ir(v,this.u,q)),Gl(this.h,U),this.Ra&&Xt(v,"TYPE","init"),this.S?(Xt(v,"$req",p),Xt(v,"SID","null"),U.U=!0,Ci(U,v,null)):Ci(U,v,p),this.I=2}}else this.I==3&&(c?no(this,c):this.i.length==0||Hl(this.h)||no(this))};function no(c,p){var v;p?v=p.l:v=c.V++;const A=Re(c.J);Xt(A,"SID",c.M),Xt(A,"RID",v),Xt(A,"AID",c.K),Mr(c,A),c.u&&c.o&&Ir(A,c.u,c.o),v=new ni(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Ku(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Gl(c.h,v),Ci(v,A,p)}function Mr(c,p){c.H&&qt(c.H,function(v,A){Xt(p,A,v)}),c.l&&qt({},function(v,A){Xt(p,A,v)})}function Ku(c,p,v){v=Math.min(c.i.length,v);const A=c.l?g(c.l.Ka,c.l,c):null;t:{var U=c.i;let At=-1;for(;;){const ye=["count="+v];At==-1?v>0?(At=U[0].g,ye.push("ofs="+At)):At=0:ye.push("ofs="+At);let Ht=!0;for(let fe=0;fe<v;fe++){var q=U[fe].g;const qn=U[fe].map;if(q-=At,q<0)At=Math.max(0,U[fe].g-100),Ht=!1;else try{q="req"+q+"_"||"";try{var tt=qn instanceof Map?qn:Object.entries(qn);for(const[Pi,li]of tt){let oi=li;m(li)&&(oi=Cs(li)),ye.push(q+Pi+"="+encodeURIComponent(oi))}}catch(Pi){throw ye.push(q+"type="+encodeURIComponent("_badmap")),Pi}}catch{A&&A(qn)}}if(Ht){tt=ye.join("&");break t}}tt=void 0}return c=c.i.splice(0,v),p.G=c,tt}function Xu(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;wt||b(),gt||(wt(),gt=!0),R.add(p,c),c.A=0}}function Or(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Si(g(c.Da,c),Ju(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Si(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),Os(this),Wu(this))};function io(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Wu(c){c.g=new ni(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Re(c.na);Xt(p,"RID","rpc"),Xt(p,"SID",c.M),Xt(p,"AID",c.K),Xt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xt(p,"TO",c.ia),Xt(p,"TYPE","xmlhttp"),Mr(c,p),c.u&&c.o&&Ir(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=br(Re(p)),v.u=null,v.R=!0,va(v,c)}r.Va=function(){this.C!=null&&(this.C=null,Os(this),Or(this),Ae(19))};function Ia(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Zu(c,p){var v=null;if(c.g==p){Ia(c),io(c),c.g=null;var A=2}else if(Ni(c.h,p))v=p.G,Ql(c.h,p),A=1;else return;if(c.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var U=c.D;A=ya(),Pe(A,new Ti(A,v)),xi(c)}else Xu(c);else if(U=p.m,U==3||U==0&&p.X>0||!(A==1&&wa(c,p)||A==2&&Or(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),U){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function Ju(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Li(c,p){if(c.j.info("Error code "+p),p==2){var v=g(c.bb,c),A=c.Ua;const U=!A;A=new wn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Fe(A,"https"),br(A),U?si(A.toString(),v):Jl(A.toString(),v)}else Ae(2);c.I=0,c.l&&c.l.pa(p),$u(c),Ra(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function $u(c){if(c.I=0,c.ja=[],c.l){const p=Yl(c.h);(p.length!=0||c.i.length!=0)&&(H(c.ja,p),H(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function tc(c,p,v){var A=v instanceof wn?Re(v):new wn(v);if(A.g!="")p&&(A.g=p+"."+A.g),bs(A,A.u);else{var U=h.location;A=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const q=new wn(null);A&&Fe(q,A),p&&(q.g=p),U&&bs(q,U),v&&(q.h=v),A=q}return v=c.G,p=c.wa,v&&p&&Xt(A,v,p),Xt(A,"VER",c.ka),Mr(c,A),A}function ec(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new Jt(new Mi({ab:v})):new Jt(c.ma),p.Fa(c.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}r=nc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vs(){}Vs.prototype.g=function(c,p){return new mn(c,p)};function mn(c,p){Se.call(this),this.g=new Ms(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!w(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ji(this)}T(mn,Se),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){eo(this.g)},mn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Cs(c),c=v);p.i.push(new be(p.Ya++,c)),p.I==3&&xi(p)},mn.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,mn.Z.N.call(this)};function ic(c){Ke.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}T(ic,Ke);function sc(){Un.call(this),this.status=1}T(sc,Un);function Ji(c){this.g=c}T(Ji,nc),Ji.prototype.ra=function(){Pe(this.g,"a")},Ji.prototype.qa=function(c){Pe(this.g,new ic(c))},Ji.prototype.pa=function(c){Pe(this.g,new sc)},Ji.prototype.oa=function(){Pe(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,m0=function(){return new Vs},d0=function(){return ya()},f0=_e,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,ph=Ar,ql.COMPLETE="complete",h0=ql,Pu.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Se.prototype.listen=Se.prototype.J,Xo=Pu,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,c0=Jt}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});class on{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let Nl="12.9.0";function XR(r){Nl=r}const ea=new wg("@firebase/firestore");function al(){return ea.logLevel}function st(r,...t){if(ea.logLevel<=Lt.DEBUG){const n=t.map(Ng);ea.debug(`Firestore (${Nl}): ${r}`,...n)}}function Es(r,...t){if(ea.logLevel<=Lt.ERROR){const n=t.map(Ng);ea.error(`Firestore (${Nl}): ${r}`,...n)}}function na(r,...t){if(ea.logLevel<=Lt.WARN){const n=t.map(Ng);ea.warn(`Firestore (${Nl}): ${r}`,...n)}}function Ng(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function yt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,g0(r,s,n)}function g0(r,t,n){let s=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Es(s),new Error(s)}function Yt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||g0(t,l,s)}function St(r,t){return r}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Il{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class p0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class ZR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JR{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Yt(this.o===void 0,42304);let s=this.i;const l=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let u=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new lr,t.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const _=u;t.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},m=_=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((_=>m(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new lr)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Yt(typeof s.accessToken=="string",31837,{l:s}),new p0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new on(t)}}class $R{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tw{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new $R(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _E{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ew{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,s0(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Yt(this.o===void 0,3512);const s=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const l=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _E(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _E(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nw(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Dg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=nw(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=t.charAt(l[u]%62))}return s}}function Ot(r,t){return r<t?-1:r>t?1:0}function Km(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),u=t.charAt(s);if(l!==u)return Rm(l)===Rm(u)?Ot(l,u):Rm(l)?1:-1}return Ot(r.length,t.length)}const iw=55296,sw=57343;function Rm(r){const t=r.charCodeAt(0);return t>=iw&&t<=sw}function El(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}const yE="__name__";class qi{constructor(t,n,s){n===void 0?n=0:n>t.length&&yt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&yt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return qi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof qi?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const u=qi.compareSegments(t.get(l),n.get(l));if(u!==0)return u}return Ot(t.length,n.length)}static compareSegments(t,n){const s=qi.isNumericId(t),l=qi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?qi.extractNumericId(t).compare(qi.extractNumericId(n)):Km(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ar.fromString(t.substring(4,t.length-2))}}class me extends qi{construct(t,n,s){return new me(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ht(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new me(n)}static emptyPath(){return new me([])}}const rw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends qi{construct(t,n,s){return new en(t,n,s)}static isValidIdentifier(t){return rw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new en([yE])}static fromServerFormat(t){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new ht(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new ht(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ht(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=_,l+=2}else m==="`"?(h=!h,l++):m!=="."||h?(s+=m,l++):(u(),l++)}if(u(),h)throw new ht(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(n)}static emptyPath(){return new en([])}}class mt{constructor(t){this.path=t}static fromPath(t){return new mt(me.fromString(t))}static fromName(t){return new mt(me.fromString(t).popFirst(5))}static empty(){return new mt(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return me.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new me(t.slice()))}}function aw(r,t,n){if(!n)throw new ht(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function lw(r,t,n,s){if(t===!0&&s===!0)throw new ht(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function vE(r){if(!mt.isDocumentKey(r))throw new ht(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mg(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function or(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ht(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mg(r);throw new ht(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function Oe(r,t){const n={typeString:r};return t&&(n.value=t),n}function Au(r,t){if(!_0(r))throw new ht(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const h=r[s];if(l&&typeof h!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ht(J.INVALID_ARGUMENT,n);return!0}const EE=-62135596800,TE=1e6;class oe{static now(){return oe.fromMillis(Date.now())}static fromDate(t){return oe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*TE);return new oe(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ht(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<EE)throw new ht(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TE}_compareTo(t){return this.seconds===t.seconds?Ot(this.nanoseconds,t.nanoseconds):Ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Au(t,oe._jsonSchema))return new oe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-EE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}oe._jsonSchemaVersion="firestore/timestamp/1.0",oe._jsonSchema={type:Oe("string",oe._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};class Et{static fromTimestamp(t){return new Et(t)}static min(){return new Et(new oe(0,0))}static max(){return new Et(new oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const du=-1;function ow(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Et.fromTimestamp(s===1e9?new oe(n+1,0):new oe(n,s));return new hr(l,mt.empty(),t)}function uw(r){return new hr(r.readTime,r.key,du)}class hr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new hr(Et.min(),mt.empty(),du)}static max(){return new hr(Et.max(),mt.empty(),du)}}function cw(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=mt.comparator(r.documentKey,t.documentKey),n!==0?n:Ot(r.largestBatchId,t.largestBatchId))}const hw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Dl(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==hw)throw r;st("LocalStore","Unexpectedly lost primary lease")}class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,u=0,h=!1;t.forEach((m=>{++l,m.next((()=>{++u,h&&u===l&&n()}),(_=>s(_)))})),h=!0,u===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,u)=>{s.push(n.call(this,l,u))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const u=t.length,h=new Array(u);let m=0;for(let _=0;_<u;_++){const g=_;n(t[g]).next((E=>{h[g]=E,++m,m===u&&s(h)}),(E=>l(E)))}}))}static doWhile(t,n){return new X(((s,l)=>{const u=()=>{t()===!0?n().next((()=>{u()}),l):s()};u()}))}}function dw(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(r){return r.name==="IndexedDbTransactionError"}class Xh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Xh.ce=-1;const Og=-1;function Wh(r){return r==null}function wh(r){return r===0&&1/r==-1/0}function mw(r){return typeof r=="number"&&Number.isInteger(r)&&!wh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const y0="";function gw(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=SE(t)),t=pw(r.get(n),t);return SE(t)}function pw(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case y0:n+="";break;default:n+=u}}return n}function SE(r){return r+y0+""}function AE(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function ua(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function v0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}let Ve=class Xm{constructor(t,n){this.comparator=t,this.root=n||ur.EMPTY}insert(t,n){return new Xm(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(t){return new Xm(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ur.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ch(this.root,t,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ch(this.root,t,this.comparator,!0)}},ch=class{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ur=class ms{constructor(t,n,s,l,u){this.key=t,this.value=n,this.color=s??ms.RED,this.left=l??ms.EMPTY,this.right=u??ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,u){return new ms(t??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return ms.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return ms.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,n,s,l,u){return this}insert(t,n,s){return new ur(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Be{constructor(t){this.comparator=t,this.data=new Ve(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new CE(this.data.getIterator())}getIteratorFrom(t){return new CE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Be(this.comparator);return n.data=t,n}}class CE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gi{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new gi([])}unionWith(t){let n=new Be(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new gi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return El(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}class E0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new E0("Invalid base64 string: "+u):u}})(t);return new nn(n)}static fromUint8Array(t){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(t);return new nn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(r){if(Yt(!!r,39018),typeof r=="string"){let t=0;const n=_w.exec(r);if(Yt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Te(r.seconds),nanos:Te(r.nanos)}}function Te(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function dr(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}const T0="server_timestamp",S0="__type__",A0="__previous_value__",C0="__local_write_time__";function Vg(r){return(r?.mapValue?.fields||{})[S0]?.stringValue===T0}function Zh(r){const t=r.mapValue.fields[A0];return Vg(t)?Zh(t):t}function mu(r){const t=fr(r.mapValue.fields[C0].timestampValue);return new oe(t.seconds,t.nanos)}class yw{constructor(t,n,s,l,u,h,m,_,g,E,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=g,this.isUsingEmulator=E,this.apiKey=T}}const Ih="(default)";class gu{constructor(t,n){this.projectId=t,this.database=n||Ih}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(t){return t instanceof gu&&t.projectId===this.projectId&&t.database===this.database}}function vw(r,t){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ht(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(r.options.projectId,t)}const b0="__type__",Ew="__max__",hh={mapValue:{}},R0="__vector__",Nh="value";function mr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Vg(r)?4:Sw(r)?9007199254740991:Tw(r)?10:11:yt(28295,{value:r})}function Yi(r,t){if(r===t)return!0;const n=mr(r);if(n!==mr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return mu(r).isEqual(mu(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=fr(l.timestampValue),m=fr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,u){return dr(l.bytesValue).isEqual(dr(u.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,u){return Te(l.geoPointValue.latitude)===Te(u.geoPointValue.latitude)&&Te(l.geoPointValue.longitude)===Te(u.geoPointValue.longitude)})(r,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Te(l.integerValue)===Te(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=Te(l.doubleValue),m=Te(u.doubleValue);return h===m?wh(h)===wh(m):isNaN(h)&&isNaN(m)}return!1})(r,t);case 9:return El(r.arrayValue.values||[],t.arrayValue.values||[],Yi);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},m=u.mapValue.fields||{};if(AE(h)!==AE(m))return!1;for(const _ in h)if(h.hasOwnProperty(_)&&(m[_]===void 0||!Yi(h[_],m[_])))return!1;return!0})(r,t);default:return yt(52216,{left:r})}}function pu(r,t){return(r.values||[]).find((n=>Yi(n,t)))!==void 0}function Tl(r,t){if(r===t)return 0;const n=mr(r),s=mr(t);if(n!==s)return Ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(r.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=Te(u.integerValue||u.doubleValue),_=Te(h.integerValue||h.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1})(r,t);case 3:return bE(r.timestampValue,t.timestampValue);case 4:return bE(mu(r),mu(t));case 5:return Km(r.stringValue,t.stringValue);case 6:return(function(u,h){const m=dr(u),_=dr(h);return m.compareTo(_)})(r.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),_=h.split("/");for(let g=0;g<m.length&&g<_.length;g++){const E=Ot(m[g],_[g]);if(E!==0)return E}return Ot(m.length,_.length)})(r.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=Ot(Te(u.latitude),Te(h.latitude));return m!==0?m:Ot(Te(u.longitude),Te(h.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return RE(r.arrayValue,t.arrayValue);case 10:return(function(u,h){const m=u.fields||{},_=h.fields||{},g=m[Nh]?.arrayValue,E=_[Nh]?.arrayValue,T=Ot(g?.values?.length||0,E?.values?.length||0);return T!==0?T:RE(g,E)})(r.mapValue,t.mapValue);case 11:return(function(u,h){if(u===hh.mapValue&&h===hh.mapValue)return 0;if(u===hh.mapValue)return 1;if(h===hh.mapValue)return-1;const m=u.fields||{},_=Object.keys(m),g=h.fields||{},E=Object.keys(g);_.sort(),E.sort();for(let T=0;T<_.length&&T<E.length;++T){const C=Km(_[T],E[T]);if(C!==0)return C;const P=Tl(m[_[T]],g[E[T]]);if(P!==0)return P}return Ot(_.length,E.length)})(r.mapValue,t.mapValue);default:throw yt(23264,{he:n})}}function bE(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ot(r,t);const n=fr(r),s=fr(t),l=Ot(n.seconds,s.seconds);return l!==0?l:Ot(n.nanos,s.nanos)}function RE(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=Tl(n[l],s[l]);if(u)return u}return Ot(n.length,s.length)}function Sl(r){return Wm(r)}function Wm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=fr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return dr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return mt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Wm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of s)u?u=!1:l+=",",l+=`${h}:${Wm(n.fields[h])}`;return l+"}"})(r.mapValue):yt(61005,{value:r})}function _h(r){switch(mr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Zh(r);return t?16+_h(t):16;case 5:return 2*r.stringValue.length;case 6:return dr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+_h(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return ua(s.fields,((u,h)=>{l+=u.length+_h(h)})),l})(r.mapValue);default:throw yt(13486,{value:r})}}function Zm(r){return!!r&&"integerValue"in r}function xg(r){return!!r&&"arrayValue"in r}function wE(r){return!!r&&"nullValue"in r}function IE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yh(r){return!!r&&"mapValue"in r}function Tw(r){return(r?.mapValue?.fields||{})[b0]?.stringValue===R0}function eu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return ua(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=eu(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=eu(r.arrayValue.values[n]);return t}return{...r}}function Sw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ew}class Wn{constructor(t){this.value=t}static empty(){return new Wn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!yh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=eu(n)}setAll(t){let n=en.emptyPath(),s={},l=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,s,l),s={},l=[],n=m.popLast()}h?s[m.lastSegment()]=eu(h):l.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(t){const n=this.field(t.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Yi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];yh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){ua(n,((l,u)=>t[l]=u));for(const l of s)delete t[l]}clone(){return new Wn(eu(this.value))}}function w0(r){const t=[];return ua(r.fields,((n,s)=>{const l=new en([n]);if(yh(s)){const u=w0(s.mapValue).fields;if(u.length===0)t.push(l);else for(const h of u)t.push(l.child(h))}else t.push(l)})),new gi(t)}class un{constructor(t,n,s,l,u,h,m){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new un(t,0,Et.min(),Et.min(),Et.min(),Wn.empty(),0)}static newFoundDocument(t,n,s,l){return new un(t,1,n,Et.min(),s,l,0)}static newNoDocument(t,n){return new un(t,2,n,Et.min(),Et.min(),Wn.empty(),0)}static newUnknownDocument(t,n){return new un(t,3,n,Et.min(),Et.min(),Wn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof un&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dh{constructor(t,n){this.position=t,this.inclusive=n}}function NE(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const u=t[l],h=r.position[l];if(u.field.isKeyField()?s=mt.comparator(mt.fromName(h.referenceValue),n.key):s=Tl(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function DE(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Yi(r.position[n],t.position[n]))return!1;return!0}class Mh{constructor(t,n="asc"){this.field=t,this.dir=n}}function Aw(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class I0{}class ke extends I0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new bw(t,n,s):n==="array-contains"?new Iw(t,s):n==="in"?new Nw(t,s):n==="not-in"?new Dw(t,s):n==="array-contains-any"?new Mw(t,s):new ke(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new Rw(t,s):new ww(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&mr(this.value)===mr(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ki extends I0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Ki(t,n)}matches(t){return N0(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N0(r){return r.op==="and"}function D0(r){return Cw(r)&&N0(r)}function Cw(r){for(const t of r.filters)if(t instanceof Ki)return!1;return!0}function Jm(r){if(r instanceof ke)return r.field.canonicalString()+r.op.toString()+Sl(r.value);if(D0(r))return r.filters.map((t=>Jm(t))).join(",");{const t=r.filters.map((n=>Jm(n))).join(",");return`${r.op}(${t})`}}function M0(r,t){return r instanceof ke?(function(s,l){return l instanceof ke&&s.op===l.op&&s.field.isEqual(l.field)&&Yi(s.value,l.value)})(r,t):r instanceof Ki?(function(s,l){return l instanceof Ki&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,h,m)=>u&&M0(h,l.filters[m])),!0):!1})(r,t):void yt(19439)}function O0(r){return r instanceof ke?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sl(n.value)}`})(r):r instanceof Ki?(function(n){return n.op.toString()+" {"+n.getFilters().map(O0).join(" ,")+"}"})(r):"Filter"}class bw extends ke{constructor(t,n,s){super(t,n,s),this.key=mt.fromName(s.referenceValue)}matches(t){const n=mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Rw extends ke{constructor(t,n){super(t,"in",n),this.keys=V0("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class ww extends ke{constructor(t,n){super(t,"not-in",n),this.keys=V0("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function V0(r,t){return(t.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class Iw extends ke{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xg(n)&&pu(n.arrayValue,this.value)}}class Nw extends ke{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&pu(this.value.arrayValue,n)}}class Dw extends ke{constructor(t,n){super(t,"not-in",n)}matches(t){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pu(this.value.arrayValue,n)}}class Mw extends ke{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>pu(this.value.arrayValue,s)))}}class Ow{constructor(t,n=null,s=[],l=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function ME(r,t=null,n=[],s=[],l=null,u=null,h=null){return new Ow(r,t,n,s,l,u,h)}function Lg(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Wh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Sl(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Sl(s))).join(",")),t.Te=n}return t.Te}function Pg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Aw(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!M0(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!DE(r.startAt,t.startAt)&&DE(r.endAt,t.endAt)}function $m(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Jh{constructor(t,n=null,s=[],l=[],u=null,h="F",m=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=_,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Vw(r,t,n,s,l,u,h,m){return new Jh(r,t,n,s,l,u,h,m)}function $h(r){return new Jh(r)}function OE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xw(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Lw(r){return r.collectionGroup!==null}function nu(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Be(en.comparator);return h.filters.forEach((_=>{_.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Mh(u,s))})),n.has(en.keyField().canonicalString())||t.Ie.push(new Mh(en.keyField(),s))}return t.Ie}function Hi(r){const t=St(r);return t.Ee||(t.Ee=Pw(t,nu(r))),t.Ee}function Pw(r,t){if(r.limitType==="F")return ME(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Mh(l.field,u)}));const n=r.endAt?new Dh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Dh(r.startAt.position,r.startAt.inclusive):null;return ME(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function tg(r,t,n){return new Jh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function tf(r,t){return Pg(Hi(r),Hi(t))&&r.limitType===t.limitType}function x0(r){return`${Lg(Hi(r))}|lt:${r.limitType}`}function ll(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>O0(l))).join(", ")}]`),Wh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Sl(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Sl(l))).join(",")),`Target(${s})`})(Hi(r))}; limitType=${r.limitType})`}function ef(r,t){return t.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):mt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,t)&&(function(s,l){for(const u of nu(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(h,m,_){const g=NE(h,m,_);return h.inclusive?g<=0:g<0})(s.startAt,nu(s),l)||s.endAt&&!(function(h,m,_){const g=NE(h,m,_);return h.inclusive?g>=0:g>0})(s.endAt,nu(s),l))})(r,t)}function Uw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function L0(r){return(t,n)=>{let s=!1;for(const l of nu(r)){const u=kw(l,t,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function kw(r,t,n){const s=r.field.isKeyField()?mt.comparator(t.key,n.key):(function(u,h,m){const _=h.data.field(u),g=m.data.field(u);return _!==null&&g!==null?Tl(_,g):yt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:r.dir})}}class ca{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){ua(this.inner,((n,s)=>{for(const[l,u]of s)t(l,u)}))}isEmpty(){return v0(this.inner)}size(){return this.innerSize}}const zw=new Ve(mt.comparator);function Ts(){return zw}const P0=new Ve(mt.comparator);function Wo(...r){let t=P0;for(const n of r)t=t.insert(n.key,n);return t}function U0(r){let t=P0;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Jr(){return iu()}function k0(){return iu()}function iu(){return new ca((r=>r.toString()),((r,t)=>r.isEqual(t)))}const Bw=new Ve(mt.comparator),qw=new Be(mt.comparator);function Vt(...r){let t=qw;for(const n of r)t=t.add(n);return t}const Fw=new Be(Ot);function jw(){return Fw}function Ug(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(t)?"-0":t}}function z0(r){return{integerValue:""+r}}function Hw(r,t){return mw(t)?z0(t):Ug(r,t)}class nf{constructor(){this._=void 0}}function Gw(r,t,n){return r instanceof Oh?(function(l,u){const h={fields:{[S0]:{stringValue:T0},[C0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Vg(u)&&(u=Zh(u)),u&&(h.fields[A0]=u),{mapValue:h}})(n,t):r instanceof _u?q0(r,t):r instanceof yu?F0(r,t):(function(l,u){const h=B0(l,u),m=VE(h)+VE(l.Ae);return Zm(h)&&Zm(l.Ae)?z0(m):Ug(l.serializer,m)})(r,t)}function Qw(r,t,n){return r instanceof _u?q0(r,t):r instanceof yu?F0(r,t):n}function B0(r,t){return r instanceof Vh?(function(s){return Zm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Oh extends nf{}class _u extends nf{constructor(t){super(),this.elements=t}}function q0(r,t){const n=j0(t);for(const s of r.elements)n.some((l=>Yi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class yu extends nf{constructor(t){super(),this.elements=t}}function F0(r,t){let n=j0(t);for(const s of r.elements)n=n.filter((l=>!Yi(l,s)));return{arrayValue:{values:n}}}class Vh extends nf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function VE(r){return Te(r.integerValue||r.doubleValue)}function j0(r){return xg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Yw(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof _u&&l instanceof _u||s instanceof yu&&l instanceof yu?El(s.elements,l.elements,Yi):s instanceof Vh&&l instanceof Vh?Yi(s.Ae,l.Ae):s instanceof Oh&&l instanceof Oh})(r.transform,t.transform)}class Kw{constructor(t,n){this.version=t,this.transformResults=n}}class _s{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _s}static exists(t){return new _s(void 0,t)}static updateTime(t){return new _s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vh(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class sf{}function H0(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Q0(r.key,_s.none()):new Cu(r.key,r.data,_s.none());{const n=r.data,s=Wn.empty();let l=new Be(en.comparator);for(let u of t.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),l=l.add(u)}return new ha(r.key,s,new gi(l.toArray()),_s.none())}}function Xw(r,t,n){r instanceof Cu?(function(l,u,h){const m=l.value.clone(),_=LE(l.fieldTransforms,u,h.transformResults);m.setAll(_),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,t,n):r instanceof ha?(function(l,u,h){if(!vh(l.precondition,u))return void u.convertToUnknownDocument(h.version);const m=LE(l.fieldTransforms,u,h.transformResults),_=u.data;_.setAll(G0(l)),_.setAll(m),u.convertToFoundDocument(h.version,_).setHasCommittedMutations()})(r,t,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function su(r,t,n,s){return r instanceof Cu?(function(u,h,m,_){if(!vh(u.precondition,h))return m;const g=u.value.clone(),E=PE(u.fieldTransforms,_,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(r,t,n,s):r instanceof ha?(function(u,h,m,_){if(!vh(u.precondition,h))return m;const g=PE(u.fieldTransforms,_,h),E=h.data;return E.setAll(G0(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,t,n,s):(function(u,h,m){return vh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,t,n)}function Ww(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),u=B0(s.transform,l||null);u!=null&&(n===null&&(n=Wn.empty()),n.set(s.field,u))}return n||null}function xE(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&El(s,l,((u,h)=>Yw(u,h)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Cu extends sf{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ha extends sf{constructor(t,n,s,l,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G0(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function LE(r,t,n){const s=new Map;Yt(r.length===n.length,32656,{Ve:n.length,de:r.length});for(let l=0;l<n.length;l++){const u=r[l],h=u.transform,m=t.data.field(u.field);s.set(u.field,Qw(h,m,n[l]))}return s}function PE(r,t,n){const s=new Map;for(const l of r){const u=l.transform,h=n.data.field(l.field);s.set(l.field,Gw(u,h,t))}return s}class Q0 extends sf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zw extends sf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jw{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&Xw(u,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=su(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=su(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=k0();return this.mutations.forEach((l=>{const u=t.get(l.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(l.key)?null:m;const _=H0(h,m);_!==null&&s.set(l.key,_),h.isValidDocument()||h.convertToNoDocument(Et.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&El(this.mutations,t.mutations,((n,s)=>xE(n,s)))&&El(this.baseMutations,t.baseMutations,((n,s)=>xE(n,s)))}}class kg{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Yt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return Bw})();const u=t.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,s[h].version);return new kg(t,n,s,l)}}class $w{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class t2{constructor(t,n){this.count=t,this.unchangedNames=n}}var Me,kt;function e2(r){switch(r){case J.OK:return yt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function Y0(r){if(r===void 0)return Es("GRPC error has no .code"),J.UNKNOWN;switch(r){case Me.OK:return J.OK;case Me.CANCELLED:return J.CANCELLED;case Me.UNKNOWN:return J.UNKNOWN;case Me.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Me.INTERNAL:return J.INTERNAL;case Me.UNAVAILABLE:return J.UNAVAILABLE;case Me.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Me.NOT_FOUND:return J.NOT_FOUND;case Me.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Me.ABORTED:return J.ABORTED;case Me.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Me.DATA_LOSS:return J.DATA_LOSS;default:return yt(39323,{code:r})}}(kt=Me||(Me={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";function n2(){return new TextEncoder}const i2=new ar([4294967295,4294967295],0);function UE(r){const t=n2().encode(r),n=new u0;return n.update(t),new Uint8Array(n.digest())}function kE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new ar([n,s],0),new ar([l,u],0)]}class zg{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(s<0)throw new Zo(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ar.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(ar.fromNumber(s)));return l.compare(i2)===1&&(l=new ar([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=UE(t),[s,l]=kE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,l,u);if(!this.we(h))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new zg(u,l,n);return s.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=UE(t),[s,l]=kE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,l,u);this.be(h)}}be(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rf{constructor(t,n,s,l,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,bu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new rf(Et.min(),l,new Ve(Ot),Ts(),Vt())}}class bu{constructor(t,n,s,l,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new bu(s,n,Vt(),Vt(),Vt())}}class Eh{constructor(t,n,s,l){this.Se=t,this.removedTargetIds=n,this.key=s,this.De=l}}class K0{constructor(t,n){this.targetId=t,this.Ce=n}}class X0{constructor(t,n,s=nn.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class zE{constructor(){this.ve=0,this.Fe=BE(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),n=Vt(),s=Vt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:yt(38017,{changeType:u})}})),new bu(this.Me,this.xe,t,n,s)}Ke(){this.Oe=!1,this.Fe=BE()}qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class s2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ts(),this.He=fh(),this.Je=fh(),this.Ze=new Ve(Ot)}Xe(t){for(const n of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(t.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const u=l.target;if($m(u))if(s===0){const h=new mt(u.path);this.et(n,h,un.newNoDocument(h,Et.min()))}else Yt(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const m=this.ut(t),_=m?this.ct(m,t,h):1;if(_!==0){this.it(n);const g=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let h,m;try{h=dr(s).toUint8Array()}catch(_){if(_ instanceof E0)return na("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new zg(h,l,u)}catch(_){return na(_ instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&$m(m.target)){const _=new mt(m.target.path);this.It(_).has(h)||this.Et(h,_)||this.et(h,_,un.newNoDocument(_,t))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let s=Vt();this.Je.forEach(((u,h)=>{let m=!0;h.forEachWhile((_=>{const g=this.ot(_);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const l=new rf(t,n,this.Ze,this.je,s);return this.je=Ts(),this.He=fh(),this.Je=fh(),this.Ze=new Ve(Ot),l}Ye(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(t)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(t)),this.Je=this.Je.insert(n,this.Rt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let n=this.ze.get(t);return n||(n=new zE,this.ze.set(t,n)),n}Rt(t){let n=this.Je.get(t);return n||(n=new Be(Ot),this.Je=this.Je.insert(t,n)),n}It(t){let n=this.He.get(t);return n||(n=new Be(Ot),this.He=this.He.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function fh(){return new Ve(mt.comparator)}function BE(){return new Ve(mt.comparator)}const r2={asc:"ASCENDING",desc:"DESCENDING"},a2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l2={and:"AND",or:"OR"};class o2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function eg(r,t){return r.useProto3Json||Wh(t)?t:{value:t}}function xh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function W0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function u2(r,t){return xh(r,t.toTimestamp())}function Gi(r){return Yt(!!r,49232),Et.fromTimestamp((function(n){const s=fr(n);return new oe(s.seconds,s.nanos)})(r))}function Bg(r,t){return ng(r,t).canonicalString()}function ng(r,t){const n=(function(l){return new me(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Z0(r){const t=me.fromString(r);return Yt(nS(t),10190,{key:t.toString()}),t}function ig(r,t){return Bg(r.databaseId,t.path)}function wm(r,t){const n=Z0(t);if(n.get(1)!==r.databaseId.projectId)throw new ht(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ht(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new mt($0(n))}function J0(r,t){return Bg(r.databaseId,t)}function c2(r){const t=Z0(r);return t.length===4?me.emptyPath():$0(t)}function sg(r){return new me(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function $0(r){return Yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qE(r,t,n){return{name:ig(r,t),fields:n.value.mapValue.fields}}function h2(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:yt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?(Yt(E===void 0||typeof E=="string",58123),nn.fromBase64String(E||"")):(Yt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),nn.fromUint8Array(E||new Uint8Array))})(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(g){const E=g.code===void 0?J.UNKNOWN:Y0(g.code);return new ht(E,g.message||"")})(h);n=new X0(s,l,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=wm(r,s.document.name),u=Gi(s.document.updateTime),h=s.document.createTime?Gi(s.document.createTime):Et.min(),m=new Wn({mapValue:{fields:s.document.fields}}),_=un.newFoundDocument(l,u,h,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new Eh(g,E,_.key,_)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=wm(r,s.document),u=s.readTime?Gi(s.readTime):Et.min(),h=un.newNoDocument(l,u),m=s.removedTargetIds||[];n=new Eh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=wm(r,s.document),u=s.removedTargetIds||[];n=new Eh([],u,l,null)}else{if(!("filter"in t))return yt(11601,{Vt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,h=new t2(l,u),m=s.targetId;n=new K0(m,h)}}return n}function f2(r,t){let n;if(t instanceof Cu)n={update:qE(r,t.key,t.value)};else if(t instanceof Q0)n={delete:ig(r,t.key)};else if(t instanceof ha)n={update:qE(r,t.key,t.data),updateMask:T2(t.fieldMask)};else{if(!(t instanceof Zw))return yt(16599,{dt:t.type});n={verify:ig(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Oh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof _u)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vh)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw yt(20930,{transform:h.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:u2(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:yt(27497)})(r,t.precondition)),n}function d2(r,t){return r&&r.length>0?(Yt(t!==void 0,14353),r.map((n=>(function(l,u){let h=l.updateTime?Gi(l.updateTime):Gi(u);return h.isEqual(Et.min())&&(h=Gi(u)),new Kw(h,l.transformResults||[])})(n,t)))):[]}function m2(r,t){return{documents:[J0(r,t.path)]}}function g2(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=J0(r,l);const u=(function(g){if(g.length!==0)return eS(Ki.create(g,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((E=>(function(C){return{field:ol(C.field),direction:y2(C.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=eg(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:n,parent:l}}function p2(r){let t=c2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Yt(s===1,65062);const E=n.from[0];E.allDescendants?l=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const C=tS(T);return C instanceof Ki&&D0(C)?C.getFilters():[C]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((C=>(function(H){return new Mh(ul(H.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(C)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let C;return C=typeof T=="object"?T.value:T,Wh(C)?null:C})(n.limit));let _=null;n.startAt&&(_=(function(T){const C=!!T.before,P=T.values||[];return new Dh(P,C)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const C=!T.before,P=T.values||[];return new Dh(P,C)})(n.endAt)),Vw(t,l,h,u,m,"F",_,g)}function _2(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function tS(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ul(n.unaryFilter.field);return ke.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=ul(n.unaryFilter.field);return ke.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ul(n.unaryFilter.field);return ke.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ul(n.unaryFilter.field);return ke.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return ke.create(ul(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ki.create(n.compositeFilter.filters.map((s=>tS(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(n.compositeFilter.op))})(r):yt(30097,{filter:r})}function y2(r){return r2[r]}function v2(r){return a2[r]}function E2(r){return l2[r]}function ol(r){return{fieldPath:r.canonicalString()}}function ul(r){return en.fromServerFormat(r.fieldPath)}function eS(r){return r instanceof ke?(function(n){if(n.op==="=="){if(IE(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(wE(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IE(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(wE(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:v2(n.op),value:n.value}}})(r):r instanceof Ki?(function(n){const s=n.getFilters().map((l=>eS(l)));return s.length===1?s[0]:{compositeFilter:{op:E2(n.op),filters:s}}})(r):yt(54877,{filter:r})}function T2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function nS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function iS(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class nr{constructor(t,n,s,l,u=Et.min(),h=Et.min(),m=nn.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(t){return new nr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class S2{constructor(t){this.yt=t}}function A2(r){const t=p2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?tg(t,t.limit,"L"):t}class C2{constructor(){this.Sn=new b2}addToCollectionParentIndex(t,n){return this.Sn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Sn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(hr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(hr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class b2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Be(me.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Be(me.comparator)).toArray()}}const FE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sS=41943040;class Cn{static withCacheSize(t){return new Cn(t,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(sS,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class Al{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}const jE="LruGarbageCollector",R2=1048576;function HE([r,t],[n,s]){const l=Ot(r,n);return l===0?Ot(t,s):l}class w2{constructor(t){this.Pr=t,this.buffer=new Be(HE),this.Tr=0}Ir(){return++this.Tr}Er(t){const n=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();HE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){st(jE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?st(jE,"Ignoring IndexedDB error during garbage collection: ",n):await Dl(n)}await this.Ar(3e5)}))}}class N2{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.dr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(Xh.ce);const s=new w2(n);return this.Vr.forEachTarget(t,(l=>s.Er(l.sequenceNumber))).next((()=>this.Vr.mr(t,(l=>s.Er(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.Vr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(FE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FE):this.gr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,n){let s,l,u,h,m,_,g;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),l=this.params.maximumSequenceNumbersToCollect):l=T,h=Date.now(),this.nthSequenceNumber(t,l)))).next((T=>(s=T,m=Date.now(),this.removeTargets(t,s,n)))).next((T=>(u=T,_=Date.now(),this.removeOrphanedDocuments(t,s)))).next((T=>(g=Date.now(),al()<=Lt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${l} in `+(m-h)+`ms
	Removed ${u} targets in `+(_-m)+`ms
	Removed ${T} documents in `+(g-_)+`ms
Total Duration: ${g-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:T}))))}}function D2(r,t){return new N2(r,t)}class M2{constructor(){this.changes=new ca((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,un.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class O2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class V2{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&su(s.mutation,l,gi.empty(),oe.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Vt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Vt()){const l=Jr();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((u=>{let h=Wo();return u.forEach(((m,_)=>{h=h.insert(m,_.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const s=Jr();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Vt())))}populateOverlays(t,n,s){const l=[];return s.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,s,l){let u=Ts();const h=iu(),m=(function(){return iu()})();return n.forEach(((_,g)=>{const E=s.get(g.key);l.has(g.key)&&(E===void 0||E.mutation instanceof ha)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),su(E.mutation,g,E.mutation.getFieldMask(),oe.now())):h.set(g.key,gi.empty())})),this.recalculateAndSaveOverlays(t,u).next((_=>(_.forEach(((g,E)=>h.set(g,E))),n.forEach(((g,E)=>m.set(g,new O2(E,h.get(g)??null)))),m)))}recalculateAndSaveOverlays(t,n){const s=iu();let l=new Ve(((h,m)=>h-m)),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((_=>{const g=n.get(_);if(g===null)return;let E=s.get(_)||gi.empty();E=m.applyToLocalView(g,E),s.set(_,E);const T=(l.get(m.batchId)||Vt()).add(_);l=l.insert(m.batchId,T)}))})).next((()=>{const h=[],m=l.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),g=_.key,E=_.value,T=k0();E.forEach((C=>{if(!u.has(C)){const P=H0(n.get(C),s.get(C));P!==null&&T.set(C,P),u=u.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(t,g,T))}return X.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return xw(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Lw(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-u.size):X.resolve(Jr());let m=du,_=u;return h.next((g=>X.forEach(g,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?X.resolve():this.remoteDocumentCache.getEntry(t,E).next((C=>{_=_.insert(E,C)}))))).next((()=>this.populateOverlays(t,g,u))).next((()=>this.computeViews(t,_,g,Vt()))).next((E=>({batchId:m,changes:U0(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new mt(n)).next((s=>{let l=Wo();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const u=n.collectionGroup;let h=Wo();return this.indexManager.getCollectionParents(t,u).next((m=>X.forEach(m,(_=>{const g=(function(T,C){return new Jh(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,s,l).next((E=>{E.forEach(((T,C)=>{h=h.insert(T,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,l)))).next((h=>{u.forEach(((_,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,un.newInvalidDocument(E)))}));let m=Wo();return h.forEach(((_,g)=>{const E=u.get(_);E!==void 0&&su(E.mutation,g,gi.empty(),oe.now()),ef(n,g)&&(m=m.insert(_,g))})),m}))}}class x2{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,n){return X.resolve(this.Nr.get(n))}saveBundleMetadata(t,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Gi(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.Br.get(n))}saveNamedQuery(t,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:A2(l.bundledQuery),readTime:Gi(l.readTime)}})(n)),X.resolve()}}class L2{constructor(){this.overlays=new Ve(mt.comparator),this.Lr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Jr();return X.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,u)=>{this.bt(t,n,u)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.Lr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Jr(),u=n.length+1,h=new mt(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const _=m.getNext().value,g=_.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&_.largestBatchId>s&&l.set(_.getKey(),_)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let u=new Ve(((g,E)=>g-E));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=Jr(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=Jr(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((g,E)=>m.set(g,E))),!(m.size()>=l)););return X.resolve(m)}bt(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(s.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new $w(n,s));let u=this.Lr.get(n);u===void 0&&(u=Vt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class P2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}class qg{constructor(){this.kr=new Be(Ge.Kr),this.qr=new Be(Ge.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,n){const s=new Ge(t,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Wr(new Ge(t,n))}Qr(t,n){t.forEach((s=>this.removeReference(s,n)))}Gr(t){const n=new mt(new me([])),s=new Ge(n,t),l=new Ge(n,t+1),u=[];return this.qr.forEachInRange([s,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const n=new mt(new me([])),s=new Ge(n,t),l=new Ge(n,t+1);let u=Vt();return this.qr.forEachInRange([s,l],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new Ge(t,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Ge{constructor(t,n){this.key=t,this.Hr=n}static Kr(t,n){return mt.comparator(t.key,n.key)||Ot(t.Hr,n.Hr)}static Ur(t,n){return Ot(t.Hr,n.Hr)||mt.comparator(t.key,n.key)}}class U2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Be(Ge.Kr)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Jw(u,n,s,l);this.mutationQueue.push(h);for(const m of l)this.Jr=this.Jr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return X.resolve(h)}lookupMutationBatch(t,n){return X.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.Xr(s),u=l<0?0:l;return X.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Og:this.Yn-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Ge(n,0),l=new Ge(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,l],(h=>{const m=this.Zr(h.Hr);u.push(m)})),X.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Be(Ot);return n.forEach((l=>{const u=new Ge(l,0),h=new Ge(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(m=>{s=s.add(m.Hr)}))})),X.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let u=s;mt.isDocumentKey(u)||(u=u.child(""));const h=new Ge(new mt(u),0);let m=new Be(Ot);return this.Jr.forEachWhile((_=>{const g=_.key.path;return!!s.isPrefixOf(g)&&(g.length===l&&(m=m.add(_.Hr)),!0)}),h),X.resolve(this.Yr(m))}Yr(t){const n=[];return t.forEach((s=>{const l=this.Zr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Yt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return X.forEach(n.mutations,(l=>{const u=new Ge(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Jr=s}))}nr(t){}containsKey(t,n){const s=new Ge(n,0),l=this.Jr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ei(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class k2{constructor(t){this.ti=t,this.docs=(function(){return new Ve(mt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(t,n){let s=Ts();return n.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():un.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let u=Ts();const h=n.path,m=new mt(h.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:g,value:{document:E}}=_.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||cw(uw(E),s)<=0||(l.has(E.key)||ef(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return X.resolve(u)}getAllFromCollectionGroup(t,n,s,l){yt(9500)}ni(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new z2(this)}getSize(t){return X.resolve(this.size)}}class z2 extends M2{constructor(t){super(),this.Mr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(t,l)):this.Mr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Mr.getEntry(t,n)}getAllFromCache(t,n){return this.Mr.getEntries(t,n)}}class B2{constructor(t){this.persistence=t,this.ri=new ca((n=>Lg(n)),Pg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.ii=0,this.si=new qg,this.targetCount=0,this.oi=Al._r()}forEachTarget(t,n){return this.ri.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),X.resolve()}lr(t){this.ri.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.oi=new Al(n),this.highestTargetId=n),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,n){return this.lr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.lr(n),X.resolve()}removeTargetData(t,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const u=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),X.waitFor(u).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.ri.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this.si.$r(n,s),X.resolve()}removeMatchingKeys(t,n,s){this.si.Qr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(t,h))})),X.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.si.Gr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this.si.jr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this.si.containsKey(n))}}class rS{constructor(t,n){this._i={},this.overlays={},this.ai=new Xh(0),this.ui=!1,this.ui=!0,this.ci=new P2,this.referenceDelegate=t(this),this.li=new B2(this),this.indexManager=new C2,this.remoteDocumentCache=(function(l){return new k2(l)})((s=>this.referenceDelegate.hi(s))),this.serializer=new S2(n),this.Pi=new x2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new L2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this._i[t.toKey()];return s||(s=new U2(n,this.referenceDelegate),this._i[t.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new q2(this.ai.next());return this.referenceDelegate.Ti(),s(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(t,n){return X.or(Object.values(this._i).map((s=>()=>s.containsKey(t,n))))}}class q2 extends fw{constructor(t){super(),this.currentSequenceNumber=t}}class Fg{constructor(t){this.persistence=t,this.Ri=new qg,this.Ai=null}static Vi(t){return new Fg(t)}get di(){if(this.Ai)return this.Ai;throw yt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.di.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ti(){this.Ai=new Set}Ii(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,(s=>{const l=mt.fromPath(s);return this.mi(t,l).next((u=>{u||n.removeEntry(l,Et.min())}))})).next((()=>(this.Ai=null,n.apply(t))))}updateLimboDocument(t,n){return this.mi(t,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(t){return 0}mi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class Lh{constructor(t,n){this.persistence=t,this.fi=new ca((s=>gw(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=D2(this,n)}static Vi(t,n){return new Lh(t,n)}Ti(){}Ii(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}dr(t){const n=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}pr(t){let n=0;return this.mr(t,(s=>{n++})).next((()=>n))}mr(t,n){return X.forEach(this.fi,((s,l)=>this.wr(t,s,l).next((u=>u?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(t,(h=>this.wr(t,h,n).next((m=>{m||(s++,u.removeEntry(h,Et.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.fi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.fi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.fi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.fi.set(n,t.currentSequenceNumber),X.resolve()}hi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=_h(t.data.value)),n}wr(t,n,s){return X.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.fi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class jg{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Ts=s,this.Is=l}static Es(t,n){let s=Vt(),l=Vt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new jg(t,n.fromCache,s,l)}}class F2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class j2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return bb()?8:dw(JT())>0?6:4})()}initialize(t,n){this.fs=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const u={result:null};return this.gs(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(t,n,l,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new F2;return this.ys(t,n,h).next((m=>{if(u.result=m,this.As)return this.ws(t,n,h,m.size)}))})).next((()=>u.result))}ws(t,n,s,l){return s.documentReadCount<this.Vs?(al()<=Lt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(al()<=Lt.DEBUG&&st("QueryEngine","Query:",ll(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ds*l?(al()<=Lt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Hi(n))):X.resolve())}gs(t,n){if(OE(n))return X.resolve(null);let s=Hi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=tg(n,null,"F"),s=Hi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const h=Vt(...u);return this.fs.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,s).next((_=>{const g=this.bs(n,m);return this.Ss(n,g,h,_.readTime)?this.gs(t,tg(n,null,"F")):this.Ds(t,g,n,_)}))))})))))}ps(t,n,s,l){return OE(n)||l.isEqual(Et.min())?X.resolve(null):this.fs.getDocuments(t,s).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,s,l)?X.resolve(null):(al()<=Lt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ll(n)),this.Ds(t,h,n,ow(l,du)).next((m=>m)))}))}bs(t,n){let s=new Be(L0(t));return n.forEach(((l,u)=>{ef(t,u)&&(s=s.add(u))})),s}Ss(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(t,n,s){return al()<=Lt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",ll(n)),this.fs.getDocumentsMatchingQuery(t,n,hr.min(),s)}Ds(t,n,s,l){return this.fs.getDocumentsMatchingQuery(t,s,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Hg="LocalStore",H2=3e8;class G2{constructor(t,n,s,l){this.persistence=t,this.Cs=n,this.serializer=l,this.vs=new Ve(Ot),this.Fs=new ca((u=>Lg(u)),Pg),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(s)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new V2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.vs)))}}function Q2(r,t,n,s){return new G2(r,t,n,s)}async function aS(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,n.Os(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let _=Vt();for(const g of l){h.push(g.batchId);for(const E of g.mutations)_=_.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)_=_.add(E.key)}return n.localDocuments.getDocuments(s,_).next((g=>({Ns:g,removedBatchIds:h,addedBatchIds:m})))}))}))}function Y2(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,_,g,E){const T=g.batch,C=T.keys();let P=X.resolve();return C.forEach((H=>{P=P.next((()=>E.getEntry(_,H))).next((W=>{const Z=g.docVersions.get(H);Yt(Z!==null,48541),W.version.compareTo(Z)<0&&(T.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),E.addEntry(W)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(_,T)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let _=Vt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(_=_.add(m.batch.mutations[g].key));return _})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function lS(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.li.getLastRemoteSnapshotVersion(n)))}function K2(r,t){const n=St(r),s=t.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const m=[];t.targetChanges.forEach(((E,T)=>{const C=l.get(T);if(!C)return;m.push(n.li.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,E.addedDocuments,T))));let P=C.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?P=P.withResumeToken(nn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),l=l.insert(T,P),(function(W,Z,at){return W.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=H2?!0:at.addedDocuments.size+at.modifiedDocuments.size+at.removedDocuments.size>0})(C,P,E)&&m.push(n.li.updateTargetData(u,P))}));let _=Ts(),g=Vt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(X2(u,h,t.documentUpdates).next((E=>{_=E.Bs,g=E.Ls}))),!s.isEqual(Et.min())){const E=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(E)}return X.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,g))).next((()=>_))})).then((u=>(n.vs=l,u)))}function X2(r,t,n){let s=Vt(),l=Vt();return n.forEach((u=>s=s.add(u))),t.getEntries(r,s).next((u=>{let h=Ts();return n.forEach(((m,_)=>{const g=u.get(m);_.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(m)),_.isNoDocument()&&_.version.isEqual(Et.min())?(t.removeEntry(m,_.readTime),h=h.insert(m,_)):!g.isValidDocument()||_.version.compareTo(g.version)>0||_.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(_),h=h.insert(m,_)):st(Hg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",_.version)})),{Bs:h,Ls:l}}))}function W2(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Og),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function Z2(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.li.getTargetData(s,t).next((u=>u?(l=u,X.resolve(l)):n.li.allocateTargetId(s).next((h=>(l=new nr(t,h,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.vs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(t,s.targetId)),s}))}async function rg(r,t,n){const s=St(r),l=s.vs.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Ml(h))throw h;st(Hg,`Failed to update sequence numbers for target ${t}: ${h}`)}s.vs=s.vs.remove(t),s.Fs.delete(l.target)}function GE(r,t,n){const s=St(r);let l=Et.min(),u=Vt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(_,g,E){const T=St(_),C=T.Fs.get(E);return C!==void 0?X.resolve(T.vs.get(C)):T.li.getTargetData(g,E)})(s,h,Hi(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(h,m.targetId).next((_=>{u=_}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,t,n?l:Et.min(),n?u:Vt()))).next((m=>(J2(s,Uw(t),m),{documents:m,ks:u})))))}function J2(r,t,n){let s=r.Ms.get(t)||Et.min();n.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Ms.set(t,s)}class QE{constructor(){this.activeTargetIds=jw()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $2{constructor(){this.vo=new QE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,n,s){this.Fo[t]=n}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new QE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class tI{Mo(t){}shutdown(){}}const YE="ConnectivityMonitor";class KE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(YE,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){st(YE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dh=null;function ag(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}const Im="RestConnection",eI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class nI{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+t.host,this.Uo=`projects/${s}/databases/${l}`,this.$o=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Wo(t,n,s,l,u){const h=ag(),m=this.Qo(t,n.toUriEncodedString());st(Im,`Sending RPC '${t}' ${h}:`,m,s);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(_,l,u);const{host:g}=new URL(m),E=Rg(g);return this.zo(t,m,_,s,E).then((T=>(st(Im,`Received RPC '${t}' ${h}: `,T),T)),(T=>{throw na(Im,`RPC '${t}' ${h} failed with error: `,T,"url: ",m,"request:",s),T}))}jo(t,n,s,l,u,h){return this.Wo(t,n,s,l,u)}Go(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>t[u]=l)),s&&s.headers.forEach(((l,u)=>t[u]=l))}Qo(t,n){const s=eI[t];let l=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class iI{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const an="WebChannelConnection",Ho=(r,t,n)=>{r.listen(t,(s=>{try{n(s)}catch(l){setTimeout((()=>{throw l}),0)}}))};class fl extends nI{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!fl.c_){const t=d0();Ho(t,f0.STAT_EVENT,(n=>{n.stat===Ym.PROXY?st(an,"STAT_EVENT: detected buffering proxy"):n.stat===Ym.NOPROXY&&st(an,"STAT_EVENT: detected no buffering proxy")})),fl.c_=!0}}zo(t,n,s,l,u){const h=ag();return new Promise(((m,_)=>{const g=new c0;g.setWithCredentials(!0),g.listenOnce(h0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ph.NO_ERROR:const T=g.getResponseJson();st(an,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(T)),m(T);break;case ph.TIMEOUT:st(an,`RPC '${t}' ${h} timed out`),_(new ht(J.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const C=g.getStatus();if(st(an,`RPC '${t}' ${h} failed with status:`,C,"response text:",g.getResponseText()),C>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const H=P?.error;if(H&&H.status&&H.message){const W=(function(at){const ot=at.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ot)>=0?ot:J.UNKNOWN})(H.status);_(new ht(W,H.message))}else _(new ht(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else _(new ht(J.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{st(an,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(l);st(an,`RPC '${t}' ${h} sending request:`,l),g.send(n,"POST",E,s,15)}))}T_(t,n,s){const l=ag(),u=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(m.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const g=u.join("");st(an,`Creating RPC '${t}' stream ${l}: ${g}`,m);const E=h.createWebChannel(g,m);this.I_(E);let T=!1,C=!1;const P=new iI({Ho:H=>{C?st(an,`Not sending because RPC '${t}' stream ${l} is closed:`,H):(T||(st(an,`Opening RPC '${t}' stream ${l} transport.`),E.open(),T=!0),st(an,`RPC '${t}' stream ${l} sending:`,H),E.send(H))},Jo:()=>E.close()});return Ho(E,Xo.EventType.OPEN,(()=>{C||(st(an,`RPC '${t}' stream ${l} transport opened.`),P.i_())})),Ho(E,Xo.EventType.CLOSE,(()=>{C||(C=!0,st(an,`RPC '${t}' stream ${l} transport closed`),P.o_(),this.E_(E))})),Ho(E,Xo.EventType.ERROR,(H=>{C||(C=!0,na(an,`RPC '${t}' stream ${l} transport errored. Name:`,H.name,"Message:",H.message),P.o_(new ht(J.UNAVAILABLE,"The operation could not be completed")))})),Ho(E,Xo.EventType.MESSAGE,(H=>{if(!C){const W=H.data[0];Yt(!!W,16349);const Z=W,at=Z?.error||Z[0]?.error;if(at){st(an,`RPC '${t}' stream ${l} received error:`,at);const ot=at.status;let ut=(function(gt){const R=Me[gt];if(R!==void 0)return Y0(R)})(ot),_t=at.message;ot==="NOT_FOUND"&&_t.includes("database")&&_t.includes("does not exist")&&_t.includes(this.databaseId.database)&&na(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ut===void 0&&(ut=J.INTERNAL,_t="Unknown error status: "+ot+" with message "+at.message),C=!0,P.o_(new ht(ut,_t)),E.close()}else st(an,`RPC '${t}' stream ${l} received:`,W),P.__(W)}})),fl.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((n=>n===t))}Go(t,n,s){super.Go(t,n,s),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return m0()}}function sI(r){return new fl(r)}function Nm(){return typeof document<"u"?document:null}function af(r){return new o2(r,!0)}fl.c_=!1;class oS{constructor(t,n,s=1e3,l=1.5,u=6e4){this.Ci=t,this.timerId=n,this.R_=s,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const XE="PersistentStream";class uS{constructor(t,n,s,l,u,h,m,_){this.Ci=t,this.b_=s,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oS(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(n)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new ht(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.Q_(this.D_);this.stream=this.j_(t,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(XE,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return n=>{this.Ci.enqueueAndForget((()=>this.D_===t?n():(st(XE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rI extends uS{constructor(t,n,s,l,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=h2(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Et.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Et.min():h.readTime?Gi(h.readTime):Et.min()})(t);return this.listener.J_(n,s)}Z_(t){const n={};n.database=sg(this.serializer),n.addTarget=(function(u,h){let m;const _=h.target;if(m=$m(_)?{documents:m2(u,_)}:{query:g2(u,_).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=W0(u,h.resumeToken);const g=eg(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Et.min())>0){m.readTime=xh(u,h.snapshotVersion.toTimestamp());const g=eg(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,t);const s=_2(this.serializer,t);s&&(n.labels=s),this.K_(n)}X_(t){const n={};n.database=sg(this.serializer),n.removeTarget=t,this.K_(n)}}class aI extends uS{constructor(t,n,s,l,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}H_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=d2(t.writeResults,t.commitTime),s=Gi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=sg(this.serializer),this.K_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>f2(this.serializer,s)))};this.K_(n)}}class lI{}class oI extends lI{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ht(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(t,ng(n,s),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ht(J.UNKNOWN,u.toString())}))}jo(t,n,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(t,ng(n,s),l,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ht(J.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function uI(r,t,n,s){return new oI(r,t,n,s)}class cI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ia="RemoteStore";class hI{constructor(t,n,s,l,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{s.enqueueAndForget((async()=>{fa(this)&&(st(ia,"Restarting streams for network reachability change."),await(async function(_){const g=St(_);g.Ea.add(4),await Ru(g),g.Va.set("Unknown"),g.Ea.delete(4),await lf(g)})(this))}))})),this.Va=new cI(s,l)}}async function lf(r){if(fa(r))for(const t of r.Ra)await t(!0)}async function Ru(r){for(const t of r.Ra)await t(!1)}function cS(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Kg(n)?Yg(n):Ol(n).O_()&&Qg(n,t))}function Gg(r,t){const n=St(r),s=Ol(n);n.Ia.delete(t),s.O_()&&hS(n,t),n.Ia.size===0&&(s.O_()?s.L_():fa(n)&&n.Va.set("Unknown"))}function Qg(r,t){if(r.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ol(r).Z_(t)}function hS(r,t){r.da.$e(t),Ol(r).X_(t)}function Yg(r){r.da=new s2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Ol(r).start(),r.Va.ua()}function Kg(r){return fa(r)&&!Ol(r).x_()&&r.Ia.size>0}function fa(r){return St(r).Ea.size===0}function fS(r){r.da=void 0}async function fI(r){r.Va.set("Online")}async function dI(r){r.Ia.forEach(((t,n)=>{Qg(r,t)}))}async function mI(r,t){fS(r),Kg(r)?(r.Va.ha(t),Yg(r)):r.Va.set("Unknown")}async function gI(r,t,n){if(r.Va.set("Online"),t instanceof X0&&t.state===2&&t.cause)try{await(async function(l,u){const h=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,h),l.Ia.delete(m),l.da.removeTarget(m))})(r,t)}catch(s){st(ia,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Ph(r,s)}else if(t instanceof Eh?r.da.Xe(t):t instanceof K0?r.da.st(t):r.da.tt(t),!n.isEqual(Et.min()))try{const s=await lS(r.localStore);n.compareTo(s)>=0&&await(function(u,h){const m=u.da.Tt(h);return m.targetChanges.forEach(((_,g)=>{if(_.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(_.resumeToken,h))}})),m.targetMismatches.forEach(((_,g)=>{const E=u.Ia.get(_);if(!E)return;u.Ia.set(_,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),hS(u,_);const T=new nr(E.target,_,g,E.sequenceNumber);Qg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(s){st(ia,"Failed to raise snapshot:",s),await Ph(r,s)}}async function Ph(r,t,n){if(!Ml(t))throw t;r.Ea.add(1),await Ru(r),r.Va.set("Offline"),n||(n=()=>lS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(ia,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await lf(r)}))}function dS(r,t){return t().catch((n=>Ph(r,n,t)))}async function of(r){const t=St(r),n=gr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Og;for(;pI(t);)try{const l=await W2(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,_I(t,l)}catch(l){await Ph(t,l)}mS(t)&&gS(t)}function pI(r){return fa(r)&&r.Ta.length<10}function _I(r,t){r.Ta.push(t);const n=gr(r);n.O_()&&n.Y_&&n.ea(t.mutations)}function mS(r){return fa(r)&&!gr(r).x_()&&r.Ta.length>0}function gS(r){gr(r).start()}async function yI(r){gr(r).ra()}async function vI(r){const t=gr(r);for(const n of r.Ta)t.ea(n.mutations)}async function EI(r,t,n){const s=r.Ta.shift(),l=kg.from(s,t,n);await dS(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await of(r)}async function TI(r,t){t&&gr(r).Y_&&await(async function(s,l){if((function(h){return e2(h)&&h!==J.ABORTED})(l.code)){const u=s.Ta.shift();gr(s).B_(),await dS(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await of(s)}})(r,t),mS(r)&&gS(r)}async function WE(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),st(ia,"RemoteStore received new credentials");const s=fa(n);n.Ea.add(3),await Ru(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lf(n)}async function SI(r,t){const n=St(r);t?(n.Ea.delete(2),await lf(n)):t||(n.Ea.add(2),await Ru(n),n.Va.set("Unknown"))}function Ol(r){return r.ma||(r.ma=(function(n,s,l){const u=St(n);return u.sa(),new rI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Zo:fI.bind(null,r),Yo:dI.bind(null,r),t_:mI.bind(null,r),J_:gI.bind(null,r)}),r.Ra.push((async t=>{t?(r.ma.B_(),Kg(r)?Yg(r):r.Va.set("Unknown")):(await r.ma.stop(),fS(r))}))),r.ma}function gr(r){return r.fa||(r.fa=(function(n,s,l){const u=St(n);return u.sa(),new aI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yI.bind(null,r),t_:TI.bind(null,r),ta:vI.bind(null,r),na:EI.bind(null,r)}),r.Ra.push((async t=>{t?(r.fa.B_(),await of(r)):(await r.fa.stop(),r.Ta.length>0&&(st(ia,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Xg{constructor(t,n,s,l,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,u){const h=Date.now()+s,m=new Xg(t,n,h,l,u);return m.start(s),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(r,t){if(Es("AsyncQueue",`${t}: ${r}`),Ml(r))return new ht(J.UNAVAILABLE,`${t}: ${r}`);throw r}class dl{static emptySet(t){return new dl(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||mt.comparator(n.key,s.key):(n,s)=>mt.comparator(n.key,s.key),this.keyedMap=Wo(),this.sortedSet=new Ve(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new dl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}class ZE{constructor(){this.ga=new Ve(mt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):yt(63341,{Vt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Cl{constructor(t,n,s,l,u,h,m,_,g){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=g}static fromInitialDocuments(t,n,s,l,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Cl(t,n,dl.emptySet(n),h,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&tf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class AI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class CI{constructor(){this.queries=JE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=St(n),u=l.queries;l.queries=JE(),u.forEach(((h,m)=>{for(const _ of m.ba)_.onError(s)}))})(this,new ht(J.ABORTED,"Firestore shutting down"))}}function JE(){return new ca((r=>x0(r)),tf)}async function pS(r,t){const n=St(r);let s=3;const l=t.query;let u=n.queries.get(l);u?!u.Sa()&&t.Da()&&(s=2):(u=new AI,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const m=Wg(h,`Initialization of query '${ll(t.query)}' failed`);return void t.onError(m)}n.queries.set(l,u),u.ba.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Zg(n)}async function _S(r,t){const n=St(r),s=t.query;let l=3;const u=n.queries.get(s);if(u){const h=u.ba.indexOf(t);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=t.Da()?0:1:!u.Sa()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bI(r,t){const n=St(r);let s=!1;for(const l of t){const u=l.query,h=n.queries.get(u);if(h){for(const m of h.ba)m.Fa(l)&&(s=!0);h.wa=l}}s&&Zg(n)}function RI(r,t,n){const s=St(r),l=s.queries.get(t);if(l)for(const u of l.ba)u.onError(n);s.queries.delete(t)}function Zg(r){r.Ca.forEach((t=>{t.next()}))}var lg,$E;($E=lg||(lg={})).Ma="default",$E.Cache="cache";class yS{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Cl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Cl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==lg.Cache}}class vS{constructor(t){this.key=t}}class ES{constructor(t){this.key=t}}class wI{constructor(t,n){this.query=t,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Vt(),this.mutatedKeys=Vt(),this.eu=L0(t),this.tu=new dl(this.eu)}get nu(){return this.Za}ru(t,n){const s=n?n.iu:new ZE,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,m=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((E,T)=>{const C=l.get(E),P=ef(this.query,T)?T:null,H=!!C&&this.mutatedKeys.has(C.key),W=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Z=!1;C&&P?C.data.isEqual(P.data)?H!==W&&(s.track({type:3,doc:P}),Z=!0):this.su(C,P)||(s.track({type:2,doc:P}),Z=!0,(_&&this.eu(P,_)>0||g&&this.eu(P,g)<0)&&(m=!0)):!C&&P?(s.track({type:0,doc:P}),Z=!0):C&&!P&&(s.track({type:1,doc:C}),Z=!0,(_||g)&&(m=!0)),Z&&(P?(h=h.add(P),u=W?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Ss:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,T)=>(function(P,H){const W=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Vt:Z})}};return W(P)-W(H)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),l=l??!1;const m=n&&!l?this._u():[],_=this.Ya.size===0&&this.current&&!l?1:0,g=_!==this.Xa;return this.Xa=_,h.length!==0||g?{snapshot:new Cl(this.query,t.tu,u,h,t.mutatedKeys,_===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=Vt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return t.forEach((s=>{this.Ya.has(s)||n.push(new ES(s))})),this.Ya.forEach((s=>{t.has(s)||n.push(new vS(s))})),n}cu(t){this.Za=t.ks,this.Ya=Vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Jg="SyncEngine";class II{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class NI{constructor(t){this.key=t,this.hu=!1}}class DI{constructor(t,n,s,l,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ca((m=>x0(m)),tf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ve(mt.comparator),this.Au=new Map,this.Vu=new qg,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MI(r,t,n=!0){const s=RS(r);let l;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await TS(s,t,n,!0),l}async function OI(r,t){const n=RS(r);await TS(n,t,!0,!1)}async function TS(r,t,n,s){const l=await Z2(r.localStore,Hi(t)),u=l.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await VI(r,t,u,h==="current",l.resumeToken)),r.isPrimaryClient&&n&&cS(r.remoteStore,l),m}async function VI(r,t,n,s,l){r.pu=(T,C,P)=>(async function(W,Z,at,ot){let ut=Z.view.ru(at);ut.Ss&&(ut=await GE(W.localStore,Z.query,!1).then((({documents:R})=>Z.view.ru(R,ut))));const _t=ot&&ot.targetChanges.get(Z.targetId),wt=ot&&ot.targetMismatches.get(Z.targetId)!=null,gt=Z.view.applyChanges(ut,W.isPrimaryClient,_t,wt);return eT(W,Z.targetId,gt.au),gt.snapshot})(r,T,C,P);const u=await GE(r.localStore,t,!0),h=new wI(t,u.ks),m=h.ru(u.documents),_=bu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),g=h.applyChanges(m,r.isPrimaryClient,_);eT(r,n,g.au);const E=new II(t,n,h);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),g.snapshot}async function xI(r,t,n){const s=St(r),l=s.Tu.get(t),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((h=>!tf(h,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await rg(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Gg(s.remoteStore,l.targetId),og(s,l.targetId)})).catch(Dl)):(og(s,l.targetId),await rg(s.localStore,l.targetId,!0))}async function LI(r,t){const n=St(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gg(n.remoteStore,s.targetId))}async function PI(r,t,n){const s=jI(r);try{const l=await(function(h,m){const _=St(h),g=oe.now(),E=m.reduce(((P,H)=>P.add(H.key)),Vt());let T,C;return _.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let H=Ts(),W=Vt();return _.xs.getEntries(P,E).next((Z=>{H=Z,H.forEach(((at,ot)=>{ot.isValidDocument()||(W=W.add(at))}))})).next((()=>_.localDocuments.getOverlayedDocuments(P,H))).next((Z=>{T=Z;const at=[];for(const ot of m){const ut=Ww(ot,T.get(ot.key).overlayedDocument);ut!=null&&at.push(new ha(ot.key,ut,w0(ut.value.mapValue),_s.exists(!0)))}return _.mutationQueue.addMutationBatch(P,g,at,m)})).next((Z=>{C=Z;const at=Z.applyToLocalDocumentSet(T,W);return _.documentOverlayCache.saveOverlays(P,Z.batchId,at)}))})).then((()=>({batchId:C.batchId,changes:U0(T)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(h,m,_){let g=h.du[h.currentUser.toKey()];g||(g=new Ve(Ot)),g=g.insert(m,_),h.du[h.currentUser.toKey()]=g})(s,l.batchId,n),await wu(s,l.changes),await of(s.remoteStore)}catch(l){const u=Wg(l,"Failed to persist write");n.reject(u)}}async function SS(r,t){const n=St(r);try{const s=await K2(n.localStore,t);t.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(Yt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?Yt(h.hu,14607):l.removedDocuments.size>0&&(Yt(h.hu,42227),h.hu=!1))})),await wu(n,s,t)}catch(s){await Dl(s)}}function tT(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(h,m){const _=St(h);_.onlineState=m;let g=!1;_.queries.forEach(((E,T)=>{for(const C of T.ba)C.va(m)&&(g=!0)})),g&&Zg(_)})(s.eventManager,t),l.length&&s.Pu.J_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function UI(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),u=l&&l.key;if(u){let h=new Ve(mt.comparator);h=h.insert(u,un.newNoDocument(u,Et.min()));const m=Vt().add(u),_=new rf(Et.min(),new Map,new Ve(Ot),h,m);await SS(s,_),s.Ru=s.Ru.remove(u),s.Au.delete(t),$g(s)}else await rg(s.localStore,t,!1).then((()=>og(s,t,n))).catch(Dl)}async function kI(r,t){const n=St(r),s=t.batch.batchId;try{const l=await Y2(n.localStore,t);CS(n,s,null),AS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,l)}catch(l){await Dl(l)}}async function zI(r,t,n){const s=St(r);try{const l=await(function(h,m){const _=St(h);return _.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return _.mutationQueue.lookupMutationBatch(g,m).next((T=>(Yt(T!==null,37113),E=T.keys(),_.mutationQueue.removeMutationBatch(g,T)))).next((()=>_.mutationQueue.performConsistencyCheck(g))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(g,E,m))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>_.localDocuments.getDocuments(g,E)))}))})(s.localStore,t);CS(s,t,n),AS(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await wu(s,l)}catch(l){await Dl(l)}}function AS(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function CS(r,t,n){const s=St(r);let l=s.du[s.currentUser.toKey()];if(l){const u=l.get(t);u&&(n?u.reject(n):u.resolve(),l=l.remove(t)),s.du[s.currentUser.toKey()]=l}}function og(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Vu.Gr(t).forEach((s=>{r.Vu.containsKey(s)||bS(r,s)}))}function bS(r,t){r.Eu.delete(t.path.canonicalString());const n=r.Ru.get(t);n!==null&&(Gg(r.remoteStore,n),r.Ru=r.Ru.remove(t),r.Au.delete(n),$g(r))}function eT(r,t,n){for(const s of n)s instanceof vS?(r.Vu.addReference(s.key,t),BI(r,s)):s instanceof ES?(st(Jg,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,t),r.Vu.containsKey(s.key)||bS(r,s.key)):yt(19791,{wu:s})}function BI(r,t){const n=t.key,s=n.path.canonicalString();r.Ru.get(n)||r.Eu.has(s)||(st(Jg,"New document in limbo: "+n),r.Eu.add(s),$g(r))}function $g(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new mt(me.fromString(t)),s=r.fu.next();r.Au.set(s,new NI(n)),r.Ru=r.Ru.insert(n,s),cS(r.remoteStore,new nr(Hi($h(n.path)),s,"TargetPurposeLimboResolution",Xh.ce))}}async function wu(r,t,n){const s=St(r),l=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,_)=>{h.push(s.pu(_,t,n).then((g=>{if((g||n)&&s.isPrimaryClient){const E=g?!g.fromCache:n?.targetChanges.get(_.targetId)?.current;s.sharedClientState.updateQueryState(_.targetId,E?"current":"not-current")}if(g){l.push(g);const E=jg.Es(_.targetId,g);u.push(E)}})))})),await Promise.all(h),s.Pu.J_(l),await(async function(_,g){const E=St(_);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>X.forEach(g,(C=>X.forEach(C.Ts,(P=>E.persistence.referenceDelegate.addReference(T,C.targetId,P))).next((()=>X.forEach(C.Is,(P=>E.persistence.referenceDelegate.removeReference(T,C.targetId,P)))))))))}catch(T){if(!Ml(T))throw T;st(Hg,"Failed to update sequence numbers: "+T)}for(const T of g){const C=T.targetId;if(!T.fromCache){const P=E.vs.get(C),H=P.snapshotVersion,W=P.withLastLimboFreeSnapshotVersion(H);E.vs=E.vs.insert(C,W)}}})(s.localStore,u))}async function qI(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){st(Jg,"User change. New user:",t.toKey());const s=await aS(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((_=>{_.reject(new ht(J.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Ns)}}function FI(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Vt().add(s.key);{let l=Vt();const u=n.Iu.get(t);if(!u)return l;for(const h of u){const m=n.Tu.get(h);l=l.unionWith(m.view.nu)}return l}}function RS(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=SS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=UI.bind(null,t),t.Pu.J_=bI.bind(null,t.eventManager),t.Pu.yu=RI.bind(null,t.eventManager),t}function jI(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,t),t}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=af(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Q2(this.persistence,new j2,t.initialUser,this.serializer)}Cu(t){return new rS(Fg.Vi,this.serializer)}Du(t){return new $2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class HI extends Uh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Yt(this.persistence.referenceDelegate instanceof Lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new I2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new rS((s=>Lh.Vi(s,n)),this.serializer)}}class ug{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=qI.bind(null,this.syncEngine),await SI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new CI})()}createDatastore(t){const n=af(t.databaseInfo.databaseId),s=sI(t.databaseInfo);return uI(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,u,h,m){return new hI(s,l,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>tT(this.syncEngine,n,0)),(function(){return KE.v()?new KE:new tI})())}createSyncEngine(t,n){return(function(l,u,h,m,_,g,E){const T=new DI(l,u,h,m,_,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=St(n);st(ia,"RemoteStore shutting down."),s.Ea.add(5),await Ru(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ug.provider={build:()=>new ug};class wS{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Es("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const pr="FirestoreClient";class GI{constructor(t,n,s,l,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=l,this.user=on.UNAUTHENTICATED,this.clientId=Dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{st(pr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(st(pr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Wg(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Dm(r,t){r.asyncQueue.verifyOperationInProgress(),st(pr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await aS(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function nT(r,t){r.asyncQueue.verifyOperationInProgress();const n=await QI(r);st(pr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>WE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>WE(t.remoteStore,l))),r._onlineComponents=t}async function QI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(pr,"Using user provided OfflineComponentProvider");try{await Dm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;na("Error using user provided cache. Falling back to memory cache: "+n),await Dm(r,new Uh)}}else st(pr,"Using default OfflineComponentProvider"),await Dm(r,new HI(void 0));return r._offlineComponents}async function IS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(pr,"Using user provided OnlineComponentProvider"),await nT(r,r._uninitializedComponentsProvider._online)):(st(pr,"Using default OnlineComponentProvider"),await nT(r,new ug))),r._onlineComponents}function YI(r){return IS(r).then((t=>t.syncEngine))}async function cg(r){const t=await IS(r),n=t.eventManager;return n.onListen=MI.bind(null,t.syncEngine),n.onUnlisten=xI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=OI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=LI.bind(null,t.syncEngine),n}function KI(r,t,n,s){const l=new wS(s),u=new yS(t,l,n);return r.asyncQueue.enqueueAndForget((async()=>pS(await cg(r),u))),()=>{l.Nu(),r.asyncQueue.enqueueAndForget((async()=>_S(await cg(r),u)))}}function XI(r,t,n={}){const s=new lr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,_,g){const E=new wS({next:C=>{E.Nu(),h.enqueueAndForget((()=>_S(u,T)));const P=C.docs.has(m);!P&&C.fromCache?g.reject(new ht(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&C.fromCache&&_&&_.source==="server"?g.reject(new ht(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new yS($h(m.path),E,{includeMetadataChanges:!0,Ka:!0});return pS(u,T)})(await cg(r),r.asyncQueue,t,n,s))),s.promise}function WI(r,t){const n=new lr;return r.asyncQueue.enqueueAndForget((async()=>PI(await YI(r),t,n))),n.promise}function NS(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}const ZI="ComponentProvider",iT=new Map;function JI(r,t,n,s,l){return new yw(r,t,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,NS(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,s)}const DS="firestore.googleapis.com",sT=!0;class rT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ht(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DS,this.ssl=sT}else this.host=t.host,this.ssl=t.ssl??sT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=sS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<R2)throw new ht(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NS(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ht(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ht(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ht(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tp{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new WR;switch(s.type){case"firstParty":return new tw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ht(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=iT.get(n);s&&(st(ZI,"Removing Datastore"),iT.delete(n),s.terminate())})(this),Promise.resolve()}}function $I(r,t,n,s={}){r=or(r,tp);const l=Rg(t),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;l&&(_b(`https://${m}`),Tb("Firestore",!0)),u.host!==DS&&u.host!==m&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:m,ssl:l,emulatorOptions:s};if(!bh(_,h)&&(r._setSettings(_),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=on.MOCK_USER;else{g=yb(s.mockUserToken,r._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ht(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(T)}r._authCredentials=new ZR(new p0(g,E))}}class uf{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new uf(this.firestore,t,this._query)}}class ze{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ze(this.firestore,t,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Au(n,ze._jsonSchema))return new ze(t,s||null,new mt(me.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Oe("string",ze._jsonSchemaVersion),referencePath:Oe("string")};class vu extends uf{constructor(t,n,s){super(t,n,$h(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ze(this.firestore,null,new mt(t))}withConverter(t){return new vu(this.firestore,t,this._path)}}function Jo(r,t,...n){if(r=yl(r),arguments.length===1&&(t=Dg.newId()),aw("doc","path",t),r instanceof tp){const s=me.fromString(t,...n);return vE(s),new ze(r,null,new mt(s))}{if(!(r instanceof ze||r instanceof vu))throw new ht(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(me.fromString(t,...n));return vE(s),new ze(r.firestore,r instanceof vu?r.converter:null,new mt(s))}}const aT="AsyncQueue";class lT{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oS(this,"async_queue_retry"),this._c=()=>{const s=Nm();s&&st(aT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!Ml(t))throw t;st(aT,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",oT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Xg.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:oT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function oT(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Eu extends tp{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new lT,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lT(t),this._firestoreClient=void 0,await t}}}function tN(r,t){const n=typeof r=="object"?r:PR(),s=typeof r=="string"?r:Ih,l=VR(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=pb("firestore");u&&$I(l,...u)}return l}function ep(r){if(r._terminated)throw new ht(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||eN(r),r._firestoreClient}function eN(r){const t=r._freezeSettings(),n=JI(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new GI(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(r._componentsProvider))}class Zn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zn(nn.fromBase64String(t))}catch(n){throw new ht(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Zn(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Au(t,Zn._jsonSchema))return Zn.fromBase64String(t.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Oe("string",Zn._jsonSchemaVersion),bytes:Oe("string")};class MS{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ht(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class OS{constructor(t){this._methodName=t}}class Qi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ht(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ht(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ot(this._lat,t._lat)||Ot(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(t){if(Au(t,Qi._jsonSchema))return new Qi(t.latitude,t.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Oe("string",Qi._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};class _i{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Au(t,_i._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new _i(t.vectorValues);throw new ht(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:Oe("string",_i._jsonSchemaVersion),vectorValues:Oe("object")};const nN=/^__.*__$/;class iN{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new ha(t,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(t,this.data,n,this.fieldTransforms)}}function VS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{dataSource:r})}}class np{constructor(t,n,s,l,u,h){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new np({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const n=this.path?.child(t),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(t),s}childContextForFieldPath(t){const n=this.path?.child(t),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return kh(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(VS(this.dataSource)&&nN.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class sN{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||af(t)}createContext(t,n,s,l=!1){return new np({dataSource:t,methodName:n,targetDoc:s,path:en.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rN(r){const t=r._freezeSettings(),n=af(r._databaseId);return new sN(r._databaseId,!!t.ignoreUndefinedProperties,n)}function aN(r,t,n,s,l,u={}){const h=r.createContext(u.merge||u.mergeFields?2:0,t,n,l);US("Data must be an object, but it was:",h,s);const m=LS(s,h);let _,g;if(u.merge)_=new gi(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const C=ip(t,T,n);if(!h.contains(C))throw new ht(J.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);uN(E,C)||E.push(C)}_=new gi(E),g=h.fieldTransforms.filter((T=>_.covers(T.field)))}else _=null,g=h.fieldTransforms;return new iN(new Wn(m),_,g)}function xS(r,t){if(PS(r=yl(r)))return US("Unsupported field value:",t,r),LS(r,t);if(r instanceof OS)return(function(s,l){if(!VS(l.dataSource))throw l.createError(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(s,l){const u=[];let h=0;for(const m of s){let _=xS(m,l.childContextForArray(h));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),h++}return{arrayValue:{values:u}}})(r,t)}return(function(s,l){if((s=yl(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Hw(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=oe.fromDate(s);return{timestampValue:xh(l.serializer,u)}}if(s instanceof oe){const u=new oe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xh(l.serializer,u)}}if(s instanceof Qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zn)return{bytesValue:W0(l.serializer,s._byteString)};if(s instanceof ze){const u=l.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof _i)return(function(h,m){const _=h instanceof _i?h.toArray():h;return{mapValue:{fields:{[b0]:{stringValue:R0},[Nh]:{arrayValue:{values:_.map((E=>{if(typeof E!="number")throw m.createError("VectorValues must only contain numeric values.");return Ug(m.serializer,E)}))}}}}}})(s,l);if(iS(s))return s._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Mg(s)}`)})(r,t)}function LS(r,t){const n={};return v0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ua(r,((s,l)=>{const u=xS(l,t.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function PS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof oe||r instanceof Qi||r instanceof Zn||r instanceof ze||r instanceof OS||r instanceof _i||iS(r))}function US(r,t,n){if(!PS(n)||!_0(n)){const s=Mg(n);throw s==="an object"?t.createError(r+" a custom object"):t.createError(r+" "+s)}}function ip(r,t,n){if((t=yl(t))instanceof MS)return t._internalPath;if(typeof t=="string")return oN(r,t);throw kh("Field path arguments must be of type string or ",r,!1,void 0,n)}const lN=new RegExp("[~\\*/\\[\\]]");function oN(r,t,n){if(t.search(lN)>=0)throw kh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new MS(...t.split("."))._internalPath}catch{throw kh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function kh(r,t,n,s,l){const u=s&&!s.isEmpty(),h=l!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(u||h)&&(_+=" (found",u&&(_+=` in field ${s}`),h&&(_+=` in document ${l}`),_+=")"),new ht(J.INVALID_ARGUMENT,m+r+_)}function uN(r,t){return r.some((n=>n.isEqual(t)))}class cN{convertValue(t,n="none"){switch(mr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Te(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(dr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ua(t,((l,u)=>{s[l]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[Nh].arrayValue?.values?.map((s=>Te(s.doubleValue)));return new _i(n)}convertGeoPoint(t){return new Qi(Te(t.latitude),Te(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Zh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(mu(t));default:return null}}convertTimestamp(t){const n=fr(t);return new oe(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=me.fromString(t);Yt(nS(s),9688,{name:t});const l=new gu(s.get(1),s.get(3)),u=new mt(s.popFirst(5));return l.isEqual(n)||Es(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class kS extends cN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ze(this.firestore,null,n)}}const uT="@firebase/firestore",cT="4.11.0";function hT(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of s)if(u in l&&typeof l[u]=="function")return!0;return!1})(r,["next","error","complete"])}class zS{constructor(t,n,s,l,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new hN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const n=this._document.data.field(ip("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hN extends zS{data(){return super.data()}}function fN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ht(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function dN(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class $o{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ta extends zS{constructor(t,n,s,l,u,h){super(t,n,s,l,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(ip("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ta._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",ta._jsonSchema={type:Oe("string",ta._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class Th extends ta{data(t={}){return super.data(t)}}class ml{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new $o(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Th(this._firestore,this._userDataWriter,s.key,s,new $o(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((m=>{const _=new Th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new $o(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const _=new Th(l._firestore,l._userDataWriter,m.doc.key,m.doc,new $o(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,E=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:mN(m.type),doc:_,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ml._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function mN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}ml._jsonSchemaVersion="firestore/querySnapshot/1.0",ml._jsonSchema={type:Oe("string",ml._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};function Mm(r){r=or(r,ze);const t=or(r.firestore,Eu),n=ep(t);return XI(n,r._key).then((s=>BS(t,r,s)))}function gN(r,t,n){r=or(r,ze);const s=or(r.firestore,Eu),l=dN(r.converter,t),u=rN(s);return _N(s,[aN(u,"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,_s.none())])}function pN(r,...t){r=yl(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||hT(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hT(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let u,h,m;if(r instanceof ze)h=or(r.firestore,Eu),m=$h(r._key.path),u={next:g=>{t[s]&&t[s](BS(h,r,g))},error:t[s+1],complete:t[s+2]};else{const g=or(r,uf);h=or(g.firestore,Eu),m=g._query;const E=new kS(h);u={next:T=>{t[s]&&t[s](new ml(h,E,g,T))},error:t[s+1],complete:t[s+2]},fN(r._query)}const _=ep(h);return KI(_,m,l,u)}function _N(r,t){const n=ep(r);return WI(n,t)}function BS(r,t,n){const s=n.docs.get(t._key),l=new kS(r);return new ta(r,l,t._key,s,new $o(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){XR(r0),hu(new vl("firestore",((s,{instanceIdentifier:l,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Eu(new JR(s.getProvider("auth-internal")),new ew(h,s.getProvider("app-check-internal")),vw(h,l),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),rr(uT,cT,t),rr(uT,cT,"esm2020")})();var fT={};const dT="@firebase/database",mT="1.1.0";let qS="";function yN(r){qS=r}class vN{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),tn(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:cu(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class EN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ss(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const FS=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new vN(t)}}catch{}return new EN},$r=FS("localStorage"),TN=FS("sessionStorage");const gl=new wg("@firebase/database"),SN=(function(){let r=1;return function(){return r++}})(),jS=function(r){const t=Pb(r),n=new xb;n.update(t);const s=n.digest();return Ag.encodeByteArray(s)},Iu=function(...r){let t="";for(let n=0;n<r.length;n++){const s=r[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?t+=Iu.apply(null,s):typeof s=="object"?t+=tn(s):t+=s,t+=" "}return t};let ru=null,gT=!0;const AN=function(r,t){it(!0,"Can't turn on custom loggers persistently."),gl.logLevel=Lt.VERBOSE,ru=gl.log.bind(gl)},cn=function(...r){if(gT===!0&&(gT=!1,ru===null&&TN.get("logging_enabled")===!0&&AN()),ru){const t=Iu.apply(null,r);ru(t)}},Nu=function(r){return function(...t){cn(r,...t)}},hg=function(...r){const t="FIREBASE INTERNAL ERROR: "+Iu(...r);gl.error(t)},sa=function(...r){const t=`FIREBASE FATAL ERROR: ${Iu(...r)}`;throw gl.error(t),new Error(t)},Pn=function(...r){const t="FIREBASE WARNING: "+Iu(...r);gl.warn(t)},CN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},HS=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},bN=function(r){if(document.readyState==="complete")r();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},bl="[MIN_NAME]",ra="[MAX_NAME]",Vl=function(r,t){if(r===t)return 0;if(r===bl||t===ra)return-1;if(t===bl||r===ra)return 1;{const n=pT(r),s=pT(t);return n!==null?s!==null?n-s===0?r.length-t.length:n-s:-1:s!==null?1:r<t?-1:1}},RN=function(r,t){return r===t?0:r<t?-1:1},Go=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+tn(t))},sp=function(r){if(typeof r!="object"||r===null)return tn(r);const t=[];for(const s in r)t.push(s);t.sort();let n="{";for(let s=0;s<t.length;s++)s!==0&&(n+=","),n+=tn(t[s]),n+=":",n+=sp(r[t[s]]);return n+="}",n},GS=function(r,t){const n=r.length;if(n<=t)return[r];const s=[];for(let l=0;l<n;l+=t)l+t>n?s.push(r.substring(l,n)):s.push(r.substring(l,l+t));return s};function $n(r,t){for(const n in r)r.hasOwnProperty(n)&&t(n,r[n])}const QS=function(r){it(!HS(r),"Invalid JSON number");const t=11,n=52,s=(1<<t-1)-1;let l,u,h,m,_;r===0?(u=0,h=0,l=1/r===-1/0?1:0):(l=r<0,r=Math.abs(r),r>=Math.pow(2,1-s)?(m=Math.min(Math.floor(Math.log(r)/Math.LN2),s),u=m+s,h=Math.round(r*Math.pow(2,n-m)-Math.pow(2,n))):(u=0,h=Math.round(r/Math.pow(2,1-s-n))));const g=[];for(_=n;_;_-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(_=t;_;_-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(l?1:0),g.reverse();const E=g.join("");let T="";for(_=0;_<64;_+=8){let C=parseInt(E.substr(_,8),2).toString(16);C.length===1&&(C="0"+C),T=T+C}return T.toLowerCase()},wN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},IN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},NN=new RegExp("^-?(0*)\\d{1,10}$"),DN=-2147483648,MN=2147483647,pT=function(r){if(NN.test(r)){const t=Number(r);if(t>=DN&&t<=MN)return t}return null},Du=function(r){try{r()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Pn("Exception was thrown by user callback.",n),t},Math.floor(0))}},ON=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},au=function(r,t){const n=setTimeout(r,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class VN{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,s0(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,s):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xN{constructor(t,n,s){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,s):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(t)}}const rp="5",YS="v",KS="s",XS="r",WS="f",ZS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JS="ls",$S="p",fg="ac",t1="websocket",e1="long_polling";class LN{constructor(t,n,s,l,u=!1,h="",m=!1,_=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=_,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$r.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&$r.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function PN(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function n1(r,t,n){it(typeof t=="string","typeof type must == string"),it(typeof n=="object","typeof params must == object");let s;if(t===t1)s=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(t===e1)s=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);PN(r)&&(n.ns=r.namespace);const l=[];return $n(n,(u,h)=>{l.push(u+"="+h)}),s+l.join("&")}class UN{constructor(){this.counters_={}}incrementCounter(t,n=1){Ss(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return ub(this.counters_)}}const Om={},Vm={};function ap(r){const t=r.toString();return Om[t]||(Om[t]=new UN),Om[t]}function kN(r,t){const n=r.toString();return Vm[n]||(Vm[n]=t()),Vm[n]}class zN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&Du(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const _T="start",BN="close",qN="pLPCommand",FN="pRTLPCB",i1="id",s1="pw",r1="ser",jN="cb",HN="seg",GN="ts",QN="d",YN="dframe",a1=1870,l1=30,KN=a1-l1,XN=25e3,WN=3e4;class cl{constructor(t,n,s,l,u,h,m){this.connId=t,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nu(t),this.stats_=ap(n),this.urlFn=_=>(this.appCheckToken&&(_[fg]=this.appCheckToken),n1(n,e1,_))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WN)),bN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lp((...u)=>{const[h,m,_,g,E]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===_T)this.id=m,this.password=_;else if(h===BN)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...u)=>{const[h,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const s={};s[_T]="t",s[r1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[jN]=this.scriptTagHolder.uniqueCallbackIdentifier),s[YS]=rp,this.transportSessionId&&(s[KS]=this.transportSessionId),this.lastSessionId&&(s[JS]=this.lastSessionId),this.applicationId&&(s[$S]=this.applicationId),this.appCheckToken&&(s[fg]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZS.test(location.hostname)&&(s[XS]=WS);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cl.forceAllow_=!0}static forceDisallow(){cl.forceDisallow_=!0}static isAvailable(){return cl.forceAllow_?!0:!cl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wN()&&!IN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=tn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=XT(n),l=GS(s,KN);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[YN]="t",s[i1]=t,s[s1]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=tn(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class lp{constructor(t,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=SN(),window[qN+this.uniqueCallbackIdentifier]=t,window[FN+this.uniqueCallbackIdentifier]=n,this.myIFrame=lp.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){cn("frame writing exception"),m.stack&&cn(m.stack),cn(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||cn("No IE domain setting required")}catch{const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[i1]=this.myID,t[s1]=this.myPW,t[r1]=this.currentSerial;let n=this.urlFn(t),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+l1+s.length<=a1;){const h=this.pendingSegs.shift();s=s+"&"+HN+l+"="+h.seg+"&"+GN+l+"="+h.ts+"&"+QN+l+"="+h.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,s){this.pendingSegs.push({seg:t,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(XN)),u=()=>{clearTimeout(l),s()};this.addTag(t,u)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{cn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const ZN=16384,JN=45e3;let zh=null;typeof MozWebSocket<"u"?zh=MozWebSocket:typeof WebSocket<"u"&&(zh=WebSocket);class mi{constructor(t,n,s,l,u,h,m){this.connId=t,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nu(this.connId),this.stats_=ap(n),this.connURL=mi.connectionURL_(n,h,m,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,s,l,u){const h={};return h[YS]=rp,typeof location<"u"&&location.hostname&&ZS.test(location.hostname)&&(h[XS]=WS),n&&(h[KS]=n),s&&(h[JS]=s),l&&(h[fg]=l),u&&(h[$S]=u),n1(t,t1,h)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$r.set("previous_websocket_failure",!0);try{let s;Cb(),this.mySock=new zh(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){mi.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&zh!==null&&!mi.forceDisallow_}static previouslyFailed(){return $r.isInMemoryStorage||$r.get("previous_websocket_failure")===!0}markConnectionHealthy(){$r.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=cu(n);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(it(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const n=tn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=GS(n,ZN);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JN))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mi.responsesRequiredToBeHealthy=2;mi.healthyTimeout=3e4;class Tu{static get ALL_TRANSPORTS(){return[cl,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=mi&&mi.isAvailable();let s=n&&!mi.previouslyFailed();if(t.webSocketOnly&&(n||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[mi];else{const l=this.transports_=[];for(const u of Tu.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);Tu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Tu.globalTransportInitialized_=!1;const $N=6e4,tD=5e3,eD=10*1024,nD=100*1024,xm="t",yT="d",iD="s",vT="r",sD="e",ET="o",TT="a",ST="n",AT="p",rD="h";class aD{constructor(t,n,s,l,u,h,m,_,g,E){this.id=t,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=_,this.onKill_=g,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nu("c:"+this.id+":"),this.transportManager_=new Tu(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=t.healthyTimeout||0;l>0&&(this.healthyTimeout_=au(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(xm in t){const n=t[xm];n===TT?this.upgradeIfSecondaryHealthy_():n===vT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ET&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Go("t",t),s=Go("d",t);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:TT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ST,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Go("t",t),s=Go("d",t);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Go(xm,t);if(yT in t){const s=t[yT];if(n===rD){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===ST){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iD?this.onConnectionShutdown_(s):n===vT?this.onReset_(s):n===sD?hg("Server Error: "+s):n===ET?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hg("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,s=t.v,l=t.h;this.sessionId=t.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rp!==s&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),au(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($N))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):au(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AT,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($r.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class o1{put(t,n,s,l){}merge(t,n,s,l){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,s){}onDisconnectMerge(t,n,s){}onDisconnectCancel(t,n){}reportStats(t){}}class u1{constructor(t){this.allowedEvents_=t,this.listeners_={},it(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(t,n,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:s});const l=this.getInitialEvent(t);l&&n.apply(s,l)}off(t,n,s){this.validateEventType_(t);const l=this.listeners_[t]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!s||s===l[u].context)){l.splice(u,1);return}}validateEventType_(t){it(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class Bh extends u1{static getInstance(){return new Bh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$T()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return it(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const CT=32,bT=768;class ue{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function ne(){return new ue("")}function zt(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function _r(r){return r.pieces_.length-r.pieceNum_}function le(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new ue(r.pieces_,t)}function c1(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function lD(r){let t="";for(let n=r.pieceNum_;n<r.pieces_.length;n++)r.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(r.pieces_[n])));return t||"/"}function h1(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function f1(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let n=r.pieceNum_;n<r.pieces_.length-1;n++)t.push(r.pieces_[n]);return new ue(t,0)}function Ye(r,t){const n=[];for(let s=r.pieceNum_;s<r.pieces_.length;s++)n.push(r.pieces_[s]);if(t instanceof ue)for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);else{const s=t.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new ue(n,0)}function Pt(r){return r.pieceNum_>=r.pieces_.length}function Jn(r,t){const n=zt(r),s=zt(t);if(n===null)return t;if(n===s)return Jn(le(r),le(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function d1(r,t){if(_r(r)!==_r(t))return!1;for(let n=r.pieceNum_,s=t.pieceNum_;n<=r.pieces_.length;n++,s++)if(r.pieces_[n]!==t.pieces_[s])return!1;return!0}function pi(r,t){let n=r.pieceNum_,s=t.pieceNum_;if(_r(r)>_r(t))return!1;for(;n<r.pieces_.length;){if(r.pieces_[n]!==t.pieces_[s])return!1;++n,++s}return!0}class oD{constructor(t,n){this.errorPrefix_=n,this.parts_=h1(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Kh(this.parts_[s]);m1(this)}}function uD(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=Kh(t),m1(r)}function cD(r){const t=r.parts_.pop();r.byteLength_-=Kh(t),r.parts_.length>0&&(r.byteLength_-=1)}function m1(r){if(r.byteLength_>bT)throw new Error(r.errorPrefix_+"has a key path longer than "+bT+" bytes ("+r.byteLength_+").");if(r.parts_.length>CT)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+CT+") or object contains a cycle "+Zr(r))}function Zr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}class op extends u1{static getInstance(){return new op}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[t];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(t){return it(t==="visible","Unknown event type: "+t),[this.visible_]}}const Qo=1e3,hD=300*1e3,RT=30*1e3,fD=1.3,dD=3e4,mD="server_kill",wT=3;class ys extends o1{constructor(t,n,s,l,u,h,m,_){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=_,this.id=ys.nextPersistentConnectionId_++,this.log_=Nu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qo,this.maxReconnectDelay_=hD,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");op.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Bh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,s){const l=++this.requestNumber_,u={r:l,a:t,b:n};this.log_(tn(u)),it(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(t){this.initConnection_();const n=new bg,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?n.resolve(m):n.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(t,n,s,l){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),it(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),it(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:n,query:t,tag:s};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(t){const n=t.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s},h="q";t.tag&&(u.q=n._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(h,u,m=>{const _=m.d,g=m.s;ys.warnOnListenWarnings_(_,n),(this.listens.get(s)&&this.listens.get(s).get(l))===t&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(s,l),t.onComplete&&t.onComplete(g,_))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Ss(t,"w")){const s=_l(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ob(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RT)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=Mb(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const u=l.s,h=l.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,s=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(t,n){const s=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),it(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,t._queryObject,n)}sendUnlisten_(t,n,s,l){this.log_("Unlisten on "+t+" for "+n);const u={p:t},h="n";l&&(u.q=s,u.t=l),this.sendRequest(h,u)}onDisconnectPut(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:s})}onDisconnectMerge(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:s})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,s,l){const u={p:n,d:s};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(t,n,s,l){this.putInternal("p",t,n,s,l)}merge(t,n,s,l){this.putInternal("m",t,n,s,l)}putInternal(t,n,s,l,u){this.initConnection_();const h={p:n,d:s};u!==void 0&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,s,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const u=s.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+tn(t));const n=t.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):hg("Unrecognized action received from server: "+tn(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){it(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dD&&(this.reconnectDelay_=Qo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fD)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+ys.nextConnectionId_++,u=this.lastSessionId;let h=!1,m=null;const _=function(){m?m.close():(h=!0,s())},g=function(T){it(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(T)};this.realtime_={close:_,sendRequest:g};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,C]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);h?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=C&&C.token,m=new aD(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,s,P=>{Pn(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(mD)},u))}catch(T){this.log_("Failed to get token: "+T),h||(this.repoInfo_.nodeAdmin&&Pn(T),_())}}}interrupt(t){cn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],aE(this.interruptReasons_)&&(this.reconnectDelay_=Qo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let s;n?s=n.map(u=>sp(u)).join("$"):s="default";const l=this.removeListen_(t,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,n){const s=new ue(t).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(t,n){cn("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wT&&(this.reconnectDelay_=RT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){cn("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+qS.replace(/\./g,"-")]=1,$T()?t["framework.cordova"]=1:Ab()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Bh.getInstance().currentlyOnline();return aE(this.interruptReasons_)&&t}}ys.nextPersistentConnectionId_=0;ys.nextConnectionId_=0;class Bt{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Bt(t,n)}}class cf{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const s=new Bt(bl,t),l=new Bt(bl,n);return this.compare(s,l)!==0}minPost(){return Bt.MIN}}let mh;class g1 extends cf{static get __EMPTY_NODE(){return mh}static set __EMPTY_NODE(t){mh=t}compare(t,n){return Vl(t.name,n.name)}isDefinedOn(t){throw wl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(ra,mh)}makePost(t,n){return it(typeof t=="string","KeyIndex indexValue must always be a string."),new Bt(t,mh)}toString(){return".key"}}const pl=new g1;class gh{constructor(t,n,s,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=n?s(t.key,n):1,l&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Qe{constructor(t,n,s,l,u){this.key=t,this.value=n,this.color=s??Qe.RED,this.left=l??bn.EMPTY_NODE,this.right=u??bn.EMPTY_NODE}copy(t,n,s,l,u){return new Qe(t??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const u=s(t,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(t,n,s),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return bn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let s,l;if(s=this,n(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(t,s.key)===0){if(s.right.isEmpty())return bn.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Qe.RED=!0;Qe.BLACK=!1;class gD{copy(t,n,s,l,u){return this}insert(t,n,s){return new Qe(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class bn{constructor(t,n=bn.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new bn(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Qe.BLACK,null,null))}remove(t){return new bn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Qe.BLACK,null,null))}get(t){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(t,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(t){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(t,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new gh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new gh(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new gh(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new gh(this.root_,null,this.comparator_,!0,t)}}bn.EMPTY_NODE=new gD;function pD(r,t){return Vl(r.name,t.name)}function up(r,t){return Vl(r,t)}let dg;function _D(r){dg=r}const p1=function(r){return typeof r=="number"?"number:"+QS(r):"string:"+r},_1=function(r){if(r.isLeafNode()){const t=r.val();it(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ss(t,".sv"),"Priority must be a string or number.")}else it(r===dg||r.isEmpty(),"priority of unexpected type.");it(r===dg||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let IT;class He{static set __childrenNodeConstructor(t){IT=t}static get __childrenNodeConstructor(){return IT}constructor(t,n=He.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,it(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_1(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new He(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Pt(t)?this:zt(t)===".priority"?this.priorityNode_:He.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:He.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const s=zt(t);return s===null?n:n.isEmpty()&&s!==".priority"?this:(it(s!==".priority"||_r(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,He.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+p1(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=QS(this.value_):t+=this.value_,this.lazyHash_=jS(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===He.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof He.__childrenNodeConstructor?-1:(it(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,s=typeof this.value_,l=He.VALUE_TYPE_ORDER.indexOf(n),u=He.VALUE_TYPE_ORDER.indexOf(s);return it(l>=0,"Unknown leaf type: "+n),it(u>=0,"Unknown leaf type: "+s),l===u?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}He.VALUE_TYPE_ORDER=["object","boolean","number","string"];let y1,v1;function yD(r){y1=r}function vD(r){v1=r}class ED extends cf{compare(t,n){const s=t.node.getPriority(),l=n.node.getPriority(),u=s.compareTo(l);return u===0?Vl(t.name,n.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(ra,new He("[PRIORITY-POST]",v1))}makePost(t,n){const s=y1(t);return new Bt(n,new He("[PRIORITY-POST]",s))}toString(){return".priority"}}const fn=new ED;const TD=Math.log(2);class SD{constructor(t){const n=u=>parseInt(Math.log(u)/TD,10),s=u=>parseInt(Array(u+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const l=s(this.count);this.bits_=t+1&l}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const qh=function(r,t,n,s){r.sort(t);const l=function(_,g){const E=g-_;let T,C;if(E===0)return null;if(E===1)return T=r[_],C=n?n(T):T,new Qe(C,T.node,Qe.BLACK,null,null);{const P=parseInt(E/2,10)+_,H=l(_,P),W=l(P+1,g);return T=r[P],C=n?n(T):T,new Qe(C,T.node,Qe.BLACK,H,W)}},u=function(_){let g=null,E=null,T=r.length;const C=function(H,W){const Z=T-H,at=T;T-=H;const ot=l(Z+1,at),ut=r[Z],_t=n?n(ut):ut;P(new Qe(_t,ut.node,W,null,ot))},P=function(H){g?(g.left=H,g=H):(E=H,g=H)};for(let H=0;H<_.count;++H){const W=_.nextBitIsOne(),Z=Math.pow(2,_.count-(H+1));W?C(Z,Qe.BLACK):(C(Z,Qe.BLACK),C(Z,Qe.RED))}return E},h=new SD(r.length),m=u(h);return new bn(s||t,m)};let Lm;const rl={};class ps{static get Default(){return it(rl&&fn,"ChildrenNode.ts has not been loaded"),Lm=Lm||new ps({".priority":rl},{".priority":fn}),Lm}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=_l(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof bn?n:null}hasIndex(t){return Ss(this.indexSet_,t.toString())}addIndex(t,n){it(t!==pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const u=n.getIterator(Bt.Wrap);let h=u.getNext();for(;h;)l=l||t.isDefinedOn(h.node),s.push(h),h=u.getNext();let m;l?m=qh(s,t.getCompare()):m=rl;const _=t.toString(),g={...this.indexSet_};g[_]=t;const E={...this.indexes_};return E[_]=m,new ps(E,g)}addToIndexes(t,n){const s=Ch(this.indexes_,(l,u)=>{const h=_l(this.indexSet_,u);if(it(h,"Missing index implementation for "+u),l===rl)if(h.isDefinedOn(t.node)){const m=[],_=n.getIterator(Bt.Wrap);let g=_.getNext();for(;g;)g.name!==t.name&&m.push(g),g=_.getNext();return m.push(t),qh(m,h.getCompare())}else return rl;else{const m=n.get(t.name);let _=l;return m&&(_=_.remove(new Bt(t.name,m))),_.insert(t,t.node)}});return new ps(s,this.indexSet_)}removeFromIndexes(t,n){const s=Ch(this.indexes_,l=>{if(l===rl)return l;{const u=n.get(t.name);return u?l.remove(new Bt(t.name,u)):l}});return new ps(s,this.indexSet_)}}let Yo;class Qt{static get EMPTY_NODE(){return Yo||(Yo=new Qt(new bn(up),null,ps.Default))}constructor(t,n,s){this.children_=t,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&_1(this.priorityNode_),this.children_.isEmpty()&&it(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yo}updatePriority(t){return this.children_.isEmpty()?this:new Qt(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?Yo:n}}getChild(t){const n=zt(t);return n===null?this:this.getImmediateChild(n).getChild(le(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(it(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const s=new Bt(t,n);let l,u;n.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(t,n),u=this.indexMap_.addToIndexes(s,this.children_));const h=l.isEmpty()?Yo:this.priorityNode_;return new Qt(l,h,u)}}updateChild(t,n){const s=zt(t);if(s===null)return n;{it(zt(t)!==".priority"||_r(t)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(le(t),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let s=0,l=0,u=!0;if(this.forEachChild(fn,(h,m)=>{n[h]=m.val(t),s++,u&&Qt.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):u=!1}),!t&&u&&l<2*s){const h=[];for(const m in n)h[m]=n[m];return h}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+p1(this.getPriority().val())+":"),this.forEachChild(fn,(n,s)=>{const l=s.hash();l!==""&&(t+=":"+n+":"+l)}),this.lazyHash_=t===""?"":jS(t)}return this.lazyHash_}getPredecessorChildName(t,n,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Bt(t,n));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Bt(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Bt(n,this.children_.get(n)):null}forEachChild(t,n){const s=this.resolveIndex_(t);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Bt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Mu?-1:0}withIndex(t){if(t===pl||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Qt(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===pl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(fn),l=n.getIterator(fn);let u=s.getNext(),h=l.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=s.getNext(),h=l.getNext()}return u===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===pl?null:this.indexMap_.get(t.toString())}}Qt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AD extends Qt{constructor(){super(new bn(up),Qt.EMPTY_NODE,ps.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Qt.EMPTY_NODE}isEmpty(){return!1}}const Mu=new AD;Object.defineProperties(Bt,{MIN:{value:new Bt(bl,Qt.EMPTY_NODE)},MAX:{value:new Bt(ra,Mu)}});g1.__EMPTY_NODE=Qt.EMPTY_NODE;He.__childrenNodeConstructor=Qt;_D(Mu);vD(Mu);const CD=!0;function hn(r,t=null){if(r===null)return Qt.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(t=r[".priority"]),it(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const n=r;return new He(n,hn(t))}if(!(r instanceof Array)&&CD){const n=[];let s=!1;if($n(r,(h,m)=>{if(h.substring(0,1)!=="."){const _=hn(m);_.isEmpty()||(s=s||!_.getPriority().isEmpty(),n.push(new Bt(h,_)))}}),n.length===0)return Qt.EMPTY_NODE;const u=qh(n,pD,h=>h.name,up);if(s){const h=qh(n,fn.getCompare());return new Qt(u,hn(t),new ps({".priority":h},{".priority":fn}))}else return new Qt(u,hn(t),ps.Default)}else{let n=Qt.EMPTY_NODE;return $n(r,(s,l)=>{if(Ss(r,s)&&s.substring(0,1)!=="."){const u=hn(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(s,u))}}),n.updatePriority(hn(t))}}yD(hn);class bD extends cf{constructor(t){super(),this.indexPath_=t,it(!Pt(t)&&zt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const s=this.extractChild(t.node),l=this.extractChild(n.node),u=s.compareTo(l);return u===0?Vl(t.name,n.name):u}makePost(t,n){const s=hn(t),l=Qt.EMPTY_NODE.updateChild(this.indexPath_,s);return new Bt(n,l)}maxPost(){const t=Qt.EMPTY_NODE.updateChild(this.indexPath_,Mu);return new Bt(ra,t)}toString(){return h1(this.indexPath_,0).join("/")}}class RD extends cf{compare(t,n){const s=t.node.compareTo(n.node);return s===0?Vl(t.name,n.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(t,n){const s=hn(t);return new Bt(n,s)}toString(){return".value"}}const wD=new RD;function ID(r){return{type:"value",snapshotNode:r}}function ND(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function DD(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function NT(r,t,n){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:n}}function MD(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}class cp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return it(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return it(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bl}hasEnd(){return this.endSet_}getIndexEndValue(){return it(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return it(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ra}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return it(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fn}copy(){const t=new cp;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function DT(r){const t={};if(r.isDefault())return t;let n;if(r.index_===fn?n="$priority":r.index_===wD?n="$value":r.index_===pl?n="$key":(it(r.index_ instanceof bD,"Unrecognized index type!"),n=r.index_.toString()),t.orderBy=tn(n),r.startSet_){const s=r.startAfterSet_?"startAfter":"startAt";t[s]=tn(r.indexStartValue_),r.startNameSet_&&(t[s]+=","+tn(r.indexStartName_))}if(r.endSet_){const s=r.endBeforeSet_?"endBefore":"endAt";t[s]=tn(r.indexEndValue_),r.endNameSet_&&(t[s]+=","+tn(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function MT(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_),t.sin=!r.startAfterSet_),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_),t.ein=!r.endBeforeSet_),r.limitSet_){t.l=r.limit_;let n=r.viewFrom_;n===""&&(r.isViewFromLeft()?n="l":n="r"),t.vf=n}return r.index_!==fn&&(t.i=r.index_.toString()),t}class Fh extends o1{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(it(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,s,l){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=Nu("p:rest:"),this.listens_={}}listen(t,n,s,l){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const h=Fh.getListenId_(t,s),m={};this.listens_[h]=m;const _=DT(t._queryParams);this.restRequest_(u+".json",_,(g,E)=>{let T=E;if(g===404&&(T=null,g=null),g===null&&this.onDataUpdate_(u,T,!1,s),_l(this.listens_,h)===m){let C;g?g===401?C="permission_denied":C="rest_error:"+g:C="ok",l(C,null)}})}unlisten(t,n){const s=Fh.getListenId_(t,n);delete this.listens_[s]}get(t){const n=DT(t._queryParams),s=t._path.toString(),l=new bg;return this.restRequest_(s+".json",n,(u,h)=>{let m=h;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(s,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(t){}restRequest_(t,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Vb(n);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(s&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let _=null;if(m.status>=200&&m.status<300){try{_=cu(m.responseText)}catch{Pn("Failed to parse JSON response for "+h+": "+m.responseText)}s(null,_)}else m.status!==401&&m.status!==404&&Pn("Got unsuccessful REST response for "+h+" Status: "+m.status),s(m.status);s=null}},m.open("GET",h,!0),m.send()})}}class OD{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function jh(){return{value:null,children:new Map}}function E1(r,t,n){if(Pt(t))r.value=n,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(t,n);else{const s=zt(t);r.children.has(s)||r.children.set(s,jh());const l=r.children.get(s);t=le(t),E1(l,t,n)}}function mg(r,t,n){r.value!==null?n(t,r.value):VD(r,(s,l)=>{const u=new ue(t.toString()+"/"+s);mg(l,u,n)})}function VD(r,t){r.children.forEach((n,s)=>{t(s,n)})}class xD{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n={...t};return this.last_&&$n(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=t,n}}const OT=10*1e3,LD=30*1e3,PD=300*1e3;class UD{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xD(t);const s=OT+(LD-OT)*Math.random();au(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),n={};let s=!1;$n(t,(l,u)=>{u>0&&Ss(this.statsToReport_,l)&&(n[l]=u,s=!0)}),s&&this.server_.reportStats(n),au(this.reportStats_.bind(this),Math.floor(Math.random()*2*PD))}}var ji;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ji||(ji={}));function T1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function S1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function A1(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class Hh{constructor(t,n,s){this.path=t,this.affectedTree=n,this.revert=s,this.type=ji.ACK_USER_WRITE,this.source=T1()}operationForChild(t){if(Pt(this.path)){if(this.affectedTree.value!=null)return it(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ue(t));return new Hh(ne(),n,this.revert)}}else return it(zt(this.path)===t,"operationForChild called for unrelated child."),new Hh(le(this.path),this.affectedTree,this.revert)}}class aa{constructor(t,n,s){this.source=t,this.path=n,this.snap=s,this.type=ji.OVERWRITE}operationForChild(t){return Pt(this.path)?new aa(this.source,ne(),this.snap.getImmediateChild(t)):new aa(this.source,le(this.path),this.snap)}}class Su{constructor(t,n,s){this.source=t,this.path=n,this.children=s,this.type=ji.MERGE}operationForChild(t){if(Pt(this.path)){const n=this.children.subtree(new ue(t));return n.isEmpty()?null:n.value?new aa(this.source,ne(),n.value):new Su(this.source,ne(),n)}else return it(zt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Su(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hp{constructor(t,n,s){this.node_=t,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Pt(t))return this.isFullyInitialized()&&!this.filtered_;const n=zt(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function kD(r,t,n,s){const l=[],u=[];return t.forEach(h=>{h.type==="child_changed"&&r.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&u.push(MD(h.childName,h.snapshotNode))}),Ko(r,l,"child_removed",t,s,n),Ko(r,l,"child_added",t,s,n),Ko(r,l,"child_moved",u,s,n),Ko(r,l,"child_changed",t,s,n),Ko(r,l,"value",t,s,n),l}function Ko(r,t,n,s,l,u){const h=s.filter(m=>m.type===n);h.sort((m,_)=>BD(r,m,_)),h.forEach(m=>{const _=zD(r,m,u);l.forEach(g=>{g.respondsTo(m.type)&&t.push(g.createEvent(_,r.query_))})})}function zD(r,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}function BD(r,t,n){if(t.childName==null||n.childName==null)throw wl("Should only compare child_ events.");const s=new Bt(t.childName,t.snapshotNode),l=new Bt(n.childName,n.snapshotNode);return r.index_.compare(s,l)}function C1(r,t){return{eventCache:r,serverCache:t}}function lu(r,t,n,s){return C1(new hp(t,n,s),r.serverCache)}function b1(r,t,n,s){return C1(r.eventCache,new hp(t,n,s))}function gg(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function la(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let Pm;const qD=()=>(Pm||(Pm=new bn(RN)),Pm);class ae{static fromObject(t){let n=new ae(null);return $n(t,(s,l)=>{n=n.set(new ue(s),l)}),n}constructor(t,n=qD()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:ne(),value:this.value};if(Pt(t))return null;{const s=zt(t),l=this.children.get(s);if(l!==null){const u=l.findRootMostMatchingPathAndValue(le(t),n);return u!=null?{path:Ye(new ue(s),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Pt(t))return this;{const n=zt(t),s=this.children.get(n);return s!==null?s.subtree(le(t)):new ae(null)}}set(t,n){if(Pt(t))return new ae(n,this.children);{const s=zt(t),u=(this.children.get(s)||new ae(null)).set(le(t),n),h=this.children.insert(s,u);return new ae(this.value,h)}}remove(t){if(Pt(t))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=zt(t),s=this.children.get(n);if(s){const l=s.remove(le(t));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new ae(null):new ae(this.value,u)}else return this}}get(t){if(Pt(t))return this.value;{const n=zt(t),s=this.children.get(n);return s?s.get(le(t)):null}}setTree(t,n){if(Pt(t))return n;{const s=zt(t),u=(this.children.get(s)||new ae(null)).setTree(le(t),n);let h;return u.isEmpty()?h=this.children.remove(s):h=this.children.insert(s,u),new ae(this.value,h)}}fold(t){return this.fold_(ne(),t)}fold_(t,n){const s={};return this.children.inorderTraversal((l,u)=>{s[l]=u.fold_(Ye(t,l),n)}),n(t,this.value,s)}findOnPath(t,n){return this.findOnPath_(t,ne(),n)}findOnPath_(t,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(Pt(t))return null;{const u=zt(t),h=this.children.get(u);return h?h.findOnPath_(le(t),Ye(n,u),s):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,ne(),n)}foreachOnPath_(t,n,s){if(Pt(t))return this;{this.value&&s(n,this.value);const l=zt(t),u=this.children.get(l);return u?u.foreachOnPath_(le(t),Ye(n,l),s):new ae(null)}}foreach(t){this.foreach_(ne(),t)}foreach_(t,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Ye(t,s),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,s)=>{s.value&&t(n,s.value)})}}class yi{constructor(t){this.writeTree_=t}static empty(){return new yi(new ae(null))}}function ou(r,t,n){if(Pt(t))return new yi(new ae(n));{const s=r.writeTree_.findRootMostValueAndPath(t);if(s!=null){const l=s.path;let u=s.value;const h=Jn(l,t);return u=u.updateChild(h,n),new yi(r.writeTree_.set(l,u))}else{const l=new ae(n),u=r.writeTree_.setTree(t,l);return new yi(u)}}}function VT(r,t,n){let s=r;return $n(n,(l,u)=>{s=ou(s,Ye(t,l),u)}),s}function xT(r,t){if(Pt(t))return yi.empty();{const n=r.writeTree_.setTree(t,new ae(null));return new yi(n)}}function pg(r,t){return da(r,t)!=null}function da(r,t){const n=r.writeTree_.findRootMostValueAndPath(t);return n!=null?r.writeTree_.get(n.path).getChild(Jn(n.path,t)):null}function LT(r){const t=[],n=r.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(fn,(s,l)=>{t.push(new Bt(s,l))}):r.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&t.push(new Bt(s,l.value))}),t}function cr(r,t){if(Pt(t))return r;{const n=da(r,t);return n!=null?new yi(new ae(n)):new yi(r.writeTree_.subtree(t))}}function _g(r){return r.writeTree_.isEmpty()}function Rl(r,t){return R1(ne(),r.writeTree_,t)}function R1(r,t,n){if(t.value!=null)return n.updateChild(r,t.value);{let s=null;return t.children.inorderTraversal((l,u)=>{l===".priority"?(it(u.value!==null,"Priority writes must always be leaf nodes"),s=u.value):n=R1(Ye(r,l),u,n)}),!n.getChild(r).isEmpty()&&s!==null&&(n=n.updateChild(Ye(r,".priority"),s)),n}}function w1(r,t){return O1(t,r)}function FD(r,t,n,s,l){it(s>r.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),r.allWrites.push({path:t,snap:n,writeId:s,visible:l}),l&&(r.visibleWrites=ou(r.visibleWrites,t,n)),r.lastWriteId=s}function jD(r,t){for(let n=0;n<r.allWrites.length;n++){const s=r.allWrites[n];if(s.writeId===t)return s}return null}function HD(r,t){const n=r.allWrites.findIndex(m=>m.writeId===t);it(n>=0,"removeWrite called with nonexistent writeId.");const s=r.allWrites[n];r.allWrites.splice(n,1);let l=s.visible,u=!1,h=r.allWrites.length-1;for(;l&&h>=0;){const m=r.allWrites[h];m.visible&&(h>=n&&GD(m,s.path)?l=!1:pi(s.path,m.path)&&(u=!0)),h--}if(l){if(u)return QD(r),!0;if(s.snap)r.visibleWrites=xT(r.visibleWrites,s.path);else{const m=s.children;$n(m,_=>{r.visibleWrites=xT(r.visibleWrites,Ye(s.path,_))})}return!0}else return!1}function GD(r,t){if(r.snap)return pi(r.path,t);for(const n in r.children)if(r.children.hasOwnProperty(n)&&pi(Ye(r.path,n),t))return!0;return!1}function QD(r){r.visibleWrites=I1(r.allWrites,YD,ne()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function YD(r){return r.visible}function I1(r,t,n){let s=yi.empty();for(let l=0;l<r.length;++l){const u=r[l];if(t(u)){const h=u.path;let m;if(u.snap)pi(n,h)?(m=Jn(n,h),s=ou(s,m,u.snap)):pi(h,n)&&(m=Jn(h,n),s=ou(s,ne(),u.snap.getChild(m)));else if(u.children){if(pi(n,h))m=Jn(n,h),s=VT(s,m,u.children);else if(pi(h,n))if(m=Jn(h,n),Pt(m))s=VT(s,ne(),u.children);else{const _=_l(u.children,zt(m));if(_){const g=_.getChild(le(m));s=ou(s,ne(),g)}}}else throw wl("WriteRecord should have .snap or .children")}}return s}function N1(r,t,n,s,l){if(!s&&!l){const u=da(r.visibleWrites,t);if(u!=null)return u;{const h=cr(r.visibleWrites,t);if(_g(h))return n;if(n==null&&!pg(h,ne()))return null;{const m=n||Qt.EMPTY_NODE;return Rl(h,m)}}}else{const u=cr(r.visibleWrites,t);if(!l&&_g(u))return n;if(!l&&n==null&&!pg(u,ne()))return null;{const h=function(g){return(g.visible||l)&&(!s||!~s.indexOf(g.writeId))&&(pi(g.path,t)||pi(t,g.path))},m=I1(r.allWrites,h,t),_=n||Qt.EMPTY_NODE;return Rl(m,_)}}}function KD(r,t,n){let s=Qt.EMPTY_NODE;const l=da(r.visibleWrites,t);if(l)return l.isLeafNode()||l.forEachChild(fn,(u,h)=>{s=s.updateImmediateChild(u,h)}),s;if(n){const u=cr(r.visibleWrites,t);return n.forEachChild(fn,(h,m)=>{const _=Rl(cr(u,new ue(h)),m);s=s.updateImmediateChild(h,_)}),LT(u).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}else{const u=cr(r.visibleWrites,t);return LT(u).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}}function XD(r,t,n,s,l){it(s||l,"Either existingEventSnap or existingServerSnap must exist");const u=Ye(t,n);if(pg(r.visibleWrites,u))return null;{const h=cr(r.visibleWrites,u);return _g(h)?l.getChild(n):Rl(h,l.getChild(n))}}function WD(r,t,n,s){const l=Ye(t,n),u=da(r.visibleWrites,l);if(u!=null)return u;if(s.isCompleteForChild(n)){const h=cr(r.visibleWrites,l);return Rl(h,s.getNode().getImmediateChild(n))}else return null}function ZD(r,t){return da(r.visibleWrites,t)}function JD(r,t,n,s,l,u,h){let m;const _=cr(r.visibleWrites,t),g=da(_,ne());if(g!=null)m=g;else if(n!=null)m=Rl(_,n);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const E=[],T=h.getCompare(),C=u?m.getReverseIteratorFrom(s,h):m.getIteratorFrom(s,h);let P=C.getNext();for(;P&&E.length<l;)T(P,s)!==0&&E.push(P),P=C.getNext();return E}else return[]}function $D(){return{visibleWrites:yi.empty(),allWrites:[],lastWriteId:-1}}function yg(r,t,n,s){return N1(r.writeTree,r.treePath,t,n,s)}function D1(r,t){return KD(r.writeTree,r.treePath,t)}function PT(r,t,n,s){return XD(r.writeTree,r.treePath,t,n,s)}function Gh(r,t){return ZD(r.writeTree,Ye(r.treePath,t))}function tM(r,t,n,s,l,u){return JD(r.writeTree,r.treePath,t,n,s,l,u)}function fp(r,t,n){return WD(r.writeTree,r.treePath,t,n)}function M1(r,t){return O1(Ye(r.treePath,t),r.writeTree)}function O1(r,t){return{treePath:r,writeTree:t}}class eM{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,s=t.childName;it(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),it(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(s,NT(s,t.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(s,DD(s,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(s,ND(s,t.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(s,NT(s,t.snapshotNode,l.oldSnap));else throw wl("Illegal combination of changes: "+t+" occurred after "+l)}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}class nM{getCompleteChild(t){return null}getChildAfterChild(t,n,s){return null}}const V1=new nM;class dp{constructor(t,n,s=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const s=this.optCompleteServerCache_!=null?new hp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fp(this.writes_,t,s)}}getChildAfterChild(t,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:la(this.viewCache_),u=tM(this.writes_,l,n,1,s,t);return u.length===0?null:u[0]}}function iM(r,t){it(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),it(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function sM(r,t,n,s,l){const u=new eM;let h,m;if(n.type===ji.OVERWRITE){const g=n;g.source.fromUser?h=vg(r,t,g.path,g.snap,s,l,u):(it(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered()&&!Pt(g.path),h=Qh(r,t,g.path,g.snap,s,l,m,u))}else if(n.type===ji.MERGE){const g=n;g.source.fromUser?h=aM(r,t,g.path,g.children,s,l,u):(it(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered(),h=Eg(r,t,g.path,g.children,s,l,m,u))}else if(n.type===ji.ACK_USER_WRITE){const g=n;g.revert?h=uM(r,t,g.path,s,l,u):h=lM(r,t,g.path,g.affectedTree,s,l,u)}else if(n.type===ji.LISTEN_COMPLETE)h=oM(r,t,n.path,s,u);else throw wl("Unknown operation type: "+n.type);const _=u.getChanges();return rM(t,h,_),{viewCache:h,changes:_}}function rM(r,t,n){const s=t.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),u=gg(r);(n.length>0||!r.eventCache.isFullyInitialized()||l&&!s.getNode().equals(u)||!s.getNode().getPriority().equals(u.getPriority()))&&n.push(ID(gg(t)))}}function x1(r,t,n,s,l,u){const h=t.eventCache;if(Gh(s,n)!=null)return t;{let m,_;if(Pt(n))if(it(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=la(t),E=g instanceof Qt?g:Qt.EMPTY_NODE,T=D1(s,E);m=r.filter.updateFullNode(t.eventCache.getNode(),T,u)}else{const g=yg(s,la(t));m=r.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=zt(n);if(g===".priority"){it(_r(n)===1,"Can't have a priority with additional path components");const E=h.getNode();_=t.serverCache.getNode();const T=PT(s,n,E,_);T!=null?m=r.filter.updatePriority(E,T):m=h.getNode()}else{const E=le(n);let T;if(h.isCompleteForChild(g)){_=t.serverCache.getNode();const C=PT(s,n,h.getNode(),_);C!=null?T=h.getNode().getImmediateChild(g).updateChild(E,C):T=h.getNode().getImmediateChild(g)}else T=fp(s,g,t.serverCache);T!=null?m=r.filter.updateChild(h.getNode(),g,T,E,l,u):m=h.getNode()}}return lu(t,m,h.isFullyInitialized()||Pt(n),r.filter.filtersNodes())}}function Qh(r,t,n,s,l,u,h,m){const _=t.serverCache;let g;const E=h?r.filter:r.filter.getIndexedFilter();if(Pt(n))g=E.updateFullNode(_.getNode(),s,null);else if(E.filtersNodes()&&!_.isFiltered()){const P=_.getNode().updateChild(n,s);g=E.updateFullNode(_.getNode(),P,null)}else{const P=zt(n);if(!_.isCompleteForPath(n)&&_r(n)>1)return t;const H=le(n),Z=_.getNode().getImmediateChild(P).updateChild(H,s);P===".priority"?g=E.updatePriority(_.getNode(),Z):g=E.updateChild(_.getNode(),P,Z,H,V1,null)}const T=b1(t,g,_.isFullyInitialized()||Pt(n),E.filtersNodes()),C=new dp(l,T,u);return x1(r,T,n,l,C,m)}function vg(r,t,n,s,l,u,h){const m=t.eventCache;let _,g;const E=new dp(l,t,u);if(Pt(n))g=r.filter.updateFullNode(t.eventCache.getNode(),s,h),_=lu(t,g,!0,r.filter.filtersNodes());else{const T=zt(n);if(T===".priority")g=r.filter.updatePriority(t.eventCache.getNode(),s),_=lu(t,g,m.isFullyInitialized(),m.isFiltered());else{const C=le(n),P=m.getNode().getImmediateChild(T);let H;if(Pt(C))H=s;else{const W=E.getCompleteChild(T);W!=null?c1(C)===".priority"&&W.getChild(f1(C)).isEmpty()?H=W:H=W.updateChild(C,s):H=Qt.EMPTY_NODE}if(P.equals(H))_=t;else{const W=r.filter.updateChild(m.getNode(),T,H,C,E,h);_=lu(t,W,m.isFullyInitialized(),r.filter.filtersNodes())}}}return _}function UT(r,t){return r.eventCache.isCompleteForChild(t)}function aM(r,t,n,s,l,u,h){let m=t;return s.foreach((_,g)=>{const E=Ye(n,_);UT(t,zt(E))&&(m=vg(r,m,E,g,l,u,h))}),s.foreach((_,g)=>{const E=Ye(n,_);UT(t,zt(E))||(m=vg(r,m,E,g,l,u,h))}),m}function kT(r,t,n){return n.foreach((s,l)=>{t=t.updateChild(s,l)}),t}function Eg(r,t,n,s,l,u,h,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _=t,g;Pt(n)?g=s:g=new ae(null).setTree(n,s);const E=t.serverCache.getNode();return g.children.inorderTraversal((T,C)=>{if(E.hasChild(T)){const P=t.serverCache.getNode().getImmediateChild(T),H=kT(r,P,C);_=Qh(r,_,new ue(T),H,l,u,h,m)}}),g.children.inorderTraversal((T,C)=>{const P=!t.serverCache.isCompleteForChild(T)&&C.value===null;if(!E.hasChild(T)&&!P){const H=t.serverCache.getNode().getImmediateChild(T),W=kT(r,H,C);_=Qh(r,_,new ue(T),W,l,u,h,m)}}),_}function lM(r,t,n,s,l,u,h){if(Gh(l,n)!=null)return t;const m=t.serverCache.isFiltered(),_=t.serverCache;if(s.value!=null){if(Pt(n)&&_.isFullyInitialized()||_.isCompleteForPath(n))return Qh(r,t,n,_.getNode().getChild(n),l,u,m,h);if(Pt(n)){let g=new ae(null);return _.getNode().forEachChild(pl,(E,T)=>{g=g.set(new ue(E),T)}),Eg(r,t,n,g,l,u,m,h)}else return t}else{let g=new ae(null);return s.foreach((E,T)=>{const C=Ye(n,E);_.isCompleteForPath(C)&&(g=g.set(E,_.getNode().getChild(C)))}),Eg(r,t,n,g,l,u,m,h)}}function oM(r,t,n,s,l){const u=t.serverCache,h=b1(t,u.getNode(),u.isFullyInitialized()||Pt(n),u.isFiltered());return x1(r,h,n,s,V1,l)}function uM(r,t,n,s,l,u){let h;if(Gh(s,n)!=null)return t;{const m=new dp(s,t,l),_=t.eventCache.getNode();let g;if(Pt(n)||zt(n)===".priority"){let E;if(t.serverCache.isFullyInitialized())E=yg(s,la(t));else{const T=t.serverCache.getNode();it(T instanceof Qt,"serverChildren would be complete if leaf node"),E=D1(s,T)}E=E,g=r.filter.updateFullNode(_,E,u)}else{const E=zt(n);let T=fp(s,E,t.serverCache);T==null&&t.serverCache.isCompleteForChild(E)&&(T=_.getImmediateChild(E)),T!=null?g=r.filter.updateChild(_,E,T,le(n),m,u):t.eventCache.getNode().hasChild(E)?g=r.filter.updateChild(_,E,Qt.EMPTY_NODE,le(n),m,u):g=_,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=yg(s,la(t)),h.isLeafNode()&&(g=r.filter.updateFullNode(g,h,u)))}return h=t.serverCache.isFullyInitialized()||Gh(s,ne())!=null,lu(t,g,h,r.filter.filtersNodes())}}function cM(r,t){const n=la(r.viewCache_);return n&&(r.query._queryParams.loadsAllData()||!Pt(t)&&!n.getImmediateChild(zt(t)).isEmpty())?n.getChild(t):null}function zT(r,t,n,s){t.type===ji.MERGE&&t.source.queryId!==null&&(it(la(r.viewCache_),"We should always have a full cache before handling merges"),it(gg(r.viewCache_),"Missing event cache, even though we have a server cache"));const l=r.viewCache_,u=sM(r.processor_,l,t,n,s);return iM(r.processor_,u.viewCache),it(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=u.viewCache,hM(r,u.changes,u.viewCache.eventCache.getNode())}function hM(r,t,n,s){const l=r.eventRegistrations_;return kD(r.eventGenerator_,t,n,l)}let BT;function fM(r){it(!BT,"__referenceConstructor has already been defined"),BT=r}function mp(r,t,n,s){const l=t.source.queryId;if(l!==null){const u=r.views.get(l);return it(u!=null,"SyncTree gave us an op for an invalid query."),zT(u,t,n,s)}else{let u=[];for(const h of r.views.values())u=u.concat(zT(h,t,n,s));return u}}function gp(r,t){let n=null;for(const s of r.views.values())n=n||cM(s,t);return n}let qT;function dM(r){it(!qT,"__referenceConstructor has already been defined"),qT=r}class FT{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ae(null),this.pendingWriteTree_=$D(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mM(r,t,n,s,l){return FD(r.pendingWriteTree_,t,n,s,l),l?ff(r,new aa(T1(),t,n)):[]}function hl(r,t,n=!1){const s=jD(r.pendingWriteTree_,t);if(HD(r.pendingWriteTree_,t)){let u=new ae(null);return s.snap!=null?u=u.set(ne(),!0):$n(s.children,h=>{u=u.set(new ue(h),!0)}),ff(r,new Hh(s.path,u,n))}else return[]}function hf(r,t,n){return ff(r,new aa(S1(),t,n))}function gM(r,t,n){const s=ae.fromObject(n);return ff(r,new Su(S1(),t,s))}function pM(r,t,n,s){const l=k1(r,s);if(l!=null){const u=z1(l),h=u.path,m=u.queryId,_=Jn(h,t),g=new aa(A1(m),_,n);return B1(r,h,g)}else return[]}function _M(r,t,n,s){const l=k1(r,s);if(l){const u=z1(l),h=u.path,m=u.queryId,_=Jn(h,t),g=ae.fromObject(n),E=new Su(A1(m),_,g);return B1(r,h,E)}else return[]}function L1(r,t,n){const l=r.pendingWriteTree_,u=r.syncPointTree_.findOnPath(t,(h,m)=>{const _=Jn(h,t),g=gp(m,_);if(g)return g});return N1(l,t,u,n,!0)}function ff(r,t){return P1(t,r.syncPointTree_,null,w1(r.pendingWriteTree_,ne()))}function P1(r,t,n,s){if(Pt(r.path))return U1(r,t,n,s);{const l=t.get(ne());n==null&&l!=null&&(n=gp(l,ne()));let u=[];const h=zt(r.path),m=r.operationForChild(h),_=t.children.get(h);if(_&&m){const g=n?n.getImmediateChild(h):null,E=M1(s,h);u=u.concat(P1(m,_,g,E))}return l&&(u=u.concat(mp(l,r,s,n))),u}}function U1(r,t,n,s){const l=t.get(ne());n==null&&l!=null&&(n=gp(l,ne()));let u=[];return t.children.inorderTraversal((h,m)=>{const _=n?n.getImmediateChild(h):null,g=M1(s,h),E=r.operationForChild(h);E&&(u=u.concat(U1(E,m,_,g)))}),l&&(u=u.concat(mp(l,r,s,n))),u}function k1(r,t){return r.tagToQueryMap.get(t)}function z1(r){const t=r.indexOf("$");return it(t!==-1&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new ue(r.substr(0,t))}}function B1(r,t,n){const s=r.syncPointTree_.get(t);it(s,"Missing sync point for query tag that we're tracking");const l=w1(r.pendingWriteTree_,t);return mp(s,n,l,null)}class pp{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new pp(n)}node(){return this.node_}}class _p{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ye(this.path_,t);return new _p(this.syncTree_,n)}node(){return L1(this.syncTree_,this.path_)}}const yM=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},jT=function(r,t,n){if(!r||typeof r!="object")return r;if(it(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return vM(r[".sv"],t,n);if(typeof r[".sv"]=="object")return EM(r[".sv"],t);it(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},vM=function(r,t,n){if(r==="timestamp")return n.timestamp;it(!1,"Unexpected server value: "+r)},EM=function(r,t,n){r.hasOwnProperty("increment")||it(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const s=r.increment;typeof s!="number"&&it(!1,"Unexpected increment value: "+s);const l=t.node();if(it(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const h=l.getValue();return typeof h!="number"?s:h+s},TM=function(r,t,n,s){return yp(t,new _p(n,r),s)},SM=function(r,t,n){return yp(r,new pp(t),n)};function yp(r,t,n){const s=r.getPriority().val(),l=jT(s,t.getImmediateChild(".priority"),n);let u;if(r.isLeafNode()){const h=r,m=jT(h.getValue(),t,n);return m!==h.getValue()||l!==h.getPriority().val()?new He(m,hn(l)):r}else{const h=r;return u=h,l!==h.getPriority().val()&&(u=u.updatePriority(new He(l))),h.forEachChild(fn,(m,_)=>{const g=yp(_,t.getImmediateChild(m),n);g!==_&&(u=u.updateImmediateChild(m,g))}),u}}class vp{constructor(t="",n=null,s={children:{},childCount:0}){this.name=t,this.parent=n,this.node=s}}function Ep(r,t){let n=t instanceof ue?t:new ue(t),s=r,l=zt(n);for(;l!==null;){const u=_l(s.node.children,l)||{children:{},childCount:0};s=new vp(l,s,u),n=le(n),l=zt(n)}return s}function xl(r){return r.node.value}function q1(r,t){r.node.value=t,Tg(r)}function F1(r){return r.node.childCount>0}function AM(r){return xl(r)===void 0&&!F1(r)}function df(r,t){$n(r.node.children,(n,s)=>{t(new vp(n,r,s))})}function j1(r,t,n,s){n&&t(r),df(r,l=>{j1(l,t,!0)})}function CM(r,t,n){let s=r.parent;for(;s!==null;){if(t(s))return!0;s=s.parent}return!1}function Ou(r){return new ue(r.parent===null?r.name:Ou(r.parent)+"/"+r.name)}function Tg(r){r.parent!==null&&bM(r.parent,r.name,r)}function bM(r,t,n){const s=AM(n),l=Ss(r.node.children,t);s&&l?(delete r.node.children[t],r.node.childCount--,Tg(r)):!s&&!l&&(r.node.children[t]=n.node,r.node.childCount++,Tg(r))}const RM=/[\[\].#$\/\u0000-\u001F\u007F]/,wM=/[\[\].#$\u0000-\u001F\u007F]/,Um=10*1024*1024,H1=function(r){return typeof r=="string"&&r.length!==0&&!RM.test(r)},IM=function(r){return typeof r=="string"&&r.length!==0&&!wM.test(r)},NM=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),IM(r)},G1=function(r,t,n){const s=n instanceof ue?new oD(n,r):n;if(t===void 0)throw new Error(r+"contains undefined "+Zr(s));if(typeof t=="function")throw new Error(r+"contains a function "+Zr(s)+" with contents = "+t.toString());if(HS(t))throw new Error(r+"contains "+t.toString()+" "+Zr(s));if(typeof t=="string"&&t.length>Um/3&&Kh(t)>Um)throw new Error(r+"contains a string greater than "+Um+" utf8 bytes "+Zr(s)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let l=!1,u=!1;if($n(t,(h,m)=>{if(h===".value")l=!0;else if(h!==".priority"&&h!==".sv"&&(u=!0,!H1(h)))throw new Error(r+" contains an invalid key ("+h+") "+Zr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uD(s,h),G1(r,m,s),cD(s)}),l&&u)throw new Error(r+' contains ".value" child '+Zr(s)+" in addition to actual children.")}},DM=function(r,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!H1(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!NM(n))throw new Error(Lb(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class MM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function OM(r,t){let n=null;for(let s=0;s<t.length;s++){const l=t[s],u=l.getPath();n!==null&&!d1(u,n.path)&&(r.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&r.eventLists_.push(n)}function ma(r,t,n){OM(r,n),VM(r,s=>pi(s,t)||pi(t,s))}function VM(r,t){r.recursionDepth_++;let n=!0;for(let s=0;s<r.eventLists_.length;s++){const l=r.eventLists_[s];if(l){const u=l.path;t(u)?(xM(r.eventLists_[s]),r.eventLists_[s]=null):n=!1}}n&&(r.eventLists_=[]),r.recursionDepth_--}function xM(r){for(let t=0;t<r.events.length;t++){const n=r.events[t];if(n!==null){r.events[t]=null;const s=n.getEventRunner();ru&&cn("event: "+n.toString()),Du(s)}}}const LM="repo_interrupt",PM=25;class UM{constructor(t,n,s,l){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jh(),this.transactionQueueTree_=new vp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kM(r,t,n){if(r.stats_=ap(r.repoInfo_),r.forceRestClient_||ON())r.server_=new Fh(r.repoInfo_,(s,l,u,h)=>{HT(r,s,l,u,h)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>GT(r,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}r.persistentConnection_=new ys(r.repoInfo_,t,(s,l,u,h)=>{HT(r,s,l,u,h)},s=>{GT(r,s)},s=>{BM(r,s)},r.authTokenProvider_,r.appCheckProvider_,n),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(s=>{r.server_.refreshAuthToken(s)}),r.appCheckProvider_.addTokenChangeListener(s=>{r.server_.refreshAppCheckToken(s.token)}),r.statsReporter_=kN(r.repoInfo_,()=>new UD(r.stats_,r.server_)),r.infoData_=new OD,r.infoSyncTree_=new FT({startListening:(s,l,u,h)=>{let m=[];const _=r.infoData_.getNode(s._path);return _.isEmpty()||(m=hf(r.infoSyncTree_,s._path,_),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),Tp(r,"connected",!1),r.serverSyncTree_=new FT({startListening:(s,l,u,h)=>(r.server_.listen(s,u,l,(m,_)=>{const g=h(m,_);ma(r.eventQueue_,s._path,g)}),[]),stopListening:(s,l)=>{r.server_.unlisten(s,l)}})}function zM(r){const n=r.infoData_.getNode(new ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Q1(r){return yM({timestamp:zM(r)})}function HT(r,t,n,s,l){r.dataUpdateCount++;const u=new ue(t);n=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,n):n;let h=[];if(l)if(s){const _=Ch(n,g=>hn(g));h=_M(r.serverSyncTree_,u,_,l)}else{const _=hn(n);h=pM(r.serverSyncTree_,u,_,l)}else if(s){const _=Ch(n,g=>hn(g));h=gM(r.serverSyncTree_,u,_)}else{const _=hn(n);h=hf(r.serverSyncTree_,u,_)}let m=u;h.length>0&&(m=Ap(r,u)),ma(r.eventQueue_,m,h)}function GT(r,t){Tp(r,"connected",t),t===!1&&FM(r)}function BM(r,t){$n(t,(n,s)=>{Tp(r,n,s)})}function Tp(r,t,n){const s=new ue("/.info/"+t),l=hn(n);r.infoData_.updateSnapshot(s,l);const u=hf(r.infoSyncTree_,s,l);ma(r.eventQueue_,s,u)}function qM(r){return r.nextWriteId_++}function FM(r){Y1(r,"onDisconnectEvents");const t=Q1(r),n=jh();mg(r.onDisconnect_,ne(),(l,u)=>{const h=TM(l,u,r.serverSyncTree_,t);E1(n,l,h)});let s=[];mg(n,ne(),(l,u)=>{s=s.concat(hf(r.serverSyncTree_,l,u));const h=QM(r,l);Ap(r,h)}),r.onDisconnect_=jh(),ma(r.eventQueue_,ne(),s)}function jM(r){r.persistentConnection_&&r.persistentConnection_.interrupt(LM)}function Y1(r,...t){let n="";r.persistentConnection_&&(n=r.persistentConnection_.id+":"),cn(n,...t)}function K1(r,t,n){return L1(r.serverSyncTree_,t,n)||Qt.EMPTY_NODE}function Sp(r,t=r.transactionQueueTree_){if(t||mf(r,t),xl(t)){const n=W1(r,t);it(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&HM(r,Ou(t),n)}else F1(t)&&df(t,n=>{Sp(r,n)})}function HM(r,t,n){const s=n.map(g=>g.currentWriteId),l=K1(r,t,s);let u=l;const h=l.hash();for(let g=0;g<n.length;g++){const E=n[g];it(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=Jn(t,E.path);u=u.updateChild(T,E.currentOutputSnapshotRaw)}const m=u.val(!0),_=t;r.server_.put(_.toString(),m,g=>{Y1(r,"transaction put response",{path:_.toString(),status:g});let E=[];if(g==="ok"){const T=[];for(let C=0;C<n.length;C++)n[C].status=2,E=E.concat(hl(r.serverSyncTree_,n[C].currentWriteId)),n[C].onComplete&&T.push(()=>n[C].onComplete(null,!0,n[C].currentOutputSnapshotResolved)),n[C].unwatcher();mf(r,Ep(r.transactionQueueTree_,t)),Sp(r,r.transactionQueueTree_),ma(r.eventQueue_,t,E);for(let C=0;C<T.length;C++)Du(T[C])}else{if(g==="datastale")for(let T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{Pn("transaction at "+_.toString()+" failed: "+g);for(let T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=g}Ap(r,t)}},h)}function Ap(r,t){const n=X1(r,t),s=Ou(n),l=W1(r,n);return GM(r,l,s),s}function GM(r,t,n){if(t.length===0)return;const s=[];let l=[];const h=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const _=t[m],g=Jn(n,_.path);let E=!1,T;if(it(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),_.status===4)E=!0,T=_.abortReason,l=l.concat(hl(r.serverSyncTree_,_.currentWriteId,!0));else if(_.status===0)if(_.retryCount>=PM)E=!0,T="maxretry",l=l.concat(hl(r.serverSyncTree_,_.currentWriteId,!0));else{const C=K1(r,_.path,h);_.currentInputSnapshot=C;const P=t[m].update(C.val());if(P!==void 0){G1("transaction failed: Data returned ",P,_.path);let H=hn(P);typeof P=="object"&&P!=null&&Ss(P,".priority")||(H=H.updatePriority(C.getPriority()));const Z=_.currentWriteId,at=Q1(r),ot=SM(H,C,at);_.currentOutputSnapshotRaw=H,_.currentOutputSnapshotResolved=ot,_.currentWriteId=qM(r),h.splice(h.indexOf(Z),1),l=l.concat(mM(r.serverSyncTree_,_.path,ot,_.currentWriteId,_.applyLocally)),l=l.concat(hl(r.serverSyncTree_,Z,!0))}else E=!0,T="nodata",l=l.concat(hl(r.serverSyncTree_,_.currentWriteId,!0))}ma(r.eventQueue_,n,l),l=[],E&&(t[m].status=2,(function(C){setTimeout(C,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(T==="nodata"?s.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):s.push(()=>t[m].onComplete(new Error(T),!1,null))))}mf(r,r.transactionQueueTree_);for(let m=0;m<s.length;m++)Du(s[m]);Sp(r,r.transactionQueueTree_)}function X1(r,t){let n,s=r.transactionQueueTree_;for(n=zt(t);n!==null&&xl(s)===void 0;)s=Ep(s,n),t=le(t),n=zt(t);return s}function W1(r,t){const n=[];return Z1(r,t,n),n.sort((s,l)=>s.order-l.order),n}function Z1(r,t,n){const s=xl(t);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);df(t,l=>{Z1(r,l,n)})}function mf(r,t){const n=xl(t);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,q1(t,n.length>0?n:void 0)}df(t,s=>{mf(r,s)})}function QM(r,t){const n=Ou(X1(r,t)),s=Ep(r.transactionQueueTree_,t);return CM(s,l=>{km(r,l)}),km(r,s),j1(s,l=>{km(r,l)}),n}function km(r,t){const n=xl(t);if(n){const s=[];let l=[],u=-1;for(let h=0;h<n.length;h++)n[h].status===3||(n[h].status===1?(it(u===h-1,"All SENT items should be at beginning of queue."),u=h,n[h].status=3,n[h].abortReason="set"):(it(n[h].status===0,"Unexpected transaction status in abort"),n[h].unwatcher(),l=l.concat(hl(r.serverSyncTree_,n[h].currentWriteId,!0)),n[h].onComplete&&s.push(n[h].onComplete.bind(null,new Error("set"),!1,null))));u===-1?q1(t,void 0):n.length=u+1,ma(r.eventQueue_,Ou(t),l);for(let h=0;h<s.length;h++)Du(s[h])}}function YM(r){let t="";const n=r.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}t+="/"+l}return t}function KM(r){const t={};r.charAt(0)==="?"&&(r=r.substring(1));for(const n of r.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Pn(`Invalid query segment '${n}' in query '${r}'`)}return t}const QT=function(r,t){const n=XM(r),s=n.namespace;n.domain==="firebase.com"&&sa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||CN();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new LN(n.host,n.secure,s,l,t,"",s!==n.subdomain),path:new ue(n.pathString)}},XM=function(r){let t="",n="",s="",l="",u="",h=!0,m="https",_=443;if(typeof r=="string"){let g=r.indexOf("//");g>=0&&(m=r.substring(0,g-1),r=r.substring(g+2));let E=r.indexOf("/");E===-1&&(E=r.length);let T=r.indexOf("?");T===-1&&(T=r.length),t=r.substring(0,Math.min(E,T)),E<T&&(l=YM(r.substring(E,T)));const C=KM(r.substring(Math.min(r.length,T)));g=t.indexOf(":"),g>=0?(h=m==="https"||m==="wss",_=parseInt(t.substring(g+1),10)):g=t.length;const P=t.slice(0,g);if(P.toLowerCase()==="localhost")n="localhost";else if(P.split(".").length<=2)n=P;else{const H=t.indexOf(".");s=t.substring(0,H).toLowerCase(),n=t.substring(H+1),u=s}"ns"in C&&(u=C.ns)}return{host:t,port:_,domain:n,subdomain:s,secure:h,scheme:m,pathString:l,namespace:u}};class Cp{constructor(t,n,s,l){this._repo=t,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return Pt(this._path)?null:c1(this._path)}get ref(){return new Ll(this._repo,this._path)}get _queryIdentifier(){const t=MT(this._queryParams),n=sp(t);return n==="{}"?"default":n}get _queryObject(){return MT(this._queryParams)}isEqual(t){if(t=yl(t),!(t instanceof Cp))return!1;const n=this._repo===t._repo,s=d1(this._path,t._path),l=this._queryIdentifier===t._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+lD(this._path)}}class Ll extends Cp{constructor(t,n){super(t,n,new cp,!1)}get parent(){const t=f1(this._path);return t===null?null:new Ll(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}fM(Ll);dM(Ll);const WM="FIREBASE_DATABASE_EMULATOR_HOST",Sg={};let ZM=!1;function JM(r,t,n,s,l){let u=s||r.options.databaseURL;u===void 0&&(r.options.projectId||sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",r.options.projectId),u=`${r.options.projectId}-default-rtdb.firebaseio.com`);let h=QT(u,l),m=h.repoInfo,_;typeof process<"u"&&fT&&(_=fT[WM]),_?(u=`http://${_}?ns=${m.namespace}`,h=QT(u,l),m=h.repoInfo):h.repoInfo.secure;const g=new xN(r.name,r.options,t);DM("Invalid Firebase Database URL",h),Pt(h.path)||sa("Database URL must point to the root of a Firebase Database (not including a child path).");const E=t4(m,r,g,new VN(r,n));return new e4(E,r)}function $M(r,t){const n=Sg[t];(!n||n[r.key]!==r)&&sa(`Database ${t}(${r.repoInfo_}) has already been deleted.`),jM(r),delete n[r.key]}function t4(r,t,n,s){let l=Sg[t.name];l||(l={},Sg[t.name]=l);let u=l[r.toURLString()];return u&&sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new UM(r,ZM,n,s),l[r.toURLString()]=u,u}class e4{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ll(this._repo,ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&($M(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&sa("Cannot call "+t+" on a deleted database.")}}function n4(r){yN(r0),hu(new vl("database",(t,{instanceIdentifier:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return JM(s,l,u,n)},"PUBLIC").setMultipleInstances(!0)),rr(dT,mT,r),rr(dT,mT,"esm2020")}ys.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)};ys.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)};n4();async function zm(r,t,n,s){try{await gN(Jo(r,t,n),s)}catch(l){console.error("Error adding document: "+l)}}const i4=r=>{const t=oa.c(4),{frcGame:n}=r;let s;t[0]!==n?(s=n.getTeams().sort((u,h)=>h.getAverageRP(n.getQMMatches())-u.getAverageRP(n.getQMMatches())).map((u,h)=>$.jsxs("div",{style:{backgroundColor:u.getTeamColor()},className:"row",children:[$.jsx("h3",{children:u.getTeamName()}),$.jsx("h3",{children:u.getAverageRP(n.getQMMatches())})]},h)),t[0]=n,t[1]=s):s=t[1];let l;return t[2]!==s?(l=$.jsx("div",{children:s}),t[2]=s,t[3]=l):l=t[3],l},s4={apiKey:"AIzaSyAc5Qkp_u4DuAY_0WG9rHOqJgEehbE1UeY",authDomain:"frcgamedisplay.firebaseapp.com",projectId:"frcgamedisplay",storageBucket:"frcgamedisplay.firebasestorage.app",messagingSenderId:"349409939421",appId:"1:349409939421:web:2c636b79b95bbd5833b034",measurementId:"G-QM4M63T19S"},r4=a0(s4),Xr=tN(r4);function a4(){const[r,t]=ln.useState(rn.SETUP),[n,s]=ln.useState(new di),[l,u]=ln.useState(new Ln("")),[h,m]=ln.useState(""),[_,g]=ln.useState(!1);return window.onload=function(){},ln.useEffect(()=>{if(!h)return;const E=Jo(Xr,"games",h),T=pN(E,C=>{if(C.exists()){console.log("snapshot updated");const P=jo.fromFirestore(C);s(P)}});return()=>T()},[h]),$.jsxs($.Fragment,{children:[r===rn.SETUP&&$.jsxs("div",{children:[$.jsx("button",{onClick:()=>{t(rn.ENTEROLDID)},children:"Load Existing Game"}),$.jsx("button",{onClick:()=>{t(rn.ENTERNEWID)},children:"Start New Game"})]}),r===rn.ENTEROLDID&&$.jsxs("div",{children:[$.jsx("input",{type:"text",value:h,onChange:async E=>{const T=E.target.value.trim();if(m(T),!T){g(!1);return}const C=Jo(Xr,"games",T),P=await Mm(C);g(P.exists())},placeholder:"game name"}),!_&&$.jsx("p",{style:{color:"red"},children:"Enter in an existing game name"}),$.jsx("button",{disabled:!_,onClick:async()=>{const E=Jo(Xr,"games",h),T=await Mm(E);console.log(T.data()),s(jo.fromFirestore(T)),t(rn.DISPLAYQMS)},children:"Start Game"})]}),r===rn.ENTERNEWID&&$.jsxs("div",{children:[$.jsx("input",{type:"text",value:h,onChange:async E=>{const T=E.target.value.trim();if(m(T),!T){g(!1);return}const C=Jo(Xr,"games",T),P=await Mm(C);g(P.exists())},placeholder:"name of your game"}),_&&$.jsx("p",{style:{color:"red"},children:"That game name is already in use. Try a different one."}),$.jsx("button",{disabled:_,onClick:()=>{s(n.withTestTeams()),t(rn.NEWGAMESETUP)},children:"Start Game"})]}),r===rn.NEWGAMESETUP&&$.jsxs("div",{className:"card",children:[$.jsx("h1",{children:"Setup"}),$.jsx("input",{type:"number",onChange:E=>{n.setNumQMs(parseInt(E.target.value)|0),console.log(E.target.value),console.log("game qms: "+n.getNumQMs())},placeholder:"number of QMs"}),$.jsxs("div",{className:"menu",children:[$.jsx("h3",{children:"add team"}),$.jsx("input",{type:"string",onChange:E=>{l.setTeamName(E.target.value)},placeholder:"team name"}),$.jsx("input",{type:"string",onChange:E=>{l.setTeamColor(E.target.value)},placeholder:"team color (hex)"}),$.jsx("button",{onClick:()=>{s(n.withTeam(l)),u(new Ln("")),console.log(n.getTeams())},children:"Add Team"})]}),$.jsx("button",{onClick:()=>{s(n.withQMMatches(eb(n))),t(rn.DISPLAYQMS)},children:"Start Game"}),$.jsx($C,{frcGame:n,onRemove:E=>s(T=>T.withTeamRemovedAtIndex(E))})]}),r===rn.DISPLAYQMS&&$.jsxs("div",{className:"card",children:[$.jsx("h1",{children:"QMs"}),$.jsxs("div",{className:"sidebyside",children:[$.jsx(ib,{frcGame:n}),$.jsx(i4,{frcGame:n})]}),$.jsx("button",{onClick:()=>{t(rn.RUNMATCH),zm(Xr,"games",h,jo.toFirestore(n))},children:"Start Match"})]}),r===rn.RUNMATCH&&$.jsxs("div",{className:"card",children:[$.jsx(ln.StrictMode,{children:$.jsx(rb,{onFinished:function(){const E=n.getCurrentQMMatch();E.setPlayed(!0);const T=n.withUpdatedCurrentMatch(E);zm(Xr,"games",h,jo.toFirestore(T)),t(rn.FINISHMATCH)}})}),$.jsxs("div",{className:"datatable",children:[$.jsx(oh,{frcAlliance:n.getQMMatches()[n.getCurrentQMNumber()-1].getRedAlliance(),endScreen:!0}),$.jsx(oh,{frcAlliance:n.getQMMatches()[n.getCurrentQMNumber()-1].getBlueAlliance(),endScreen:!0})]})]}),r===rn.FINISHMATCH&&$.jsxs("div",{className:"card",children:[$.jsx("div",{style:{backgroundColor:n.getCurrentQMMatch().getColor()},children:$.jsxs("h2",{children:["Winner: ",n.getCurrentQMMatch().getWinnerState()]})}),$.jsx("button",{onClick:()=>{const E=n.iterateQM();s(E),zm(Xr,"games",h,jo.toFirestore(E)),t(rn.DISPLAYQMS)},children:"Display QMs"}),$.jsxs("div",{className:"datatable",children:[$.jsx(oh,{frcAlliance:n.getQMMatches()[n.getCurrentQMNumber()-1].getRedAlliance(),endScreen:!0}),$.jsx(oh,{frcAlliance:n.getQMMatches()[n.getCurrentQMNumber()-1].getBlueAlliance(),endScreen:!0})]})]})]})}UC.createRoot(document.getElementById("root")).render($.jsx(ln.StrictMode,{children:$.jsx(a4,{})}));
